function b(c){this.c=c.d("name");this.e=10;this.f=new g(200,150,1);this.h=new g();}{b.prototype.i=function (j,k,l,m,n){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var s=this.e*h.t;var u=l.split("\n").length-1;var v=new g(200,s*u).w(h);var x=new g(100,65 -s*(u/4),).w(h);var y=new z("labelMessage",x,v,true,l,s);var A=[y];var B=m.length;var C=55;var D=new g(C,s).w(h);var E=5;var F=(this.f.G-(C*B)-(E*(B-1)))/2;for(var H=0;H<B;H++){var I=new J("buttonOption"+H,new g(F+H*(C+E),100
).w(h),D,m[H],this.e*h.t,true,true,n[H],j);A.push(I);}var K=k.L().M();var o=j.o;var N=o.p.L().M();var O=N.L().P(K).Q();var R=new S("containerChoice",O,K,A);return R;};b.prototype.T=function (j,k,l,U,V,W,X){var Y=10;var Z=new g(1,1).ab(Y);var s=20;var v=new g(k.G-Z.G*2,s);var D=new g(v.G,s*2);var bb=new g(v.G,k.t-v.t-D.t-Z.t*4
);var cb=new db("listOptions",new g(Z.G,v.t+Z.t*2),bb,U,V,s,null,null);var R=new S("containerChoice",g.eb().fb,k,[new z("labelMessage",new g(k.G/2,Z.t+s/2),v,true,l,s),cb,new J("buttonSelect",new g(Z.G,k.t-Z.t-D.t),D,W,s,true,true,function gb(j){var hb=cb.hb();if(hb!=null){X(j,hb);}},j,false),]);return R;};b.prototype.ib=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var R=new S("containerConfigure",new g(0,0).w(h),new g(200,150).w(h),[new J("buttonSave",new g(30,15).w(h),new g(65,25).w(h),"Save",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.mb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonLoad",new g(105,15).w(h),new g(65,25).w(h),"Load",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.pb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new z("labelMusicVolume",new g(30,50).w(h),new g(75,25).w(h),false,"Music:",this.e*h.t),new qb("selectMusicVolume",new g(65,45).w(h),new g(30,25).w(h),new rb(j.sb,"musicVolume"),tb.ub(),new rb(null,"value"),new rb(null,"text"),this.e*h.t),new z("labelSoundVolume",new g(105,50).w(h),new g(75,25).w(h),false,"Sound:",this.e*h.t),new qb("selectSoundVolume",new g(140,45).w(h),new g(30,25).w(h),new rb(j.sb,"soundVolume"),tb.ub(),new rb(null,"value"),new rb(null,"text"),this.e*h.t),new z("labelDisplaySize",new g(30,80).w(h),new g(75,25).w(h),false,"Display:",this.e*h.t),new qb("selectDisplaySize",new g(70,75).w(h),new g(60,25).w(h),j.o.vb,j.o.wb,new rb(),new rb(null,"toStringXY()"),this.e*h.t),new J("buttonDisplaySizeChange",new g(140,75).w(h),new g(30,25).w(h),"Change",this.e*h.t,true,true,function gb(j){var xb=j.ob.xb;var yb=xb.zb["selectDisplaySize"];var Ab=yb.Bb().Cb;var o=j.o;o.vb=Ab;o.Db(j);var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonResume",new g(30,105).w(h),new g(65,25).w(h),"Resume",this.e*h.t,true,true,function gb(j){var Eb=j.Eb;var jb=new Fb(Eb);jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonQuit",new g(105,105).w(h),new g(65,25).w(h),"Quit",this.e*h.t,true,true,function gb(j){var Gb=j.lb.Hb(j,k,"Are you sure you want to quit?",function Hb(j){j.Ib();var jb=new kb(j.lb.Jb(j));jb=new nb(jb,j.ob);j.jb=jb;},function Kb(j){var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;});var jb=new kb(Gb);jb=new nb(jb,j.ob);j.jb=jb;},j),]);return R;};b.prototype.Hb=function (j,k,l,Hb,Kb){return this.i(j,k,l,["Confirm","Cancel"],[Hb,Kb]);};b.prototype.l=function (j,k,l,Lb){return this.i(j,k,l,["Acknowledge"],[Lb]);};b.prototype.Mb=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var R=new S("containerProfileDetail",new g(0,0).w(h),new g(200,150).w(h),[new z("labelProfileName",new g(100,25).w(h),new g(120,25).w(h),true,"Profile: "+j.Nb.name,this.e*h.t),new z("labelSelectAWorld",new g(100,40).w(h),new g(100,25).w(h),true,"Select a World:",this.e*h.t),new db("listWorlds",new g(25,50).w(h),new g(150,50).w(h),new rb(j.Nb.Ob,null),new rb(null,"name"),this.e*h.t),new J("buttonNew",new g(50,110).w(h),new g(45,25).w(h),"New",this.e*h.t,true,true,function gb(j){var Eb=Pb.new (j);var Nb=j.Nb;Nb.Ob.push(Eb);j.Qb.Rb(Nb);j.Eb=Eb;var jb=new kb(j.lb.Sb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonSelect",new g(105,110).w(h),new g(45,25).w(h),"Select",this.e*h.t,true,new rb(function (){var xb=j.ob.xb;if(xb==null){return false;}else {return xb.zb["listWorlds"].hb()!=null;}},"call()"),function gb(j){var Tb=this.Ub.zb["listWorlds"];var Vb=Tb.hb();if(Vb!=null){j.Eb=Vb;var jb=new kb(j.lb.Sb(j));jb=new nb(jb,j.ob);j.jb=jb;}},j),new J("buttonBack",new g(10,10).w(h),new g(15,15).w(h),"<",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.Wb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonDelete",new g(180,10).w(h),new g(15,15).w(h),"x",this.e*h.t,true,true,function gb(j){var Nb=j.Nb;var Gb=j.lb.Hb(j,k,"Delete profile \""+Nb.name+"\"?",function Hb(j){var Nb=j.Nb;j.Qb.Xb(Nb);var jb=new kb(j.lb.Wb(j));jb=new nb(jb,j.ob);j.jb=jb;},function Kb(j){var jb=new kb(j.lb.Mb(j));jb=new nb(jb,j.ob);j.jb=jb;});var jb=new kb(Gb);jb=new nb(jb,j.ob);j.jb=jb;},j),]);return R;};b.prototype.Yb=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);return new S("containerProfileNew",new g(0,0).w(h),new g(200,150).w(h),[new z("labelName",new g(100,40).w(h),new g(100,25).w(h),true,"Profile Name:",this.e*h.t),new Zb("textBoxName",new g(50,50).w(h),new g(100,25).w(h),"",this.e*h.t),new J("buttonCreate",new g(50,80).w(h),new g(45,25).w(h),"Create",this.e*h.t,true,new rb(function (){var xb=j.ob.xb;if(xb==null){return false;}else {return xb.zb["textBoxName"].text().length>0;}},"call()"),function gb(j){var ac=this.Ub.zb["textBoxName"];var bc=ac.text();if(bc==""){return ;}var Nb=new cc(bc,[]);j.Qb.dc(Nb);j.Nb=Nb;var jb=new kb(j.lb.Mb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonCancel",new g(105,80).w(h),new g(45,25).w(h),"Cancel",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.Wb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),]);};b.prototype.Wb=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var ec=j.Qb.ec();var R=new S("containerProfileSelect",new g(0,0).w(h),new g(200,150).w(h),[new z("labelSelectAProfile",new g(100,40).w(h),new g(100,25).w(h),true,"Select a Profile:",this.e*h.t),new db("listProfiles",new g(50,50).w(h),new g(100,40).w(h),new rb(ec,null),"name",this.e*h.t),new J("buttonNew",new g(50,95).w(h),new g(30,25).w(h),"New",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.Yb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonSelect",new g(85,95).w(h),new g(30,25).w(h),"Select",this.e*h.t,true,new rb(function (){var xb=j.ob.xb;if(xb==null){return false;}else {return xb.zb["listProfiles"].hb()!=null;}},"call()"),function gb(j){var fc=this.Ub.zb["listProfiles"];var gc=fc.hb();j.Nb=gc;var jb=new kb(j.lb.Mb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonSkip",new g(120,95).w(h),new g(30,25).w(h),"Skip",this.e*h.t,true,true,function gb(j){var Eb=Pb.new (j);var hc=ic.hc();var jc=hc.kc_lc_mc();var bc="Anon-"+jc;var Nb=new cc(bc,[Eb]);j.Nb=Nb;j.Eb=Eb;var jb=new Fb(j.Eb);jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonBack",new g(10,10).w(h),new g(15,15).w(h),"<",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.Jb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonDelete",new g(180,10).w(h),new g(15,15).w(h),"x",this.e*h.t,true,true,function gb(j){var Nb=j.Nb;var Gb=j.lb.Hb(j,k,"Delete all profiles?",function Hb(j){j.Qb.nc();var jb=new kb(j.lb.Wb(j));jb=new nb(jb,j.ob);j.jb=jb;},function Kb(j){var jb=new kb(j.lb.Wb(j));jb=new nb(jb,j.ob);j.jb=jb;});var jb=new kb(Gb);jb=new nb(jb,j.ob);j.jb=jb;},j),]);return R;};b.prototype.oc=function (j,k,pc,qc){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var rc=[];for(var H=0;H<pc.length;H++){var sc=pc[H];var tc=sc[0];var l=sc[1];var uc=new S("containerSlide_"+H,new g(0,0).w(h),new g(200,150).w(h),[new vc("imageSlide",new g(0,0).w(h),new g(200,150).w(h),new wc(tc,k),),new z("labelSlideText",new g(100,this.e*2).w(h),new g(200,150).w(h),true,l,this.e*2
),new J("buttonNext",new g(75,120).w(h),new g(50,40).w(h),"Next",this.e,false,true,function gb(xc,j){var jb;if(xc<rc.length){var yc=rc[xc];jb=new kb(yc);}else {jb=qc;}jb=new nb(jb,j.ob);j.jb=jb;}.bind(this,H+1),j)]);rc.push(uc);}return rc[0];};b.prototype.Jb=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var R=new S("containerTitle",new g(0,0).w(h),new g(200,150).w(h),[new vc("imageTitle",new g(0,0).w(h),new g(200,150).w(h),new wc("Title",k),),new J("buttonStart",new g(75,100).w(h),new g(50,40).w(h),"Start",this.e*h.t*2,false,true,function gb(j){var jb=new kb(j.lb.Wb(j));jb=new nb(jb,j.ob);j.jb=jb;},j)]);return R;};b.prototype.Sb=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var Eb=j.Eb;var zc=Eb.zc;var Ac=Eb.Ac;var R=new S("containerWorldDetail",new g(0,0).w(h),new g(200,150).w(h),[new z("labelProfileName",new g(100,40).w(h),new g(100,25).w(h),true,"Profile: "+j.Nb.name,this.e*h.t),new z("labelWorldName",new g(100,55).w(h),new g(150,25).w(h),true,"World: "+Eb.name,this.e*h.t),new z("labelStartDate",new g(100,70).w(h),new g(150,25).w(h),true,"Started:"+zc.Bc(),this.e*h.t),new z("labelSavedDate",new g(100,85).w(h),new g(150,25).w(h),true,"Saved:"+(Ac==null?"[never]":Ac.Bc()),this.e*h.t),new J("buttonStart",new g(50,100).w(h),new g(100,25).w(h),"Start",this.e*h.t,true,true,function gb(j){var Eb=j.Eb;var Cc=new Fb(Eb);var jb;if(Eb.Ac!=null){jb=Cc;}else {var Dc=j.Ec.Fc("Instructions");var Gc=Dc.Cb;var Hc=j.lb.l(j,k,Gc,function Lb(j){j.jb=new nb(Cc,j.ob);});var Ic=new kb(Hc);var Jc=new Kc("Movie",Ic);jb=Jc;}jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonBack",new g(10,10).w(h),new g(15,15).w(h),"<",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.Mb(j));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonDelete",new g(180,10).w(h),new g(15,15).w(h),"x",this.e*h.t,true,true,function gb(j){var Nb=j.Nb;var Eb=j.Eb;var Gb=j.lb.Hb(j,k,"Delete world \""+Eb.name+"\"?",function Hb(j){var Nb=j.Nb;var Eb=j.Eb;var Ob=Nb.Ob;Ob.Lc(Eb);j.Eb=null;j.Qb.Rb(Nb);var jb=new kb(j.lb.Mb(j));jb=new nb(jb,j.ob);j.jb=jb;},function Kb(j){var jb=new kb(j.lb.Sb(j));jb=new nb(jb,j.ob);j.jb=jb;});var jb=new kb(Gb);jb=new nb(jb,j.ob);j.jb=jb;},j),]);return R;};b.prototype.pb=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var R=new S("containerWorldLoad",new g(0,0).w(h),new g(200,150).w(h),[new J("buttonLoadFromServer",new g(30,15).w(h),new g(140,25).w(h),"Reload from Local Storage",this.e*h.t,true,true,function gb(j){var Gb=j.lb.Hb(j,k,"Abandon the current game?",function Hb(j){var Mc=j.Nb;var Nc=j.Qb.ec();for(var H=0;H<Nc.length;H++){var Oc=Nc[H];if(Oc.name==Mc.name){j.Nb=Oc;break;}}var Pc=j.Eb;var Qc=j.Nb.Ob;var Rc=null;for(var H=0;H<Qc.length;H++){var Sc=Qc[H];if(Sc.name==Pc.name){Rc=Sc;break;}}var jb=new kb(j.lb.pb(j));jb=new nb(jb,j.ob);j.jb=jb;if(Rc==null){jb=new kb(j.lb.l(j,k,"No save exists to reload!",function Lb(j){var jb=new kb(j.lb.pb(j));jb=new nb(jb,j.ob);j.jb=jb;}));jb=new nb(jb,j.ob);j.jb=jb;}else {j.Eb=Sc;}},function Kb(j){var jb=new kb(j.lb.pb(j));jb=new nb(jb,j.ob);j.jb=jb;});var jb=new kb(Gb);jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonLoadFromFile",new g(30,50).w(h),new g(140,25).w(h),"Load from File",this.e*h.t,true,true,function gb(j){var Nb=j.Nb;var Eb=j.Eb;var Tc=new Uc(null);var Vc=new kb(j.lb.l(j,k,"Ready to load from file...",function Lb(j){function Wc(Xc){var Yc=Xc;var Zc=j.ad.bd(Yc);j.Eb=Zc;var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;}var cd=Tc.dd.ed("input")[0];var fd=cd.gd[0];new hd().jd(fd,Wc,null);}));var kd=new kb(j.lb.l(j,k,"No file specified.",function Lb(j){var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;}));Tc.ld=Vc;Tc.md=kd;j.jb=Tc;},j),new J("buttonReturn",new g(30,105).w(h),new g(140,25).w(h),"Return",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;},j),]);return R;};b.prototype.mb=function (j,k){if(k==null){k=j.o.p;}var h=this.h.q(k).r(this.f);var R=new S("containerSave",new g(0,0).w(h),new g(200,150).w(h),[new J("buttonSaveToLocalStorage",new g(30,15).w(h),new g(140,25).w(h),"Save to Local Storage",this.e*h.t,true,true,function gb(j){var Nb=j.Nb;var Eb=j.Eb;Eb.Ac=ic.hc();j.Qb.Rb(Nb);var jb=new kb(j.lb.l(j,k,"Profile saved to local storage.",function Lb(j){var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;}));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonSaveToFile",new g(30,50).w(h),new g(140,25).w(h),"Save to File",this.e*h.t,true,true,function gb(j){var Nb=j.Nb;var Eb=j.Eb;Eb.Ac=ic.hc();var nd=j.ad.od(Eb);new hd().pd(nd,Eb.name+".json");var jb=new kb(j.lb.l(j,k,"Save must be completed manually.",function Lb(j){var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;}));jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonReturn",new g(30,105).w(h),new g(140,25).w(h),"Return",this.e*h.t,true,true,function gb(j){var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;},j),]);return R;};}function J(name,qd,k,text,rd,sd,td,gb,ud,vd){this.name=name;this.qd=qd;this.k=k;this.text=text;this.rd=rd;this.sd=sd;this._td=td;this.gb=gb;this.ud=ud;this.vd=(vd==null?false:vd);this.wd=false;this._xd=new yd(new g());this._zd=this.k.L().Q();}{J.prototype.Ad=function (Bd){if(Bd=="ControlConfirm"){this.gb(this.ud);}return (this.vd==false);};J.prototype.td=function (){return (this._td.Cd==null?this._td:this._td.Cd());};J.prototype.Dd=function (){this.wd=true;};J.prototype.Ed=function (){this.wd=false;};J.prototype.Fd=function (Gd){if(this.td()==true){this.gb(this.ud);}return (this.vd==false);};J.prototype.Hd=function (){this.wd=true;};J.prototype.Id=function (){this.wd=false;};J.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};J.prototype.Kd=function (j,o,xd){var Ld=this._xd.q(xd).qd;Ld.Md(this.qd);var td=this.td();var wd=this.wd&&td;var style=this.style(j);var Nd=style.Nd;var Od=style.Od;if(this.sd==true){o.Pd(Ld,this.k,Nd,Od,wd);}Ld.Md(this._zd);var Qd=(td==true?Od:style.Rd);o.Sd(this.text,this.rd,Ld,Qd,Nd,wd,true,this.k.G);};}function S(name,qd,k,zb){this.name=name;this.qd=qd;this.k=k;this.zb=zb;this.zb.d("name");for(var H=0;H<this.zb.length;H++){var Td=this.zb[H];Td.Ub=this;}this.Ud=null;this.Vd=[];this.Wd=[];this._Xd=new g();this._Ld=new g();this._xd=new yd(this._Ld);this._Yd=new g();this._Zd=new g();this._ae=new g();}{S.prototype.td=function (){return true;};S.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};S.prototype.Ad=function (Bd){var be=false;var ce=this.ce();if(Bd=="ControlPrev"||Bd=="ControlNext"){be=true;var de=(Bd=="ControlPrev"?-1 :1);if(ce==null){ce=this.ee(de);if(ce!=null){ce.Dd();}}else if(ce.ce!=null){ce.Ad(Bd);if(ce.ce()==null){ce=this.ee(de);if(ce!=null){ce.Dd();}}}else {ce.Ed();ce=this.ee(de);if(ce!=null){ce.Dd();}}}else if(ce!=null){if(ce.Ad!=null){be=ce.Ad(Bd);}}return be;};S.prototype.ce=function (){return (this.Ud==null?null:this.zb[this.Ud]);};S.prototype.ee=function (de){if(this.Ud==null){var fe=(de==1 ?0 :this.zb.length-1);var ge=(de==1 ?this.zb.length:-1);for(var H=fe;H!=ge;H+=de){var Td=this.zb[H];if(Td.Dd!=null&&(Td.td==null||Td.td())){this.Ud=H;break;}}}else {var he=this.Ud;while(true){this.Ud+=de;var ie=this.Ud.je(0,this.zb.length-1
);if(ie==false){this.Ud=null;break;}else {var Td=this.zb[this.Ud];if(Td.Dd!=null&&(Td.td==null||Td.td())){break;}}}}var R=this.ce();return R;};S.prototype.ke=function (ae,le,me){ae=this._ae.q(ae).M();for(var H=this.zb.length-1;H>=0;H--){var Td=this.zb[H];var ne=ae.je(Td.qd,this._Xd.q(Td.qd).Md(Td.k));if(ne==true){le.push(Td);if(me==true){break;}}}return le;};S.prototype.Dd=function (){this.Ud=null;var ce=this.ee(1);if(ce!=null){ce.Dd();}};S.prototype.Ed=function (){var ce=this.ce();if(ce!=null){ce.Ed();this.Ud=null;}};S.prototype.Fd=function (Yd){Yd=this._Yd.q(Yd).P(this.qd);var Vd=this.ke(Yd,this.Vd.clear(),true);var oe=false;if(Vd.length>0){var Td=Vd[0];if(Td.Fd!=null){var pe=Td.Fd(Yd);if(pe==true){oe=true;}}}return oe;};S.prototype.qe=function (Zd){var re=this.Wd;this.Wd=this.Vd;this.Vd=re;Zd=this._Zd.q(Zd).P(this.qd);var Vd=this.ke(Zd,this.Vd.clear(),true);for(var H=0;H<Vd.length;H++){var Td=Vd[H];if(Td.qe!=null){Td.qe(Zd);}if(this.Wd.indexOf (Td)==-1){if(Td.Hd!=null){Td.Hd();}}}for(var H=0;H<this.Wd.length;H++){var Td=this.Wd[H];if(Vd.indexOf (Td)==-1){if(Td.Id!=null){Td.Id();}}}};S.prototype.Kd=function (j,o,xd){xd=this._xd.q(xd);var Ld=this._Ld.q(xd.qd).Md(this.qd);var style=this.style(j);o.Pd(Ld,this.k,style.se,style.Od);var zb=this.zb;for(var H=0;H<zb.length;H++){var Td=zb[H];Td.Kd(j,o,xd);}};}function te(ue){this.ue=ue;}{te.prototype.ce=function (){return this.ue.ce();};te.prototype.ee=function (de){return this.ue.ee(de);};te.prototype.ke=function (ae,le,me){return this.ue.ke(ae,le,me);};te.prototype.Ad=function (Bd){return this.ue.Ad(Bd);};te.prototype.Fd=function (Yd){var Vd=this.ue.ke(Yd,this.ue.Vd.clear(),true);var oe=false;if(Vd.length>0){var Td=Vd[0];if(Td.Fd!=null){var pe=Td.Fd(Yd);if(pe==true){oe=true;}}}return oe;};te.prototype.qe=function (Zd){this.ue.qe(Zd);};te.prototype.Kd=function (j,o,xd){xd=this.ue._xd.q(xd);var Ld=this.ue._Ld.q(xd.qd).Md(this.ue.qd);o.Pd(Ld,this.ue.k,null,o.ve);var zb=this.ue.zb;for(var H=0;H<zb.length;H++){var Td=zb[H];Td.Kd(j,o,xd);}};}function we(name,qd,k,xe){this.name=name;this.qd=qd;this.k=k;this.xe=xe;this.ye=null;this.Td=null;this.Ld=new g();this.xd=new yd(this.Ld);this.Yd=new g();this.Zd=new g();}{we.prototype.Ad=function (Bd){var be=false;if(this.Td!=null){be=this.Td.Ad(Bd);}return be;};we.prototype.ce=function (){return (this.Td==null?null:this.Td.ce());};we.prototype.Dd=function (){if(this.Td!=null&&this.Td.Dd!=null){this.Td.Dd();}};we.prototype.Ed=function (){if(this.Td!=null&&this.Td.Ed!=null){this.Td.Ed();}};we.prototype.td=function (){return true;};we.prototype.Fd=function (Yd){var ze=false;if(this.Td!=null&&this.Td.Fd!=null){Yd=this.Yd.q(Yd).P(this.qd);ze=this.Td.Fd(Yd);}return ze;};we.prototype.Hd=function (){if(this.Td!=null&&this.Td.Hd!=null){return this.Td.Hd();}};we.prototype.Id=function (){if(this.Td!=null&&this.Td.Id!=null){return this.Td.Id();}};we.prototype.qe=function (Zd){if(this.Td!=null&&this.Td.qe!=null){Zd=this.Zd.q(Zd).P(this.qd);return this.Td.qe(Zd);}};we.prototype.Kd=function (j,o,xd){var Ae=this.xe.Cd();if(Ae!=this.ye){this.ye=Ae;if(Ae==null){this.Td=null;}else if(Ae.Be!=null){this.Td=Ae.Be(j,this.k);}}if(this.Td!=null){var xd=this.xd.q(xd);xd.qd.Md(this.qd);this.Td.Kd(j,o,xd);}};}function z(name,qd,k,Ce,text,rd){this.name=name;this.qd=qd;this.k=k;this.Ce=Ce;this._text=text;this.rd=rd;this._Ld=new g();}{z.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};z.prototype.text=function (){return (this._text.Cd==null?this._text:this._text.Cd());};z.prototype.Kd=function (j,o,xd){var Ld=this._Ld.q(xd.qd).Md(this.qd);var style=this.style(j);var text=this.text();if(text!=null){var De=(""+text).split("\n");for(var H=0;H<De.length;H++){var Ee=De[H];o.Sd(Ee,this.rd,Ld,style.Od,style.Nd,null,this.Ce,this.k.G);Ld.t+=this.rd;}}};}function db(name,qd,k,Fe,Ge,rd,He,Ie,Je){this.name=name;this.qd=qd;this.k=k;this._Fe=Fe;this.Ge=Ge;this.rd=rd;this.He=He;this.Ie=Ie;this.Je=Je;this.Ke=1.2 *this.rd;this.wd=false;var Le=this.Ke;this.Me=new Ne(new g(this.k.G-Le,0),new g(Le,this.k.t),this.rd,this.Ke,this._Fe,0 );this._Ld=new g();this._xd=new yd(this._Ld);this._Yd=new g();}{db.prototype.Ad=function (Bd){var be=false;if(Bd=="ControlIncrement"){this.Oe(1);be=true;}else if(Bd=="ControlDecrement"){this.Oe(-1);be=true;}return be;};db.prototype.Dd=function (){this.wd=true;};db.prototype.Ed=function (){this.wd=false;};db.prototype.Pe=function (){return this.Me.Qe();};db.prototype.Re=function (Se){var R=Se;var Fe=this.Fe();if(Se==null){R=Fe.indexOf (this.hb());if(R==-1){R=null;}}else {var Te=Fe[Se];this.hb(Te);}return R;};db.prototype.Ue=function (){return this.Pe()+Math.floor(this.Me.Ve)-1;};db.prototype.td=function (){return (this.Je==null?true:this.Je.Cd());};db.prototype.hb=function (We){var R=We;if(We==null){if(this._He==null){R=this._hb;}else {R=(this.He.Cd==null?this._hb:this.He.Cd());}}else {this._hb=We;if(this.He!=null){var Se=this.Ie.Xe(this._hb).Cd();this.He.Ye(Se);}}return R;};db.prototype.Oe=function (de){var Fe=this.Fe();var Ze=Fe.length;var hb=this.hb();var Re=this.Re();if(Re==null){if(Ze>0){if(de==1){Re=0;}else {Re=Ze-1;}}}else {Re=(Re+de).af(0,Ze-1);}var Te=(Re==null?null:Fe[Re]);this.hb(Te);var Pe=this.Pe();var Ue=this.Ue();var Re=this.Re();if(Re<Pe){this.Me.bf();}else if(Re>Ue){this.Me.cf();}var R=this.hb();return R;};db.prototype.Fe=function (){return (this._Fe.Cd==null?this._Fe:this._Fe.Cd());};db.prototype.Fd=function (Gd){Gd=this._Yd.q(Gd);if(Gd.G-this.qd.G>this.k.G-this.Me.df.G){if(Gd.t-this.qd.t<=this.Me.df.t){this.Me.bf();}else if(Gd.t-this.qd.t>=this.Me.k.t-this.Me.df.t){this.Me.cf();}else {var ef=Gd.P(this.Me.qd).P(new g(0,this.Me.df.t));}}else {var ff=Gd.t-this.qd.t;var gf=this.Pe()+Math.floor(ff/this.Ke);var Fe=this.Fe();if(gf<Fe.length){this.Re(gf);}}return true;};db.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};db.prototype.Kd=function (j,o,xd){xd=this._xd.q(xd);var Ld=this._Ld.q(xd.qd).Md(this.qd);var style=this.style(j);var ve=(this.wd==true?style.Nd:style.Od);var hf=(this.wd==true?style.Od:style.Nd);o.Pd(Ld,this.k,hf,style.Od,false);var jf=this.Ke;var kf=2;var lf=Ld.t;var Fe=this.Fe();if(Fe==null){return ;}var mf=Math.floor(this.k.t/jf);var nf=this.Pe();var of=nf+mf-1;if(of>=Fe.length){of=Fe.length-1;}var hb=this.hb();for(var H=nf;H<=of;H++){var pf=Fe[H];if(pf==hb){o.Pd(new g(Ld.G,lf),new g(this.k.G,jf),ve);}var text=this.Ge.Xe(pf).Cd();var qf=new g(Ld.G+kf,lf);o.Sd(text,this.rd,qf,ve,hf,(H==this.Re()),false,this.k.G);lf+=jf;}this.Me.Kd(j,o,xd);};}function Ne(qd,k,rd,rf,Fe,Qe){this.qd=qd;this.k=k;this.rd=rd;this.rf=rf;this._Fe=Fe;this._Qe=Qe;this.Ve=Math.floor(this.k.t/rf);this.df=new g(this.k.G,this.k.G);this.sf=new J(null,new g(0,0),this.df,"-",this.rd,true,true,this.bf);this.tf=new J(null,new g(0,this.k.t-this.df.t),this.df,"+",this.rd,true,true,this.cf);this._Ld=new g();}{Ne.prototype.Ad=function (Bd){return true;};Ne.prototype.Fe=function (){return (this._Fe.Cd==null?this._Fe:this._Fe.Cd());};Ne.prototype.Fd=function (j,Gd){};Ne.prototype.cf=function (){var Qe=(this.Qe()+1
).af(0,this.uf());this._Qe=Qe;};Ne.prototype.bf=function (){var Qe=(this.Qe()-1
).af(0,this.uf());this._Qe=Qe;};Ne.prototype.vf=function (){var vf=new g(this.df.G,this.k.t-2 *this.df.t);return vf;};Ne.prototype.Qe=function (){return this._Qe;};Ne.prototype.uf=function (){return this.Fe().length-Math.floor(this.Ve);};Ne.prototype.wf=function (){var wf=new g(this.k.G-this.df.G,this.df.t+this.Qe()*this.vf().t/this.Fe().length);return wf;};Ne.prototype.xf=function (){var xf=this.vf().w(new g(1,this.Ve/this.Fe().length));return xf;};Ne.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};Ne.prototype.Kd=function (j,o,xd){var Ze=this.Fe().length;if(this.Ve<Ze){var style=this.style(j);var ve=(this.wd==true?style.Nd:style.Od);var hf=(this.wd==true?style.Od:style.Nd);var Ld=this._Ld.q(xd.qd).Md(this.qd);o.Pd(Ld,this.k,ve,null);xd.qd.Md(this.qd);this.tf.Kd(j,o,xd);this.sf.Kd(j,o,xd);var wf=this.wf().Md(Ld);var xf=this.xf();o.Pd(wf,xf,hf,ve);}};}function qb(name,qd,k,yf,U,zf,V,rd){this.name=name;this.qd=qd;this.k=k;this._yf=yf;this._U=U;this.zf=zf;this.V=V;this.rd=rd;this.Af=null;var yf=this.yf();var U=this.U();for(var H=0;H<U.length;H++){var Bf=U[H];var Cf=this.zf.Xe(Bf).Cd();if(Cf==yf){this.Af=H;break;}}this.wd=false;this.Ld=new g();this.xd=new yd(this.Ld);this.zd=this.k.L().Q();}{qb.prototype.Ad=function (Bd){if(Bd=="ControlDecrement"){this.Df(1);}else if(Bd=="ControlIncrement"||Bd=="ControlConfirm"){this.Df(-1);}};qb.prototype.Dd=function (){this.wd=true;};qb.prototype.Ed=function (){this.wd=false;};qb.prototype.td=function (){return true;};qb.prototype.Bb=function (){var R=null;if(this.Af!=null){var Ef=this.U()[this.Af];var Cf=this.zf.Xe(Ef).Cd();var Ff=this.V.Xe(Ef).Cd();R=new Gf(Cf,Ff);};return R;};qb.prototype.Df=function (de){var U=this.U();this.Af=(this.Af+de).Hf(0,U.length);var Bb=this.Bb();if(this._yf!=null&&this._yf.constructor.name=="DataBinding"){this._yf.Ye(Bb.Cb);}else {this._yf=Bb.Cb;}};qb.prototype.U=function (){return (this._U.Cd==null?this._U:this._U.Cd());};qb.prototype.Fd=function (Gd){this.Df(1);return true;};qb.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};qb.prototype.yf=function (){return (this._yf==null?null:(this._yf.Cd==null?this._yf:this._yf.Cd()));};qb.prototype.Kd=function (j,o,xd){var Ld=this.Ld.q(xd.qd).Md(this.qd);var style=this.style(j);o.Pd(Ld,this.k,style.Nd,style.Od,this.wd);Ld.Md(this.zd);var Bb=this.Bb();var text=(Bb==null?"-":Bb.text);o.Sd(text,this.rd,Ld,style.Od,style.Nd,this.wd,true,this.k.G);};}function Gf(Cb,text){this.Cb=Cb;this.text=text;}function If(name,se,Nd,Od,Rd){this.name=name;this.se=se;this.Nd=Nd;this.Od=Od;this.Rd=Rd;}{If.eb=function (){if(If._eb==null){If._eb=new If_eb();}return If._eb;};function If_eb(){this.Jf=new If("Default","rgb(240, 240, 240)","White","Gray","LightGray");}}function Zb(name,qd,k,text,rd,Kf){this.name=name;this.qd=qd;this.k=k;this._text=text;this.rd=rd;this.Kf=Kf;this.wd=false;this.Lf=this.text().length;this._Ld=new g();this._Mf=new g();this._xd=new yd(this._Ld);this._Nf=new g();this._Of=new g();}{Zb.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};Zb.prototype.text=function (Cb,j){if(Cb!=null){if(this._text.Ye==null){this._text=Cb;}else {this._text.Ye(Cb);}}return (this._text.Cd==null?this._text:this._text.Cd(j));};Zb.prototype.Ad=function (Bd){var text=this.text();if(Bd=="ControlCancel"){this.text(text.substr(0,text.length-1));this.Lf=(this.Lf-1
).Hf(0,text.length+1
);}else if(Bd=="ControlConfirm"){this.Lf=(this.Lf+1
).Hf(0,text.length+1);}else if(Bd=="ControlIncrement"||Bd=="ControlDecrement"){var de=(Bd=="ControlIncrement"?-1 :1);var Pf=(this.Lf<text.length?text.charCodeAt(this.Lf):"A".charCodeAt(0)-1
);Pf=(Pf+de).Hf("A".charCodeAt(0),"Z".charCodeAt(0)+1
);var Qf=String.fromCharCode(Pf);this.text(text.substr(0,this.Lf)+Qf+text.substr(this.Lf+1));}else if(Bd.length==1 ||Bd.startsWith("_")){if(Bd.startsWith("_")){if(Bd=="_"){Bd=" ";}else {Bd=Bd.substr(1);}}if(this.Kf==null||text.length<this.Kf){text=this.text(text.substr(0,this.Lf)+Bd+text.substr(this.Lf));this.Lf=(this.Lf+1
).Hf(0,text.length+1
);}}return true;};Zb.prototype.Dd=function (){this.wd=true;};Zb.prototype.Ed=function (){this.wd=false;};Zb.prototype.Fd=function (Yd){var Ub=this.Ub;Ub.Ud=Ub.zb.indexOf (this);this.wd=true;};Zb.prototype.Kd=function (j,o,xd){var Ld=this._Ld.q(xd.qd).Md(this.qd);var style=this.style(j);var text=this.text();o.Pd(Ld,this.k,style.Nd,style.Od,this.wd);var Rf=o.Sf(text,this.rd);var Of=this._Of.Tf(Rf,this.rd,0);var Nf=this._Nf.q(this.k).P(Of).Q();var Mf=this._Mf.q(Ld).Md(Nf);o.Sd(text,this.rd,Mf,style.Od,style.Nd,this.wd,false,this.k.G);if(this.wd==true){var Uf=text.substr(0,this.Lf);var Vf=text.substr(this.Lf,1);var Wf=o.Sf(Uf,this.rd);var Xf=o.Sf(Vf,this.rd);Mf.G+=Wf;o.Pd(Mf,new g(Xf,this.rd),style.Nd,style.Nd);o.Sd(Vf,this.rd,Mf,style.Od,null,null,this.k.G);}};}function vc(name,qd,k,Yf){this.name=name;this.qd=qd;this.k=k;this.Yf=Yf;this._Ld=new g();this._Zf=new ag(new yd(this._Ld));this._zd=this.k.L().Q();}{vc.prototype.style=function (j){return j.lb.c[this.Jd==null?"Default":this.Jd];};vc.prototype.Kd=function (j,o,xd){var Ld=this._Ld.q(xd.qd).Md(this.qd);var style=this.style(j);o.Pd(Ld,this.k,style.Nd,style.Od);var Zf=this._Zf;Zf.bg.qd.q(Ld);Ld.Md(this._zd);this.Yf.Kd(j,j.Eb,o,Zf);};}function rb(ud,cg,dg){this.ud=ud;this.cg=cg;this.dg=dg;}{rb.prototype.Xe=function (Cb){this.ud=Cb;return this;};rb.prototype.Cd=function (){var R=this.ud;if(this.cg!=null){var eg=this.cg.split(".");for(var H=0;H<eg.length;H++){if(R==null){break;}var fg=eg[H];var gg=fg.indexOf ("(");if(gg!=-1){var hg=fg.substr(0,gg);if(R[hg]==null){R=null;}else {var ig=fg.indexOf (")");var jg=fg.substring(gg+1,ig);var kg=jg.split(" ").join("").split(",");var lg=[];for(var mg=0;mg<kg.length;mg++){var ng=kg[mg];if(ng.length>0){var og=this.dg[ng];lg.push(og);}}R=R[hg].apply(R,lg);}}else {R=R[fg];}}}return R;};rb.prototype.Ye=function (Se){var R=this.ud;if(this.cg!=null){var eg=this.cg.split(".");for(var H=0;H<eg.length-1;H++){if(R==null){break;}var fg=eg[H];var gg=fg.indexOf ("(");if(gg!=-1){var hg=fg.substr(0,gg);if(R[hg]==null){R=null;}else {var ig=fg.indexOf (")");var jg=fg.substring(gg+1,ig);var kg=jg.split(" ").join("").split(",");var lg=[];for(var mg=0;mg<kg.length;mg++){var ng=kg[mg];if(ng.length>0){var og=this.dg[ng];lg.push(og);}}R=R[hg].apply(R,lg);}}else {R=R[fg];}}var pg=eg[eg.length-1];R[pg]=Se;}return Se;};}function kb(xb){this.xb=xb;this.qg=[new rg("ArrowDown","ControlIncrement",true),new rg("ArrowLeft","ControlPrev",true),new rg("ArrowRight","ControlNext",true),new rg("ArrowUp","ControlDecrement",true),new rg("Backspace","ControlCancel",true),new rg("Enter","ControlConfirm",true),new rg("Escape","ControlCancel",true),new rg("Tab","ControlNext",true),];var sg=4;for(var H=0;H<sg;H++){var tg="Gamepad"+H;this.qg.ug([new rg(tg+"MoveDown","ControlIncrement",true),new rg(tg+"MoveLeft","ControlPrev",true),new rg(tg+"MoveRight","ControlNext",true),new rg(tg+"ArrowUp","ControlDecrement",true),new rg(tg+"Button0","ControlCancel",true),new rg(tg+"Button1","ControlConfirm",true),]);}this.qg.d("inputName");this._xd=new yd(new g());this._Yd=new g();this._Zd=new g();this._vg=new g();}{kb.prototype.Kd=function (j){var o=j.o;var xd=this._xd;xd.qd.clear();this.xb.Kd(j,o,xd);};kb.prototype.wg=function (j){this.Kd(j);var xg=j.xg;var yg=xg.yg;for(var H=0;H<yg.length;H++){var zg=yg[H];if(zg.Ag==true){var Bg=zg.name;var Cg=this.qg[Bg];if(Bg.startsWith("Mouse")==false){if(Cg==null){var be=this.xb.Ad(Bg);if(be==true){zg.Ag=false;}}else {var Dg=Cg.Dg;this.xb.Ad(Dg);if(Cg.Eg==true){zg.Ag=false;}}}else if(Bg=="MouseClick"){this._Yd.q(xg.Yd).r(j.o.Fg);var oe=this.xb.Fd(this._Yd);if(oe==true){xg.Gg(zg);}}else if(Bg=="MouseMove"){this._Zd.q(xg.Zd).r(j.o.Fg);this._vg.q(xg.vg).r(j.o.Fg);this.xb.qe(this._Zd,this._vg);}}}};}function Hg(Ig,jb,Jg,vb){this.Ig=Ig;this.jb=jb;this.Jg=Jg;this._vb=vb;}{Hg.prototype.Lb=function (j){j.jb=new nb(this.jb,this.Kg());};Hg.prototype.Kd=function (j){this.Kg(j).Kd(j);};Hg.prototype.vb=function (j){return (this._vb==null?j.o.vb:this._vb);};Hg.prototype.wg=function (j){this.Kg(j).wg(j);};Hg.prototype.Kg=function (j){if(this._Kg==null){this._Kg=new Lg([this.Jg,new kb(j.lb.l(j,this.vb(j),this.Ig,this.Lb.bind(this,j)))]);}return this._Kg;};}function Mg(name,tc,Ng,Og,Pg){this.name=name;this.tc=tc;this.Ng=Ng;this.Og=Og.d("name");this.Pg=Pg.d("name");}{Mg.prototype.Qg=function (Rg){return this.Pg[Rg];};Mg.prototype.Sg=function (Tg){var Ug=[];for(var H=0;H<Tg.length;H++){var Rg=Tg[H];var Vg=this.Qg(Rg);Ug.push(Vg);}return Ug;};Mg.prototype.Wg=function (Xg){var Yg=Xg.Cb;var Zg=Yg.split("\n");var ah={};var bh=null;var ch;for(var H=0;H<Zg.length;H++){var dh=Zg[H];if(dh.startsWith("#")){if(bh!=null){ah[bh]=ch;}bh=dh.split("\t")[0];ch=[];}else {if(dh.length>0){ch.push(dh);}}}ah[bh]=ch;var Og=eh.eb();var fh=[Og["Display"].name,Og["Option"].name,];var gh=[];for(var H=0;H<this.Pg.length;H++){var hh=this.Pg[H];var ih=hh.jh;var kh=fh.lh(ih);if(kh==false){gh.push(hh);}else {var mh=hh.text;var nh=ah[mh];for(var oh=0;oh<nh.length;oh++){var Ee=nh[oh];var ph=new qh(hh.name+"_"+oh,ih,Ee,hh.rh,hh.Ag);gh.push(ph);}}}this.Pg=gh.d("name");};Mg.bd=function (sh){var th=JSON.parse(sh);th.name=th["name"];th.tc=th["imageName"];th.Ng=th["contentTextStringName"];var Pg=th["talkNodes"];for(var H=0;H<Pg.length;H++){var Vg=Pg[H];Vg.name=Vg["name"];Vg.jh=Vg["defnName"];Vg.text=Vg["text"];Vg.rh=Vg["next"];Vg.Ag=Vg["isActive"];}th.__proto__=Mg.prototype;var Pg=th.Pg;for(var H=0;H<Pg.length;H++){var Vg=Pg[H];Vg.__proto__=qh.prototype;if(Vg.name==null){Vg.name=qh.uh();}if(Vg.Ag==null){Vg.Ag=true;}}Pg.d("name");th.Og=eh.eb()._vh;return th;};Mg.prototype.od=function (){var wh=this.Og;delete this.Og;var R=JSON.stringify(this,null,4);this.Og=wh;return R;};}function xh(yh,zh,j){this.yh=yh;this.zh=zh;this.j=j;var Ah=this.yh.Pg[0];this.Bh=new Ch(null,Ah,[]);this.Dh=[];this.Eh={};this.Fh=this.Eh;this.Gh=this.j;}{xh.prototype.rh=function (){var Hh=this.Bh.Ih;if(Hh!=null){var Jh=this.Bh.Kh;Jh.Lh(this,this.Bh);Hh.Lh(this,this.Bh);this.Bh.Ih=null;}this.Mh();};xh.prototype.Mh=function (){this.Bh.Mh(this);};xh.prototype.Nh=function (k,j){var Oh=this;var th=Oh.yh;var Ph=j.ob;var s=20;var Qh=s*.6;var Y=25;var Rh=s;var Sh=25;var Z=new g(1,1).ab(Y);var bb=new g(k.G/2,k.t-Rh-Sh-Z.t*6 );var D=new g(bb.G,Sh);var Th=new g(2,1).ab(Sh);var R=new S("containerConversation",new g(0,0),k,[new J("buttonBack",Z,new g(1,1).ab(Sh),"<",s,true,true,function gb(j){var jb=Ph;jb=new nb(jb,j.ob);j.jb=jb;},j),new J("buttonTranscript",new g(k.G-Z.G-Th.G,Z.t),Th,"Log",s,true,true,function gb(j){var ob=j.ob;var Uh=Oh.Vh(k,j,ob);var jb=new kb(Uh);jb=new nb(jb,j.ob);j.jb=jb;},j),new z("labelSpeaker",new g(k.G/2,k.t-Z.t*3 -D.t-bb.t-Rh),k,true,new rb(Oh,"scopeCurrent.displayTextCurrent"),s),new db("listResponses",new g((k.G-bb.G)/2,k.t-Z.t*2 -D.t-bb.t),bb,new rb(Oh,"scopeCurrent.talkNodesForOptionsActive()"),new rb(null,"text"),Qh,new rb(Oh,"scopeCurrent.talkNodeForOptionSelected"),new rb()),new J("buttonNext",new g((k.G-bb.G)/2,k.t-Z.t-D.t),D,"Next",s,true,true,function gb(j){Oh.rh();},j),]);return R;};xh.prototype.Vh=function (k,j,Ph){var Oh=this;var th=Oh.yh;var Ph=j.ob;var s=20;var Qh=s*.6;var Y=25;var Rh=s;var Sh=25;var Z=new g(1,1).ab(Y);var bb=new g(k.G*.75,k.t-Rh-Z.t*3
);var R=new S("containerConversation",new g(0,0),k,[new J("buttonBack",Z,new g(1,1).ab(Sh),"<",s,true,true,function gb(j){var jb=Ph;jb=new nb(jb,j.ob);j.jb=jb;},j),new z("labelTranscript",new g(k.G/2,Z.t),k,true,"Transcript",s),new db("listEntries",new g((k.G-bb.G)/2,Z.t*2 +Rh),bb,new rb(Oh,"talkNodesForTranscript"),new rb(null,"textForTranscript(conversationDefn)",{"conversationDefn":th}),Qh),]);return R;};}function Ch(Ub,Kh,Wh){this.Ub=Ub;this.Kh=Kh;this.Xh=false;this.Wh=Wh;this.Yh="[conversation begins]";this.Ih=null;this._Zh=[];this._ai=[];this.bi=true;}{Ch.prototype.ci=function (Oh){var th=Oh.yh;var di=th.Pg;var ei=di.indexOf (this.Kh);var fi=di[ei+1];this.Kh=fi;};Ch.prototype.Zh=function (){if(this.Xh==false){return this._ai;}else {if(this.bi==true){this.bi=false;this._Zh.length=0;for(var H=0;H<this.Wh.length;H++){var Vg=this.Wh[H];if(Vg.Ag==true){this._Zh.push(Vg);}}}gi=this._Zh;}return gi;};Ch.prototype.Mh=function (Oh){this.bi=true;this.Kh.hi(Oh,this);};}function qh(name,jh,text,rh,Ag){this.name=(name==null?qh.uh():name);this.jh=jh;this.text=text;this.rh=rh;this.Ag=(Ag==null?true:Ag);}{qh._uh=0;qh.uh=function (){var R="_"+qh._uh;qh._uh++;return R;};qh.prototype.Lh=function (Oh,ii){var yh=this.yh(Oh.yh);if(yh.Lh!=null){yh.Lh(Oh,ii,this);}};qh.prototype.yh=function (th){return th.Og[this.jh];};qh.prototype.hi=function (Oh,ii){var yh=this.yh(Oh.yh);yh.hi(Oh,ii,this);};qh.prototype.ji=function (th){var ki=(this.jh=="Option"?"YOU":"THEY");var R=ki+": "+this.text;return R;};}function eh(name,hi,Lh){this.name=name;this.hi=hi;this.Lh=Lh;}{eh.eb=function (){if(this._li==null){this._li=new eh_eb();}return this._li;};function eh_eb(){this.mi=new eh("Activate",function hi(Oh,ii,Vg){var ni=Vg.rh;var oi=Vg.text;var th=Oh.yh;var pi=th.Pg[ni];pi.Ag=oi;ii.ci(Oh);Oh.Mh();});this.qi=new eh("Display",function (Oh,ii,Vg){ii.Yh=Vg.text;ii.ci(Oh);Oh.Dh.push(Vg);});this.ri=new eh("Goto",function (Oh,ii,Vg){var si=Vg.rh;ii.Kh=Oh.yh.Qg(si);Oh.Mh();});this.ti=new eh("JumpIfFalse",function (Oh,ii,Vg){var ui=Vg.text;var vi=Vg.rh;var wi=Oh.Eh[ui];if(wi==true){ii.ci(Oh);}else {ii.Kh=Oh.yh.Qg(vi);}Oh.Mh();});this.xi=new eh("JumpIfTrue",function (Oh,ii,Vg){var ui=Vg.text;var vi=Vg.rh;var wi=Oh.Eh[ui];if(wi==true){ii.Kh=Oh.yh.Qg(vi);}else {ii.ci(Oh);}Oh.Mh();});this.yi=new eh("Option",function hi(Oh,ii,Vg){var Wh=ii.Wh;if(Wh.lh(Vg)==false){Wh.push(Vg);Wh[Vg.name]=Vg;}ii.ci(Oh);Oh.Mh();},function Lh(Oh,ii,Vg){ii.Xh=false;var zi=Vg.rh;var fi=Oh.yh.Qg(zi);ii.Kh=fi;Oh.Dh.push(Vg);});this.Ai=new eh("Pop",function hi(Oh,ii,Vg){var ii=ii.Ub;Oh.Bh=ii;ii.Kh=Oh.yh.Qg(Vg.text);Oh.Mh();});this.Bi=new eh("Prompt",function hi(Oh,ii,Vg){ii.Xh=true;},function Lh(Oh,ii,Vg){var Ci=Vg.text;if(Ci==true){ii.Wh.length=0;}});this.Di=new eh("Push",function hi(Oh,ii,Vg){var Ei=Oh.yh;var ei=Ei.Pg.indexOf (Vg);var fi=Ei.Pg[ei+1];Oh.Bh=new Ch(ii,fi,[]);Oh.Mh();});this.Fi=new eh("Quit",function hi(Oh,ii,Vg){Oh.zh();});this.Gi=new eh("Script",function hi(Oh,ii,Vg){var Hi="("+Vg.text+")";var Ii=Ji(Hi);Ii(Oh);ii.ci(Oh);Oh.Mh();});this.Ki=new eh("VariableLoad",function hi(Oh,ii,Vg){var ui=Vg.text;var Li=Vg.rh;var Hi="( function(cr) { return "+Li+"; } )";var Ii=Ji(Hi);var Mi=Ii(Oh);Oh.Eh[ui]=Mi;ii.ci(Oh);Oh.Mh();});this.Ni=new eh("VariableSet",function hi(Oh,ii,Vg){var ui=Vg.text;var wi=Vg.rh;Oh.Eh[ui]=wi;ii.ci(Oh);Oh.Mh();});this.Oi=new eh("VariableStore",function hi(Oh,ii,Vg){var ui=Vg.text;var wi=Oh.Eh[ui];var Li=Vg.rh;var Hi="( function(cr) { "+Li+" = "+wi+"; } )";var Ii=Ji(Hi);Ii(Oh);ii.ci(Oh);Oh.Mh();});this._vh=[this.mi,this.qi,this.ri,this.ti,this.xi,this.yi,this.Ai,this.Bi,this.Di,this.Fi,this.Gi,this.Ki,this.Ni,this.Oi,].d("name");}}function Pi(name,Qi,Ri){this.name=name;this.Qi=Qi;this.Ri=Ri;}{Pi.Si=4;Pi.eb=function (){if(Pi._eb==null){Pi._eb=this;this._Ti=new Pi("Transparent",".",[0,0,0,0]);this.Ui=new Pi("Black","k",[0,0,0,1]);this.Vi=new Pi("Blue","b",[0,0,1,1]);this.Wi=new Pi("BlueDark","B",[0,0,.5,1]);this.Xi=new Pi("Brown","O",[0.5,0.25,0,1]);this.Yi=new Pi("Cyan","c",[0,1,1,1]);this.Zi=new Pi("Gray","a",[0.5,0.5,0.5,1]);this.aj=new Pi("GrayDark","A",[0.25,0.25,0.25,1]);this.bj=new Pi("GrayLight","@",[0.75,0.75,0.75,1]);this.cj=new Pi("Green","g",[0,1,0,1]);this.dj=new Pi("GreenDark","G",[0,.5,0,1]);this.ej=new Pi("Orange","o",[1,0.5,0,1]);this.fj=new Pi("Red","r",[1,0,0,1]);this.gj=new Pi("RedDark","R",[.5,0,0,1]);this.hj=new Pi("Violet","v",[1,0,1,1]);this.ij=new Pi("White","w",[1,1,1,1]);this.jj=new Pi("Yellow","y",[1,1,0,1]);this.kj=new Pi("Yellow","Y",[.5,.5,0,1]);this._vh=[this._Ti,this.Ui,this.Vi,this.Wi,this.Xi,this.Yi,this.Zi,this.aj,this.bj,this.cj,this.dj,this.ej,this.fj,this.gj,this.hj,this.ij,this.jj,this.kj,];this._vh.d("code");}return Pi._eb;};Pi.prototype.lj=function (){return this.Ri[3];};Pi.prototype.mj=function (Se){if(Se!=null){this.Ri[3]=Se;this._nj=null;}return this;};Pi.prototype.L=function (){return new Pi(this.name,this.Qi,this.Ri.slice());};Pi.prototype.nj=function (){if(this._nj==null){this._nj="rgba("+Math.floor(255 *this.Ri[0])+", "+Math.floor(255 *this.Ri[1])+", "+Math.floor(255 *this.Ri[2])+", "+this.Ri[3]+")";}return this._nj;};}function qi(wb,oj,rd,ve,hf){this.wb=wb;this.p=this.wb[0];this.vb=this.p;this.oj=oj;this.rd=rd;this.ve=ve;this.hf=hf;this.pj="serif";this.qj="ABCDEFGHIJKMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz 1234567890";this.Ld=new g();this.xd=new yd(this.Ld);this.qf=new g();this.rj=new g();this.zd=new g();}{qi.sj=Math.PI*2.0;qi.prototype.clear=function (){this.tj.clearRect(0,0,this.vb.G,this.vb.t);};qi.prototype.uj=function (vj,wj,xj,yj,zj,Nd,Od){var Ld=this.Ld.q(vj);var Aj=yj*qi.sj;var Bj=zj*qi.sj;if(Nd!=null){this.tj.fillStyle=Nd;this.tj.beginPath();this.tj.arc(vj.G,vj.t,wj,Aj,Bj);Ld.q(vj).Md(new Cj(zj,xj).Dj(new g()));this.tj.lineTo(Ld.G,Ld.t);this.tj.arc(vj.G,vj.t,xj,Bj,Aj,true);this.tj.closePath();this.tj.fill();}if(Od!=null){this.tj.strokeStyle=Od;this.tj.beginPath();this.tj.arc(vj.G,vj.t,wj,Aj,Bj);Ld.q(vj).Md(new Cj(zj,xj).Dj(new g()));this.tj.lineTo(Ld.G,Ld.t);this.tj.arc(vj.G,vj.t,xj,Bj,Aj,true);this.tj.closePath();this.tj.stroke();}};qi.prototype.Ej=function (Od,hf){this.Pd(new g(0,0),this.p,(hf==null?this.hf:hf),(Od==null?this.ve:Od));};qi.prototype.Fj=function (vj,Gj,Nd,Od){var Ld=this.Ld.q(vj);this.tj.beginPath();this.tj.arc(Ld.G,Ld.t,Gj,0,qi.sj);if(Nd!=null){this.tj.fillStyle=Nd;this.tj.fill();}if(Od!=null){this.tj.strokeStyle=Od;this.tj.stroke();}};qi.prototype.Hj=function (vj,Gj,Ij,Od){this.tj.beginPath();this.tj.arc(vj.G,vj.t,Gj,0,qi.sj);var Jj=this.tj.createRadialGradient(vj.G,vj.t,0,vj.G,vj.t,Gj);var Kj=Ij.Lj;for(var H=0;H<Kj.length;H++){var Mj=Kj[H];Jj.Nj(Mj.position,Mj.Oj);}this.tj.fillStyle=Jj;this.tj.fill();if(Od!=null){this.tj.strokeStyle=Od;this.tj.stroke();}};qi.prototype.Pj=function (vj,Gj,Oj){var Ld=this.Ld.q(vj);this.tj.beginPath();this.tj.strokeStyle=Oj;this.tj.moveTo(Ld.G-Gj,Ld.t);this.tj.lineTo(Ld.G+Gj,Ld.t);this.tj.moveTo(Ld.G,Ld.t-Gj);this.tj.lineTo(Ld.G,Ld.t+Gj);this.tj.stroke();};qi.prototype.Qj=function (vj,Rj,Sj,Tj,Nd,Od){var Ld=this.Ld.q(vj);this.tj.save();this.tj.translate(vj.G,vj.t);var Uj=Tj*Cj.sj;this.tj.rotate(Uj);var Vj=Sj/Rj;this.tj.scale(1,Vj);this.tj.beginPath();this.tj.arc(0,0,Rj,0,Math.PI*2.0 );if(Nd!=null){this.tj.fillStyle=Nd;this.tj.fill();}if(Od!=null){this.tj.strokeStyle=Od;this.tj.stroke();}this.tj.restore();};qi.prototype.drawImage=function (Wj,qd,k){var Xj=Wj.Xj;if(k==null){this.tj.drawImage(Xj,qd.G,qd.t);}else {try{this.tj.drawImage(Xj,qd.G,qd.t,k.G,k.t);}catch (Yj){}}};qi.prototype.Zj=function (ak,bk,Oj){var Ld=this.Ld;this.tj.strokeStyle=Oj;this.tj.beginPath();Ld.q(ak);this.tj.moveTo(Ld.G,Ld.t);Ld.q(bk);this.tj.lineTo(Ld.G,Ld.t);this.tj.stroke();};qi.prototype.ck=function (qd,Oj){this.tj.fillStyle=Oj;this.tj.fillRect(qd.G,qd.t,1,1
);};qi.prototype.dk=function (ek,Nd,Od){this.tj.beginPath();var Ld=this.Ld;for(var H=0;H<ek.length;H++){var fk=ek[H];Ld.q(fk);if(H==0){this.tj.moveTo(Ld.G,Ld.t);}else {this.tj.lineTo(Ld.G,Ld.t);}}this.tj.closePath();if(Nd!=null){this.tj.fillStyle=Nd;this.tj.fill();}if(Od!=null){this.tj.strokeStyle=Od;this.tj.stroke();}};qi.prototype.Pd=function (qd,k,Nd,Od,gk){if(gk==true){var re=Nd;Nd=Od;Od=re;}if(Nd!=null){this.tj.fillStyle=Nd;this.tj.fillRect(qd.G,qd.t,k.G,k.t);}if(Od!=null){this.tj.strokeStyle=Od;this.tj.strokeRect(qd.G,qd.t,k.G,k.t);}};qi.prototype.hk=function (qd,k,Nd,Od){var zd=this.zd.q(k).Q();var ik=this.Ld.q(qd).P(zd);this.Pd(ik,k,Nd,Od);};qi.prototype.Sd=function (text,rd,qd,Nd,jk,gk,kk,lk){var mk=this.tj.font;if(rd==null){rd=this.rd;}this.nk(rd);if(gk==true){var re=Nd;Nd=jk;jk=re;}var ok=text;if(lk!=null){while(this.Sf(ok,rd)>lk){ok=ok.substr(0,ok.length-1);}}var pk=this.Sf(ok,rd);var Ld=new g(qd.G,qd.t+rd);if(kk==true){Ld.qk(0 -pk/2,0 -rd/2,0);}if(jk!=null){this.tj.strokeStyle=jk;this.tj.strokeText(ok,Ld.G,Ld.t);}if(Nd!=null){this.tj.fillStyle=Nd;this.tj.fillText(ok,Ld.G,Ld.t);}this.tj.font=mk;};qi.prototype.nk=function (rd){var rk=this.sk(this.oj);var tk=(rk==true?this.oj:"sans-serif");this.tj.font=rd+"px "+tk;};qi.prototype.sk=function (oj){this.tj.font=""+this.rd+"px "+oj;var uk=this.tj.measureText(this.qj).width;var R=(uk!=this.vk);return R;};qi.prototype.wk=function (j){j.xk.yk(this.zk);};qi.prototype.Db=function (j){var xk=j.xk;xk.Db(j);if(this.zk!=null){xk.yk(this.zk);}this.Ak();xk.Bk(this.zk);};qi.prototype.Ak=function (){this.zk=document.createElement("canvas");this.zk.width=this.vb.G;this.zk.height=this.vb.t;this.tj=this.zk.getContext("2d");this.tj.font=""+this.rd+"px "+this.pj;this.vk=this.tj.measureText(this.qj).width;var f=this.wb[0];this.Fg=this.vb.L().r(f);this.tj.scale(this.Fg.G,this.Fg.t);return this;};qi.prototype.Ck=function (j){j.xk.Bk(this.zk);};qi.prototype.Sf=function (Dk,rd){var mk=this.tj.font;this.nk(rd);var R=this.tj.measureText(Dk).width;this.tj.font=mk;return R;};qi.prototype.Ek=function (){return Fk.Gk("[fromDisplay]",this.zk);};}function Hk(vb,oj,rd,ve,hf){this.vb=vb;this.p=vb;this.Fg=new g(1,1,1);this._Ik=new qi([vb],oj,rd,ve,hf);}{Hk.Jk=3;Hk.prototype.Kk=function (Lk){var Mk=Lk.bg;var Nk=this.Nk.Ok(Mk.qd.L().ab(-1)).w(this.Pk.Qk(Mk.Rk)).w(this.Sk.Tk(Lk));var Uk=this.Uk;var Vk=Uk.Vk;var Wk=Uk.Wk;Vk.Xk(Wk.Yk,false,Nk.Zk());};Hk.prototype.clear=function (){var Uk=this.Uk;var Vk=Uk.Vk;var Wk=Uk.Wk;Vk.al(0,0,Vk.bl,Vk.cl);Vk.clear(Vk.dl_el_fl|Vk.gl_el_fl);};Hk.prototype.hl=function (il){var Uk=this.Uk;var Vk=Uk.Vk;var Wk=Uk.Wk;var jl=[];var kl=[];var ll=[];var ml=[];var nl=0;var ol=il.ol;var pl=il.pl();var ql=il.ql;var rl=il.rl();for(var sl=0;sl<ol.length;sl++){var tl=ol[sl];var ul=tl.name;var vl=rl[ul];for(var wl=0;wl<vl.length;wl++){var xl=vl[wl];var yl=pl[xl];var zl=yl.tl;var Al=yl.Bl;var Cl=Al.Dl().El;var Fl=il.Fl;var Gl=[[0,1,2]];var Hl=Al.ek;var Il=Hl.length;if(Il==4){Gl.push([0,2,3]);}for(var Jl=0;Jl<Gl.length;Jl++){var Kl=Gl[Jl];for(var Ll=0;Ll<Kl.length;Ll++){var Ml=Kl[Ll];var fk=Hl[Ml];jl=jl.concat(fk.Nl());var Ol=zl.Nd;kl=kl.concat(Ol.Ri);var Pl=(Fl==null?Cl:Fl[xl][Ml]);ll=ll.concat(Pl.Nl());var Ql=(ql==null?new g(-1,-1):ql[xl]==null?new g(-1,-1):ql[xl].Rl[Ml]);ml=ml.concat([Ql.G,Ql.t]);}}nl+=Gl.length;}var Sl=Vk.Tl();Vk.Ul(Vk.Vl_el,Sl);Vk.Wl(Vk.Vl_el,new Float32Array(kl),Vk.Xl_Yl);Vk.Zl(Wk.am,Pi.Si,Vk.bm,false,0,0
);var cm=Vk.Tl();Vk.Ul(Vk.Vl_el,cm);Vk.Wl(Vk.Vl_el,new Float32Array(ll),Vk.Xl_Yl);Vk.Zl(Wk.dm,g.em,Vk.bm,false,0,0
);var fm=Vk.Tl();Vk.Ul(Vk.Vl_el,fm);Vk.Wl(Vk.Vl_el,new Float32Array(jl),Vk.Xl_Yl);Vk.Zl(Wk.gm,g.em,Vk.bm,false,0,0
);var hm=tl.hm;if(hm!=null){var im=hm.name;var jm=this.km[im];if(jm==null){hm.lm(this.Uk);this.km[im]=hm;}Vk.mm(Vk.nm);Vk.om(Vk.pm_2qm,hm.rm);}Vk.sm(Wk.tm,0);var um=Vk.Tl();Vk.Ul(Vk.Vl_el,um);Vk.Wl(Vk.Vl_el,new Float32Array(ml),Vk.Xl_Yl);Vk.Zl(Wk.vm,2,Vk.bm,false,0,0
);Vk.wm(Vk.xm,0,nl*Hk.Jk);}};Hk.prototype.ym=function (il,zm){var Pk=this.Pk;var Am=this.Am.Bm(zm).w(Pk.Cm(zm));var Uk=this.Uk;var Vk=Uk.Vk;var Wk=Uk.Wk;Vk.Xk(Wk.Dm,false,Pk.Zk());Vk.Xk(Wk.Em,false,Am.Zk());this.hl(il);};Hk.prototype.Db=function (j){var xk=j.xk;xk.Db(j);if(this.zk!=null){xk.yk(this.zk);}this.zk=document.createElement("canvas");this.zk.style.position="absolute";this.zk.width=this.vb.G;this.zk.height=this.vb.t;Fm.appendChild(this.zk);this.Uk=new Gm(this.zk);this.km=[];this.Hm=new Im(.5,new g(-1,-1,-1),.3 );this._Ik.Db(j);this.Am=Jm.Km();this.Nk=Jm.Km();this.Pk=Jm.Km();this.Sk=Jm.Km();this.Lm=Jm.Km();this.Mm=new g(0,0,0);this.Nm=Jm.Km();this.Om=Jm.Km();};Hk.prototype.Pm=function (Qm){var Uk=this.Uk;var Vk=Uk.Vk;var Wk=Uk.Wk;var Hm=this.Hm;Vk.Rm(Wk.Sm,Hm.Tm);Vk.Um(Wk.Vm,Gm.Wm(Hm.de));Vk.Rm(Wk.Xm,Hm.Ym);};Hk.prototype.clear=function (){this._Ik.clear();};Hk.prototype.uj=function (vj,wj,xj,yj,zj,Nd,Od){this._Ik.uj(vj,wj,xj,yj,zj,Nd,Od);};Hk.prototype.Ej=function (){this._Ik.Ej();};Hk.prototype.Fj=function (vj,Gj,Nd,Od){this._Ik.Fj(vj,Gj,Nd,Od);};Hk.prototype.Hj=function (vj,Gj,Ij,Od){this._Ik.Hj(vj,Gj,Ij,Od);};Hk.prototype.drawImage=function (Wj,qd,k){this._Ik.drawImage(Wj,qd,k);};Hk.prototype.Zj=function (ak,bk,Oj){this._Ik.Zj(ak,bk,Oj);};Hk.prototype.dk=function (ek,Nd,Od){this._Ik.dk(ek,Nd,Od);};Hk.prototype.Pd=function (qd,k,Nd,Od,gk){this._Ik.Pd(qd,k,Nd,Od,gk);};Hk.prototype.Sd=function (text,rd,qd,Nd,jk,gk,kk,lk){this._Ik.Sd(text,rd,qd,Nd,jk,gk,kk,lk);};Hk.prototype.nk=function (rd){this._Ik.nk(rd);};Hk.prototype.sk=function (oj){this._Ik.sk(oj);};Hk.prototype.wk=function (j){this._Ik.wk(j);};Hk.prototype.Ck=function (j){this._Ik.Ck(j);};Hk.prototype.Sf=function (Dk,rd){return this._Ik.Sf(Dk,rd);};}function Zm(Bl,tl){this.Bl=Bl;this.tl=tl;}function an(Lj){this.Lj=Lj;}function bn(position,Oj){this.position=position;this.Oj=Oj;}function Im(Tm,de,Ym){this.Tm=Tm;this.de=de.L().cn();this.Ym=Ym;}function dn(name,en,Nd,hm){this.name=name;this.en=en;this.Nd=Nd;this.hm=hm;}{dn.eb=function (){if(dn._eb==null){dn._eb=this;this.Jf=new dn("Default",Pi.eb().Vi,Pi.eb().jj,null);}return dn._eb;};}function Jm(values){this.values=values;}{Jm.Km=function (){var R=new Jm([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,]);return R;};Jm.prototype.L=function (){var fn=[];for(var H=0;H<this.values.length;H++){fn[H]=this.values[H];}var R=new Jm(fn);return R;};Jm.prototype.gn=function (hn){for(var H=0;H<this.values.length;H++){this.values[H]/=hn;}return this;};Jm.prototype.w=function (jn){var kn=[];for(var t=0;t<4;t++){for(var G=0;G<4;G++){var ln=0;for(var H=0;H<4;H++){ln+=jn.values[t*4 +H]*this.values[H*4 +G];}kn[t*4 +G]=ln;}}this.mn(kn);return this;};Jm.prototype.ab=function (hn){for(var H=0;H<this.values.length;H++){this.values[H]*=hn;}return this;};Jm.prototype.q=function (jn){for(var H=0;H<this.values.length;H++){this.values[H]=jn.values[H];}return this;};Jm.prototype.Cm=function (Rk){var nn=Rk.nn.L().ab(1);var on=Rk.on.L().ab(1);var pn=Rk.pn.L().ab(1);/*this.mn([on.G,pn.G,nn.G,0,on.t,pn.t,nn.t,0,on.qn,pn.qn,nn.qn,0,0,0,0,1,]);*/this.mn([nn.G,on.G,pn.G,0,nn.t,on.t,pn.t,0,nn.qn,on.qn,pn.qn,0,0,0,0,1,]);return this;};Jm.prototype.Qk=function (Rk){var nn=Rk.nn.L().ab(1);var on=Rk.on.L().ab(1);var pn=Rk.pn.L().ab(1);this.mn([on.G,on.t,on.qn,0,0-pn.G,0-pn.t,0-pn.qn,0,0-nn.G,0-nn.t,0-nn.qn,0,0,0,0,1,]);return this;};Jm.prototype.Bm=function (Rk){var nn=Rk.nn.L();var on=Rk.on.L();var pn=Rk.pn.L();this.mn([nn.G,nn.t,nn.qn,0,on.G,on.t,on.qn,0,pn.G,pn.t,pn.qn,0,0,0,0,1,]);return this;};Jm.prototype.Tk=function (Lk){var rn=Lk.rn;var sn=.001;var tn=Lk.rn.qn;var un=1.0 /Math.vn(rn.t/2);var wn=un*rn.t/rn.G;var xn=.7;wn*=xn;un*=xn;var yn=sn-tn;var zn=tn+sn;var An=zn/yn;var Bn=(tn*sn)/yn;this.mn([wn,0,0,0,0,un,0,0,0,0,An,2 *Bn,0,0,-1,0,]);return this;};Jm.prototype.Ok=function (Cn){this.mn([1,0,0,Cn.G,0,1,0,Cn.t,0,0,1,Cn.qn,0,0,0,1,]);return this;};Jm.prototype.mn=function (Dn){for(var H=0;H<this.values.length;H++){this.values[H]=Dn[H];}return this;};Jm.prototype.Zk=function (){var gi=[];for(var G=0;G<4;G++){for(var t=0;t<4;t++){gi.push(this.values[(t*4 +G)]);}}var gi=new Float32Array(gi);return gi;};}function En(Bl,ol,ql,Fn){this.Bl=Bl;this.ol=ol.d("name");this.ql=ql;this.Fn=Fn;}{En.prototype.pl=function (){if(this._pl==null){this._pl=[];var Gn=this.Bl.pl();for(var H=0;H<Gn.length;H++){var Hn=Gn[H];var In=this.ql[H];var Jn=In.ul;var zl=this.ol[Jn];var yl=new Zm(Hn,zl);this._pl.push(yl);}}return this._pl;};En.prototype.Kn=function (){var ul=this.ol[0].name;var ql=[];var Ln=this.Bl.Mn.length;for(var xl=0;xl<Ln;xl++){var In=new Nn(ul,[new g(0,0),new g(1,0),new g(1,1),new g(1,0)]);ql.push(In);}this.ql=ql;return this;};En.prototype.rl=function (){if(this._rl==null){this._rl=[];for(var xl=0;xl<this.ql.length;xl++){var In=this.ql[xl];var Jn=In.ul;var On=this._rl[Jn];if(On==null){On=[];this._rl[Jn]=On;}On.push(xl);}}return this._rl;};En.prototype.Pn=function (Qn){this.Bl.Pn(Qn);return this;};En.prototype.Rn=function (Qn){for(var H=0;H<this.ql.length;H++){var In=this.ql[H];Sn.Tn(Qn,In.Rl);}return this;};En.prototype.L=function (){return new En(this.Bl.L(),this.ol,(this.ql==null?null:this.ql.L()),(this.Fn==null?null:this.Fn.L()));};En.prototype.q=function (jn){this.Bl.q(jn.Bl);return this;};}function Nn(ul,Rl){this.ul=ul;this.Rl=Rl;}{Nn.prototype.L=function (){return new Nn(this.ul,this.Rl.L());};}function Un(name,Vn){this.name=name;this.Vn=Vn;}{Un.prototype.lm=function (Uk){var Vk=Uk.Vk;this.rm=Vk.Wn();Vk.om(Vk.pm_2qm,this.rm);Vk.Xn(Vk.pm_2qm,0,Vk.Yn,Vk.Yn,Vk.Zn_ao,this.Vn.Xj);Vk.bo(Vk.pm_2qm,Vk.pm_co_eo,Vk.fo);Vk.bo(Vk.pm_2qm,Vk.pm_go_eo,Vk.fo);Vk.bo(Vk.pm_2qm,Vk.pm_ho_io,Vk.jo);Vk.bo(Vk.pm_2qm,Vk.pm_ho_ko,Vk.jo);Vk.om(Vk.pm_2qm,null);};}function nb(lo,mo,no,oo){this.po=[mo,lo];this.oo=(oo==null?250 :oo);if(mo==lo){this.qo=1;this.oo*=2;}else {this.qo=0;}this.no=(no==null?Pi.eb().Ui:no);}{nb.prototype.Db=function (j){var lo=this.lo();if(lo.Db!=null){lo.Db(j);}};nb.prototype.wg=function (j){this.Kd(j);var hc=new Date();if(this.ro==null){this.ro=hc;}var so=hc-this.ro;var to=so/this.oo;var uo;if(this.qo==0){if(to>1){to=1;this.qo++;this.ro=null;var lo=this.po[1];if(lo.Kd==null){j.jb=lo;}}uo=to;}else {if(to>1){to=1;j.jb=this.ob();}uo=1 -to;}uo*=uo;var vo=this.no.L().mj(uo*this.no.lj());var o=j.o;o.Pd(new g(0,0),o.p,vo.nj());};nb.prototype.lo=function (){return this.po[1];};nb.prototype.ob=function (){return this.po[this.qo];};nb.prototype.Kd=function (j){var ob=this.ob();if(ob!=null){ob.Kd(j);}};}function Lg(zb,wo){this.zb=zb;this.wo=wo;}{Lg.prototype.Db=function (j){for(var H=0;H<this.zb.length;H++){var Td=this.zb[H];if(Td.Db!=null){Td.Db(j);}}};Lg.prototype.wg=function (j){this.zb[this.zb.length-1].wg(j);};Lg.prototype.Kd=function (j){for(var H=0;H<this.zb.length;H++){var Td=this.zb[H];Td.Kd(j);if(this.wo!=null){var o=j.o;o.Pd(g.eb().fb,o.k,this.wo);}}};}function xo(name,yo){this.name=name;this.yo=yo;}{xo.prototype.L=function (){return new xo(this.name,this.yo.slice());};}function zo(Td,Ao){this.Td=Td;this.Ao=Ao;this.Bo=new g();}{zo.prototype.Kd=function (j,Eb,o,Zf,Co){var Do=Zf.bg.qd;this.Bo.q(Do);Do.q(this.Ao);this.Td.Kd(j,Eb,o,Zf,Co);Do.q(this.Bo);};}function Eo(name,Fo,Go,Ho){this.name=name;this.Fo=Fo;this.Go=Go;this.Ho=(Ho==null?true:Ho);this.Io=this.Go.length*this.Fo;}{Eo.prototype.Kd=function (j,Eb,o,Zf,Co){if(Zf.Jo==null){Zf.Jo={};}var Ko=Zf.Jo[this.name];if(Ko==null){Ko=new Lo(this);Zf.Jo[this.name]=Ko;}Ko.Mh(j,Eb,o,Zf);};}function Lo(yh){this.yh=yh;this.Mo=0;}{Lo.prototype.No=function (){var Oo=this.Oo();var No=this.yh.Go[Oo];return No;};Lo.prototype.Oo=function (){return Math.floor(this.Mo/this.yh.Fo);};Lo.prototype.Po=function (){var R=(this.Mo>=this.yh.Io);return R;};Lo.prototype.Mh=function (j,Eb,o,Zf){var No=this.No();No.Kd(j,Eb,o,Zf);this.Mo++;if(this.Po()==true){if(this.yh.Ho==true){this.Mo=this.Mo.Hf(0,this.yh.Io);}else {this.Mo=this.Mo.Qo(this.yh.Io-1);}}};}function Ro(arc,Nd,Od){this.arc=arc;this.Nd=Nd;this.Od=Od;this.Ld=new g();}{Ro.prototype.Kd=function (j,Eb,o,Zf,Co){var arc=this.arc;var So=arc.So;var To=arc.To;var Uo=To.Vo();var Wo=To.Xo();var Ld=this.Ld.q(Zf.bg.qd);o.uj(Ld,So.Yo.Gj,So.Zo.Gj,Uo,Wo,this.Nd,this.Od);};}function ap(Td,Lk){this.Td=Td;this.Lk=Lk;this.Bo=new g();}{ap.prototype.Kd=function (j,Eb,o,Zf,Co){var Do=Zf.bg.qd;this.Bo.q(Do);this.Lk.bp(Do);this.Td.Kd(j,Eb,o,Zf,Co);Do.q(this.Bo);};}function cp(Gj,Nd,Od){this.Gj=Gj;this.Nd=Nd;this.Od=Od;}{cp.prototype.Kd=function (j,Eb,o,Zf,Co){o.Fj(Zf.bg.qd,this.Gj,this.Nd,this.Od);};}function dp(Gj,Ij,Od){this.Gj=Gj;this.Ij=Ij;this.Od=Od;}{dp.prototype.Kd=function (j,Eb,o,Zf,Co){o.Hj(Zf.bg.qd,this.Gj,this.Ij,this.Od);};}function ep(fp,gp){this.fp=fp;this.gp=gp;this.hp=this.gp.length;}{ep.prototype.Kd=function (j,Eb,o,Zf,Co){var bg=Zf.bg;var ip=bg.Rk.ip();var jp;if(ip==null){jp=this.fp;}else {var de=Math.round(ip*this.hp).Hf(0,this.hp);jp=this.gp[de];}jp.Kd(j,Eb,o,Zf);};}function kp(lp){this.lp=lp;}{kp.prototype.Kd=function (j,Eb,o,Zf,Co){var Yf=this.lp.call(this,j,Eb,Zf,Co);Yf.Kd(j,Eb,o,Zf);};}function mp(Rj,Sj,Tj,Nd,Od){this.Rj=Rj;this.Sj=Sj;this.Tj=Tj;this.Nd=Nd;this.Od=Od;}{mp.prototype.Kd=function (j,Eb,o,Zf,Co){var np=Zf.bg;o.Qj(np.qd,this.Rj,this.Sj,this.Tj,this.Nd,this.Od);};}function op(zb){this.zb=zb;}{op.prototype.Kd=function (j,Eb,o,Zf,Co){for(var H=0;H<this.zb.length;H++){var Td=this.zb[H];Td.Kd(j,Eb,o,Zf,Co);}};}function wc(tc,pp){this.tc=tc;this._pp=pp;this.Ld=new g();}{wc.qp=function (rp,sp){var gi=[];for(var H=0;H<rp.length;H++){var Vn=rp[H];var Yf=new wc(Vn.name,sp);gi.push(Yf);}return gi;};wc.prototype.Vn=function (j){return j.Ec.tp(this.tc);};wc.prototype.sp=function (j){return (this._pp==null?this.Vn(j).vb:this._pp);};wc.prototype.Kd=function (j,Eb,o,Zf,Co){var Vn=this.Vn(j);var up=this.sp(j);var Ld=this.Ld.clear().P(up).Q().Md(Zf.bg.qd);o.drawImage(Vn,Ld,up);};}function vp(Vn,pp){this.Vn=Vn;this._Ld=new g();}{vp.qp=function (rp,sp){var gi=[];for(var H=0;H<rp.length;H++){var Vn=rp[H];var Yf=new vp(Vn,sp);gi.push(Yf);}return gi;};vp.prototype.sp=function (j){return (this._pp==null?this.Vn.vb:this._pp);};vp.prototype.Kd=function (j,Eb,o,Zf,Co){var Vn=this.Vn;var up=this.sp(j);var Ld=this._Ld.clear().P(up).Q().Md(Zf.bg.qd);o.drawImage(Vn,Ld,up);};}function wp(ak,bk,Oj){this.ak=ak;this.bk=bk;this.Oj=Oj;this.xp=new g();this.yp=new g();}{wp.prototype.Kd=function (j,Eb,o,Zf){var qd=Zf.bg.qd;var xp=this.xp.q(qd).Md(this.ak);var yp=this.yp.q(qd).Md(this.bk);o.Zj(xp,yp,this.Oj);};}function zp(map,Ap){this.map=map;this.Ap=Ap;this.Bp=this.map.Cp.L();this.Dp=new g();this.Ld=new g();this.Bo=new g();}{zp.prototype.Kd=function (j,Eb,o,Zf,Co){var Ep=this.map.Fp;var Gp=this.map.zd;var Dp=this.Dp;var Hp=this.map.Ip;var Do=Zf.bg.qd;for(var t=0;t<Ep.t;t++){Dp.t=t;for(var G=0;G<Ep.G;G++){Dp.G=G;var Bp=this.map.Jp(this.map,Dp,this.Bp);var Kp=Bp.Lp;var Mp=this.Ap[Kp];var Ld=this.Ld.q(Dp).w(Hp).P(Gp).Md(Do);this.Bo.q(Do);Do.q(Ld);Mp.Kd(j,Eb,o,Zf,Co);Do.q(this.Bo);}}};}function Np(){}{Np.prototype.Kd=function (j,Eb,o,Zf,Co){};}function Op(Td,Pp){this.Td=Td;this.Pp=Pp;this.Bo=new g();}{Op.prototype.Kd=function (j,Eb,o,Zf,Co){var Do=Zf.bg.qd;this.Bo.q(Do);Do.Md(this.Pp);this.Td.Kd(j,Eb,o,Zf,Co);Do.q(this.Bo);};}function Qp(Rp,Nd,Od){this.Rp=Rp;this.Nd=Nd;this.Od=Od;this.Sp=this.Rp.L();this.Tp=new Sn_Up(new g());}{Qp.prototype.Kd=function (j,Eb,o,Zf,Co){var qd=Zf.bg.qd;this.Tp.Cn.q(Zf.bg.qd);this.Sp.q(this.Rp);Sn.Tn(this.Tp,this.Sp.Vp);o.dk(this.Sp.Vp,this.Nd,this.Od);};}function Wp(length,Oj){this.length=length;this.Oj=Oj;this.Xp=new Cj(0,this.length);this.bk=new g();}{Wp.prototype.Kd=function (j,Eb,o,Zf,Co){var np=Zf.bg;var Do=np.qd;this.Xp.Yp=np.Rk.ip();this.Xp.Dj(this.bk).Md(Do);o.Zj(Do,this.bk,this.Oj);};}function Zp(k,Nd,Od){this.k=k;this.Nd=Nd;this.Od=Od;this.zd=this.k.L().Q();this._Ld=new g();}{Zp.prototype.Kd=function (j,Eb,o,Zf,Co){var Ld=this._Ld.q(Zf.bg.qd).P(this.zd);o.Pd(Ld,this.k,this.Nd,this.Od);};}function aq(Ip,rn,Td){this.Ip=Ip;this.rn=rn;this.Td=Td;if(this.Ip.qn==0){throw "Invalid argument: cellSize.z must not be 0.";}this.bq=this.rn.L().r(this.Ip);this._cq=new g();this._dq=new g();this._eq=new g();this._fq=new g();}{aq.prototype.Kd=function (j,Eb,o,Zf,Co){var Ld=Zf.bg.qd;this._fq.q(Ld);var eq=this._eq.q(Ld).gq(this.Ip);var cq=this._cq;var bq=this.bq;for(var t=-1;t<bq.t+1;t++){cq.t=t;for(var G=-1;G<bq.G+1;G++){cq.G=G;Ld.q(this._dq.q(cq).w(this.Ip)).Md(eq);this.Td.Kd(j,Eb,o,Zf,Co);}}Ld.q(this._fq);};}function hq(name,iq,zb){this.name=name;this.iq=iq;this.zb=zb;for(var H=0;H<this.zb.length;H++){var jq=this.iq[H];var Td=this.zb[H];this.zb[jq]=Td;}}{hq.prototype.kq=function (Zf){var lq=Zf["visualNameSelected_"+this.name];if(lq==null){lq=this.iq[0];Zf.mq=lq;}return this.zb[lq];};hq.prototype.Kd=function (j,Eb,o,Zf,Co){var kq=this.kq(Zf);kq.Kd(j,Eb,o,Zf,Co);};}function nq(text,Nd,Od){this._text=text;this.Nd=Nd;this.Od=Od;}{nq.prototype.Kd=function (j,Eb,o,Zf,Co){var text=this.text(j,Eb,o,Zf);o.Sd(text,o.rd,Zf.bg.qd,this.Nd,this.Od,false,true,null);};nq.prototype.text=function (j,Eb,o,Zf){return (this._text.Cd==null?this._text:this._text.Cd(j,Eb,o,Zf));};}function Gm(zk){this.Vk=this.oq(zk);this.Wk=this.pq(this.Vk);}{Gm.Wm=function (qq){var gi=new Float32Array(qq.Nl());return gi;};Gm.prototype.oq=function (zk){var Vk=zk.getContext("experimental-webgl");Vk.bl=zk.width;Vk.cl=zk.height;var se=Pi.eb().Ui;var rq=se.Ri;Vk.sq(rq[0],rq[1],rq[2],rq[3]);Vk.tq(Vk.uq_vq);Vk.tq(Vk.gl_wq);return Vk;};Gm.prototype.pq=function (Vk){var Wk=this.pq_xq(Vk,this.pq_yq(Vk),this.pq_zq(Vk));this.pq_Aq(Vk,Wk);return Wk;};Gm.prototype.pq_yq=function (Vk){var Bq=Vk.Cq(Vk.Dq_Eq);var Fq="precision mediump float;"+"uniform sampler2D uSampler;"+"varying vec4 vColor;"+"varying vec3 vLight;"+"varying vec2 vTextureUV;"+"void main(void) {"+"    if (vTextureUV.x < 0.0) {"+"        gl_FragColor = vColor;"+"    } else {"+"        vec4 textureColor = "+"            texture2D(uSampler, vec2(vTextureUV.s, vTextureUV.t));"+"        gl_FragColor = vec4(vLight * textureColor.rgb, textureColor.a);"+"    }"+"}";Vk.Gq(Bq,Fq);Vk.Hq(Bq);return Bq;};Gm.prototype.pq_zq=function (Vk){var Iq=Vk.Cq(Vk.Jq_Eq);var Kq="attribute vec4 aVertexColor;"+"attribute vec3 aVertexNormal;"+"attribute vec3 aVertexPosition;"+"attribute vec2 aVertexTextureUV;"+"uniform mat4 uEntityMatrix;"+"uniform mat4 uCameraMatrix;"+"uniform float uLightAmbientIntensity;"+"uniform vec3 uLightDirection;"+"uniform float uLightDirectionalIntensity;"+"uniform mat4 uNormalMatrix;"+"varying vec4 vColor;"+"varying vec3 vLight;"+"varying vec2 vTextureUV;"+"void main(void) {"+"    vColor = aVertexColor;"+"    vec4 vertexNormal4 = vec4(aVertexNormal, 0.0);"+"    vec4 transformedNormal4 = uNormalMatrix * vertexNormal4;"+"    vec3 transformedNormal = vec3(transformedNormal4.xyz) * -1.0;"+"    float lightMagnitude = uLightAmbientIntensity;"+"    lightMagnitude += "+"        uLightDirectionalIntensity "+"        * max(dot(transformedNormal, uLightDirection), 0.0);"+"    vLight = vec3(1.0, 1.0, 1.0) * lightMagnitude;"+"    vTextureUV = aVertexTextureUV;"+"    vec4 vertexPos = vec4(aVertexPosition, 1.0);"+"    gl_Position = uCameraMatrix * uEntityMatrix * vertexPos;"+"}";Vk.Gq(Iq,Kq);Vk.Hq(Iq);return Iq;};Gm.prototype.pq_xq=function (Vk,Bq,Iq){var Wk=Vk.Lq();Vk.Mq(Wk,Iq);Vk.Mq(Wk,Bq);Vk.Nq(Wk);Vk.Oq(Wk);return Wk;};Gm.prototype.pq_Aq=function (Vk,Wk){Wk.am=Vk.Pq(Wk,"aVertexColor");Vk.Qq(Wk.am);Wk.dm=Vk.Pq(Wk,"aVertexNormal");Vk.Qq(Wk.dm);Wk.gm=Vk.Pq(Wk,"aVertexPosition");Vk.Qq(Wk.gm);Wk.vm=Vk.Pq(Wk,"aVertexTextureUV");Vk.Qq(Wk.vm);Wk.Em=Vk.Rq(Wk,"uEntityMatrix");Wk.Yk=Vk.Rq(Wk,"uCameraMatrix");Wk.Sm=Vk.Rq(Wk,"uLightAmbientIntensity");Wk.Vm=Vk.Rq(Wk,"uLightDirection");Wk.Xm=Vk.Rq(Wk,"uLightDirectionalIntensity");Wk.Dm=Vk.Rq(Wk,"uNormalMatrix");};}function Sq(){}{Array.prototype.Md=function (Tq){this.push(Tq);return this;};Array.prototype.Uq=function (Vq){for(var H=0;H<Vq.length;H++){var Tq=Vq[H];this.push(Tq);}return this;};Array.prototype.d=function (Wq){for(var H=0;H<this.length;H++){var Tq=this[H];var key=Tq[Wq];this[key]=Tq;}return this;};Array.prototype.ug=function (jn){for(var H=0;H<jn.length;H++){var Tq=jn[H];this.push(Tq);}return this;};Array.prototype.clear=function (){this.length=0;return this;};Array.prototype.L=function (){var R=[];for(var H=0;H<this.length;H++){var Tq=this[H];var Xq=Tq.L();R.push(Xq);}return R;};Array.prototype.lh=function (Yq){return (this.indexOf (Yq)>=0);};Array.prototype.Zq=function (ar){var gi=[];for(var H=0;H<this.length;H++){var Tq=this[H];var br=Tq[ar];gi.push(br);}return gi;};Array.prototype.cr=function (Tq,dr){this.splice (dr,0,Tq);return this;};Array.prototype.q=function (jn){for(var H=0;H<this.length;H++){var er=this[H];var fr=jn[H];if(er.q==null){this[H]=fr;}else {er.q(fr);}}return this;};Array.prototype.gr=function (jn){for(var H=0;H<jn.length;H++){var Tq=jn[H];this.splice (0,0,Tq);}return this;};Array.prototype.random=function (){return this[Math.floor(Math.random()*this.length)];};Array.prototype.Lc=function (hr){var ir=this.indexOf (hr);if(ir>=0){this.splice (ir,1);}return this;};Array.prototype.jr=function (dr){this.splice (dr,1);return this;};Array.prototype.kr=function (ar){return this.sort(function (mg,lr){return mg[ar]-lr[ar];});};}function mr(){}{Number.prototype.je=function (nr,or){return (this>=nr&&this<=or);};Number.prototype.pr=function (qr){var rr=Math.sr(10,qr);return Math.round(this*rr)/rr;};Number.prototype.tr=function (ur,or){var vr=this-ur;var wr=Math.xr(vr);var yr=wr;var R=vr;for(var H=-1;H<=1;H+=2){var zr=vr+or*H;wr=Math.xr(zr);if(wr<yr){yr=wr;R=zr;}}return R;};Number.prototype.Qo=function (or){return this.af(0,or);};Number.prototype.af=function (nr,or){var Cb=this;if(Cb<nr){Cb=nr;}else if(Cb>or){Cb=or;}return Cb;};Number.prototype.Hf=function (nr,or){var Cb=this;var Ar=or-nr;if(Ar==0){Cb=nr;}else {while(Cb<nr){Cb+=Ar;}while(Cb>=or){Cb-=Ar;}}return Cb;};}function Br(){}{String.prototype.Cr=function (Dr,Er){var Fr=this;while(Fr.length<Dr){Fr=Er+Fr;}return Fr;};String.prototype.Gr=function (Hr,Ir){return this.split(Hr).join(Ir);};String.prototype.Jr=function (){return this.substr(0,1).toUpperCase()+this.substr(1).toLowerCase();};}function Kr(rn,Lr,bg){this.rn=rn;this.Lr=Lr;this.bg=bg;this.Mr=this.rn.L().M().Q();}{Kr.prototype.Nr=function (){if(this._Nr==null){this._Nr=[new Or(new g(0,0,0),0),new Or(new g(0,0,0),0),new Or(new g(0,0,0),0),new Or(new g(0,0,0),0),];}var Mk=this.bg;var Pr=Mk.Rk;var Qr=Mk.qd;var Rr=Qr.L().Md(Pr.nn.L().ab(this.Lr));var Sr=Pr.on.L().ab(this.Mr.G);var Tr=Pr.pn.L().ab(this.Mr.t);var Ur=[Rr.L().Md(Sr).Md(Tr),Rr.L().P(Sr).Md(Tr),Rr.L().P(Sr).P(Tr),Rr.L().Md(Sr).P(Tr),];var Vr=Ur.length;for(var H=0;H<Vr;H++){var Wr=H+1;if(Wr>=Vr){Wr=0;}var Xr=this._Nr[H];var Yr=Ur[H];var Zr=Ur[Wr];Xr.as(Qr,Yr,Zr);}return this._Nr;};Kr.prototype.bs=function (cs,ds){var Mk=this.bg;if(ds==true){cs.qn=this.Lr;}var es=cs.P(this.Mr);Mk.Rk.fs(es);es.Md(Mk.qd);return es;};Kr.prototype.bp=function (es){var Qr=this.bg.qd;var Pr=this.bg.Rk;var cs=es.P(Qr);Pr.gs(cs);if(this.Lr!=null){var hs=cs.qn;if(hs!=0){cs.ab(this.Lr).gn(hs);cs.qn=hs;}}cs.Md(this.Mr);return cs;};}function is(qd,js){this.qd=qd;this.js=js;this.ks=[];this.ls=[];this.Ag=false;}{is.new =function (){return new is(new g());};is.prototype.clear=function (){this.Ag=false;this.ks.clear();this.ls.clear();return this;};}function ms(){this.ns=true;this.os=this.ps();this.qs=this.rs();this.ss=this.ts();this._us=new vs(new g(),new g());this._ws=new is(new g());this._Cn=new g();this._qd=new g();this._xs=new ys();this._zs=new ys();this._k=new g();}{ms.prototype.ts=function (){var As={};var Bs;Bs={};Bs[Cs.name]=this.Ds;As[vs.name]=Bs;Bs={};Bs[Cs.name]=this.Es;As[Fs.name]=Bs;Bs={};Bs[Fs.name]=this.Es;Bs[Gs.name]=this.Es;Bs[Hs.name]=this.Es;Bs[Cs.name]=this.Es;Bs={};Bs[Cs.name]=this.Is;As[Hs.name]=Bs;Bs={};Bs[vs.name]=this.Js;Bs[Fs.name]=this.Es;Bs[Gs.name]=this.Es;Bs[Hs.name]=this.Es;Bs[Cs.name]=this.Ks;As[Cs.name]=Bs;return As;};ms.prototype.ps=function (){var As={};var Bs;Bs={};Bs[vs.name]=this.Ls;Bs[Ms.name]=this.Ns;Bs[Cs.name]=this.Os;As[vs.name]=Bs;Bs={};Bs[Ms.name]=this.Ps;As[Ms.name]=Bs;Bs={};Bs[Qs.name]=this.Rs;Bs[Ss.name]=this.Ts;Bs[Gs.name]=this.Us;Bs[Or.name]=this.Vs;As[Ws.name]=Bs;Bs={};Bs[Cs.name]=this.Xs;As[Ss.name]=Bs;Bs={};Bs[Fs.name]=this.Ys;Bs[Cs.name]=this.Zs;As[Fs.name]=Bs;Bs={};Bs[Gs.name]=this.at;Bs[Cs.name]=this.bt;As[Gs.name]=Bs;Bs={};Bs[ct.name]=this.dt;Bs[Hs.name]=this.dt;Bs[et.name]=this.dt;Bs[ft.name]=this.dt;Bs[Cs.name]=this.dt;As[ct.name]=Bs;Bs={};Bs[ct.name]=this.gt;Bs[Hs.name]=this.gt;Bs[et.name]=this.gt;Bs[ft.name]=this.gt;Bs[Cs.name]=this.gt;As[Hs.name]=Bs;Bs={};Bs[ct.name]=this.ht;Bs[Hs.name]=this.ht;Bs[et.name]=this.ht;Bs[ft.name]=this.ht;Bs[Cs.name]=this.ht;As[et.name]=Bs;Bs={};Bs[ct.name]=this.it;Bs[Hs.name]=this.it;Bs[et.name]=this.it;Bs[ft.name]=this.it;Bs[Cs.name]=this.it;As[ft.name]=Bs;Bs={};Bs[vs.name]=this.jt;Bs[Fs.name]=this.kt;Bs[Gs.name]=this.lt;Bs[ct.name]=this.mt;Bs[Hs.name]=this.nt;Bs[et.name]=this.ot;Bs[ft.name]=this.pt;Bs[Cs.name]=this.qt;As[Cs.name]=Bs;return As;};ms.prototype.rs=function (){var As={};var Bs;Bs={};Bs[vs.name]=this.rt;Bs[Cs.name]=this.st;As[vs.name]=Bs;Bs={};Bs[vs.name]=this.tt;Bs[Cs.name]=this.ut;As[Ss.name]=Bs;Bs={};Bs[vs.name]=this.vt;Bs[Cs.name]=this.wt;As[Cs.name]=Bs;return As;};ms.prototype.xt=function (yt,zt){var At=yt.Bt.Ct;var Dt=zt.Bt.Ct;while(At.Ct!=null){At=At.Ct();}while(Dt.Ct!=null){Dt=Dt.Ct();}var Et=At.constructor.name;var Ft=Dt.constructor.name;var Gt=this.ss[Et];if(Gt==null){if(this.ns){throw "Error!  Colliders of types cannot be collided: "+Et+","+Ft;}}else {var Ht=Gt[Ft];if(Ht==null){if(this.ns){throw "Error!  Colliders of types cannot be collided: "+Et+","+Ft;}}else {R=Ht.call(this,yt,zt);}}};ms.prototype.It=function (Jt,Kt){var gi=[];var Lt=Jt.length;var Mt=Kt.length;for(var H=0;H<Lt;H++){var Nt=Jt[H];for(var oh=0;oh<Mt;oh++){var Ot=Kt[oh];if(this.Pt(Nt,Ot)==true){var ws=is.new ();ws.ks.push(Nt);ws.ks.push(Ot);gi.push(ws);}}}return gi;};ms.prototype.Pt=function (Qt,Rt){var At=Qt.Ct();var Dt=Rt.Ct();var St=this.St(At,Dt);return St;};ms.prototype.St=function (At,Dt){var R=false;while(At.Ct!=null){At=At.Ct();}while(Dt.Ct!=null){Dt=Dt.Ct();}var Et=At.constructor.name;var Ft=Dt.constructor.name;var Tt=this.os[Et];if(Tt==null){if(this.ns){throw "Error!";}}else {var Ht=Tt[Ft];if(Ht==null){if(this.ns){throw "Error!";}}else {R=Ht.call(this,At,Dt);}}return R;};ms.prototype.Ut=function (At,Dt){var R=false;while(At.Ct!=null){At=At.Ct();}while(Dt.Ct!=null){Dt=Dt.Ct();}var Et=At.constructor.name;var Ft=Dt.constructor.name;var Vt=this.qs[Et];if(Vt==null){if(this.ns){throw "Error!";}}else {var Ut=Vt[Ft];if(Ut==null){if(this.ns){throw "Error!";}}else {R=Ut.call(this,At,Dt);}}return R;};ms.prototype.Es=function (Qt,Rt){Qt.ag.bg.Wt.Xt();Rt.ag.bg.Wt.Xt();};ms.prototype.Is=function (Yt,Zt){this.Es(Yt,Zt);};ms.prototype.Ds=function (au,Yt){var bu=Yt.ag.bg;var cu=au.ag.bg;var us=au.Bt.Ct;var du=Yt.Bt.Ct;var ws=this.eu(us,du,this._ws);var fu=this._qd.q(ws.qd).P(us.vj).r(us.zd);if(Math.abs(fu.G)>=Math.abs(fu.t)){bu.Wt.G*=-1;}else {bu.Wt.t*=-1;}};ms.prototype.Js=function (Yt,au){this.Ds(au,Yt);};ms.prototype.Ks=function (yt,zt){var gu=yt.ag.bg;var hu=zt.ag.bg;var iu=gu.qd;var ju=hu.qd;var Cn=this._Cn.q(ju).P(iu);var ku=Cn.lu();var de=Cn.gn(ku);var mu=yt.Bt.Ct.Gj+zt.Bt.Ct.Gj;ju.q(de).ab(mu).Md(iu);var nu=hu.Wt.ou(de);var pu=de.ab(nu*2);hu.qu.P(pu);};ms.prototype.eu=function (us,du,ws){if(ws==null){ws=is.new ();}ws.Ag=true;var ru=du.vj;var su=du.Gj;var tu=us.vj;var uu=us.zd;var vu=this._xs;var wu=this._zs;for(var xu=0;xu<2;xu++){var yu=tu.zu(xu);var Au=uu.zu(xu);wu.nr=yu-Au;wu.or=yu+Au;var Bu=ru.zu(xu);vu.nr=Bu-su;vu.or=Bu+su;var Cu=wu.Du(vu);if(Cu==false){ws.Ag=false;break;}else {var Eu=wu.Fu(vu);ws.qd.zu(xu,Eu.Gu());}}return ws;};ms.prototype.Hu=function (Iu,du,ws){if(ws==null){ws=is.new ();}var Dl=Iu.Dl;var Ju=du.vj.ou(Dl.El);var Ku=Ju-Dl.Lu;if(Ku<du.Gj){ws.Ag=true;Dl.Mu(ws.qd);ws.ls.length=0;ws.ls.push(Iu);}return ws;};ms.prototype.Nu=function (Ou,yl){var Pu=yl.Dl();var R=this.Qu(Ou,Pu);if(R!=null){var Hl=yl.ek;var Ru=new Or(new g());var Cl=Pu.El;var Su=new g();var Tu=Hl[Hl.length-1];for(var H=0;H<Hl.length;H++){var Uu=Hl[H];Su.q(Uu).Md(Cl);Ru.as(Uu,Tu,Su);var Iu=new Ss(Ru);var Ts=this.Ts(Ou,Iu);if(Ts==false){R=null;break;}Tu=Uu;}}if(R!=null){R.Ct=yl;}return R;};ms.prototype.Vu=function (Ou,il,Wu,Xu){if(Wu==null){Wu=[];}var Yu=il.pl();for(var H=0;H<Yu.length;H++){var Zu=Yu[H];var Nu=this.Nu(Ou,Zu);if(Nu!=null){Wu.push(Nu);if(Xu==true){break;}}}return Wu;};ms.prototype.Qu=function (Ou,Dl,ws){if(ws==null){ws=is.new ();}var R=null;var av=Ou.de();var bv=Dl.El;var js=(Dl.Lu-bv.ou(Ou.ek[0]))/bv.ou(av);if(js>=0 &&js<=Ou.length()){ws.qd.q(av).ab(js).Md(Ou.ek[0]);ws.js=js;R.ls.length=0;R.ls.push(Dl);}return R;};ms.prototype.Ls=function (cv,dv){var R=cv.Du(dv);return R;};ms.prototype.Ns=function (us,ev){var R=false;var fv=this._Cn.q(us.vj).P(ev.vj);if(fv.qn<us.zd.qn+ev.gv);{fv.M();var de=fv.cn();var hv=de.ab(ev.Gj).Md(ev.vj);hv.qn=us.vj.qn;var iv=us.jv(hv);R=iv;}return R;};ms.prototype.kv=function (us,Iu){var R=false;var ek=Gs.lv(us).ek();for(var H=0;H<ek.length;H++){var fk=ek[mv];if(Iu.jv(fk)==true){R=true;break;}}return R;};ms.prototype.Os=function (us,du){return this.eu(us,du,this._ws.clear()).Ag;};ms.prototype.Ps=function (nv,ov){var R=false;var Cn=this._Cn.q(ov.vj).P(nv.vj).M();var ku=Cn.lu();var mu=pv.Gj+qv.Gj;var rv=(ku<mu);if(rv==true){var sv=((nv.tv>ov.tv&&nv.tv<ov.uv)||(nv.uv>ov.tv&&nv.uv<ov.uv)||(ov.tv>nv.tv&&ov.tv<nv.uv)||(ov.uv>nv.tv&&ov.uv<nv.uv));if(sv==true){R=true;}}return R;};ms.prototype.Rs=function (Ou,yl){return (this.Nu(Ou,yl)!=null);};ms.prototype.Ts=function (Ou,Iu){var ek=Ou.ek;var R=(Iu.jv(ek[0])||Iu.jv(ek[1]));return R;};ms.prototype.Us=function (Ou,il){var R=false;var av=Ou.de();var Yu=il.pl();for(var xl=0;xl<Yu.length;xl++){var yl=Yu[xl];var Pu=yl.Dl();var Cl=Pu.El;var vv=Cl.ou(av);if(vv<0){R=this.Rs(Ou,yl);if(R==true){break;}}}return R;};ms.prototype.Vs=function (Ou,Dl){return (this.Qu(Ou,Dl,this._ws.clear())!=null);};ms.prototype.Xs=function (Iu,du){var ws=this.Hu(Iu,du,this._ws.clear());return ws.Ag;};ms.prototype.at=function (wv,xv){var R=true;var yv=[wv.ek(),xv.ek()];var Yu=[wv.pl(),xv.pl()];for(var sl=0;sl<2;sl++){var zv=Yu[sl];var Av=yv[sl];var Bv=Bv[sl];for(var xl=0;xl<zv.length;xl++){var yl=zv[xl];var Cl=yl.Dl().El;var Cv=Av[0];var Dv=Cv.ou(Cl);var Ev=Dv;for(var mv=1;mv<Av.length;mv++){Cv=Av[mv];var Fv=Cv.ou(Cl);if(Fv<Dv){Dv=Fv;}if(Fv>Ev){Ev=Fv;}}var Gv=Bv[0];var Hv=Gv.ou(Cl);var Iv=Hv;for(var mv=1;mv<Bv.length;mv++){Gv=Bv[mv];var Jv=Gv.ou(Cl);if(Jv<Hv){Hv=Jv;}if(Jv>Iv){Iv=Jv;}}var Cu=(Ev>Hv&&Iv>Dv);if(Cu==false){R=false;break;}}}return R;};ms.prototype.Ys=function (Kv,Lv){var R=false;var Mv=this.Ls(Kv.us,Lv.us);if(Mv==false){return false;}var Nv=Kv.map;var Ov=Lv.map;var Pv=Nv.Cp.L();var Qv=Ov.Cp.L();var Rv=new g();var Sv=new g();var Tv=new g();var Uv=new g();var Vv=new g();var Wv=Nv.Fp;var Xv=Ov.Fp;var Yv=Ov.Zv;var aw=Nv.Ip;var bw=Ov.Ip;var cw=Kv.bg.qd;var dw=Lv.bg.qd;for(var ew=0;ew<Wv.t;ew++){Sv.t=ew;Rv.t=cw.t+(ew*aw.t);for(var fw=0;fw<Wv.G;fw++){Sv.G=fw;Rv.G=cw.G+(fw*aw.G);Pv=Nv.Jp(Nv,Sv,Pv);if(Pv.gw==true){Uv.q(Rv).P(dw).r(bw).floor();Vv.q(Rv).P(dw).Md(aw).r(bw).floor();for(var hw=Uv.t;hw<=Vv.t;hw++){Tv.t=hw;for(var iw=Uv.G;iw<Vv.G;iw++){Tv.G=iw;var jw=Tv.je(g.eb().fb,Yv);if(jw==true){Qv=Ov.Jp(Ov,Tv,Qv);if(Qv.gw==true){R=true;hw=Vv.t;fw=Wv.G;ew=Wv.t;break;}}}}}}}return R;};ms.prototype.Zs=function (kw,du){var R=false;var Mv=this.Os(kw.us,du);if(Mv==false){return false;}var map=kw.map;var Bp=map.Cp.L();var lw=new g();var Dp=new g();var Ep=map.Fp;var mw=map.Ip;var Gp=map.zd;var nw=kw.bg.qd;var ow=new vs(new g(),map.Ip);for(var t=0;t<Ep.t;t++){Dp.t=t;lw.t=(t*mw.t)+nw.t-Gp.t;for(var G=0;G<Ep.G;G++){Dp.G=G;lw.G=(G*mw.G)+nw.G-Gp.G;Bp=map.Jp(map,Dp,Bp);if(Bp.gw==true){ow.vj.q(lw);var pw=this.Os(ow,du);if(pw==true){R=true;break;}}}}return R;};ms.prototype.bt=function (il,du){var R=true;var Yu=il.pl();var Iu=new Ss();for(var xl=0;xl<Yu.length;xl++){var yl=Yu[xl];Iu.Dl=yl.Dl();var Xs=this.Xs(Iu,du);if(Xs==false){R=false;break;}}return R;};ms.prototype.jt=function (du,us){return this.Os(us,du);};ms.prototype.kt=function (du,kw){return this.Zs(kw,du);};ms.prototype.lt=function (du,il){return this.bt(il,du);};ms.prototype.mt=function (du,qw){return this.dt(qw,du);};ms.prototype.nt=function (du,rw){return this.gt(rw,du);};ms.prototype.ot=function (du,sw){return this.ht(sw,du);};ms.prototype.pt=function (du,tw){return this.it(tw,du);};ms.prototype.qt=function (pv,qv){var Cn=this._Cn.q(qv.vj).P(pv.vj);var ku=Cn.lu();var mu=pv.Gj+qv.Gj;var R=(ku<mu);return R;};ms.prototype.gt=function (uw,vw){var R=true;var ww=uw.xw;for(var H=0;H<ww.length;H++){var yw=ww[H];var zw=this.St(yw,vw);if(zw==false){R=false;break;}}return R;};ms.prototype.ht=function (Aw,vw){var R=false;var ww=Aw.xw;for(var H=0;H<ww.length;H++){var yw=ww[H];var zw=this.St(yw,vw);if(zw==true){R=true;break;}}return R;};ms.prototype.dt=function (Bw,vw){return this.Ut(Bw.Cw,vw);};ms.prototype.it=function (Dw,vw){return (this.St(Dw.Cw,vw)==false);};ms.prototype.Ew=function (Cw,Fw){return this.gt(Fw,Cw);};ms.prototype.Gw=function (Fw,Cw){return this.gt(Fw,Cw);};ms.prototype.Hw=function (Cw,Fw){return this.ht(Fw,Cw);};ms.prototype.Iw=function (Bw,du){return this.dt(Bw,du);};ms.prototype.Jw=function (Fw,Cw){return this.ht(Fw,Cw);};ms.prototype.Kw=function (Dw,Cw){return this.it(Dw,Cw);};ms.prototype.rt=function (cv,dv){return cv.Lw(dv);};ms.prototype.Mw=function (us,Iu){return false;};ms.prototype.st=function (us,du){var Nw=new vs(du.vj,new g(1,1,1).ab(du.Gj*2));var R=us.Lw(Nw);return R;};ms.prototype.tt=function (Iu,us){var R=true;var ek=Gs.lv(us).ek;for(var H=0;H<ek.length;H++){var fk=ek[mv];if(Iu.jv(fk)==false){R=false;break;}}return R;};ms.prototype.ut=function (Iu,du){var Dl=Iu.Dl;var Ku=du.vj.ou(Dl.El)-Dl.Lu;var R=(Ku>=du.Gj);return R;};ms.prototype.vt=function (du,us){var Ow=new Cs(us.vj,us.or().lu());var R=du.Lw(Ow);return R;};ms.prototype.Pw=function (du,Iu){return false;};ms.prototype.wt=function (pv,qv){return pv.Lw(qv);};}function Qw(jh,target){this.jh=jh;this.target=target;}{Qw.prototype.Rw=function (j,Eb,Sw,Co){var Tw=this.yh(Eb);Tw.Rw(j,Eb,Sw,Co,this);};Qw.prototype.yh=function (Eb){return Eb.Uw.Vw[this.jh];};}function Ww(name,Rw){this.name=name;this.Rw=Rw;}{Ww.eb=function (){if(Ww._eb==null){Ww._eb=new Ww_eb();}return Ww._eb;};function Ww_eb(){this._Xw=new Ww("None",function Rw(j,Eb,Sw,Co,Yw){});this.Zw=new Ww("Attach",function Rw(j,Eb,Sw,Co,Yw){var ax=Yw.target;var target=ud.bx[ax];Co.bg.qd.q(target.bg.qd);});this.cx=new Ww("ContainInBounds",function Rw(j,Eb,Sw,Co,Yw){var ax=Yw.target;var target=ud.bx[ax];var dx=target.Ct().us(Eb);dx.ex(Co.bg.qd);});this.fx=new Ww("Friction",function Rw(j,Eb,Sw,Co,Yw){var gx=Yw.target;var hx=Co.ag.bg;var ix=hx.Wt;var jx=ix.lu();var kx=jx*gx;ix.Md(ix.L().ab(-kx));});this.lx=new Ww("FrictionDry",function Rw(j,Eb,Sw,Co,Yw){var gx=Yw.target;var kx=gx;var hx=Co.ag.bg;var ix=hx.Wt;var mx=ix.lu();if(mx<=kx){ix.clear();}else {var nx=ix.L().cn();ix.Md(nx.ab(-kx));}});this.ox=new Ww("Offset",function Rw(j,Eb,Sw,Co,Yw){var px=Yw.target;Co.bg.qd.Md(px);});this.qx=new Ww("OrientToward",function Rw(j,Eb,Sw,Co,Yw){var ax=Yw.target;var rx=Co.bg;var sx=rx.qd;var tx=rx.Rk;var ux=tx.nn;var target=ud.bx[ax];var vx=target.bg.qd;ux.q(vx).P(sx).cn();tx.wx(ux);});this.xx=new Ww("SpeedMax",function Rw(j,Eb,Sw,Co,Yw){var yx=Yw.target;var hx=Co.ag.bg;var ix=hx.Wt;var jx=ix.lu();if(jx>yx){ix.cn().ab(yx);}});this.zx=new Ww("StopBelowSpeedMin",function Rw(j,Eb,Sw,Co,Yw){var Ax=Yw.target;var hx=Co.ag.bg;var ix=hx.Wt;var jx=ix.lu();if(jx<Ax){ix.clear();}});this.Bx=new Ww("TrimToRange",function Rw(j,Eb,Sw,Co,Yw){var Cx=Yw.target;var hx=Co.ag.bg;hx.qd.Qo(Cx);});this.Dx=new Ww("WrapToRange",function Rw(j,Eb,Sw,Co,Yw){var Ex=Yw.target;var hx=Co.ag.bg;hx.qd.gq(Ex);});this.Fx=new Ww("WrapXTrimY",function Rw(j,Eb,Sw,Co,Yw){var hx=Co.ag.bg;var Gx=hx.qd;var or=Yw.target;while(Gx.G<0){Gx.G+=or.G;}while(Gx.G>=or.G){Gx.G-=or.G;}if(Gx.t<0){Gx.t=0;}else if(Gx.t>or.t){Gx.t=or.t;}});}}function g(G,t,qn){this.G=G;this.t=t;this.qn=qn;if(this.qn==null){this.qn=0;}}{g.em=3;g.eb=function (){if(g._eb==null){g._eb=new g_eb();}return g._eb;};function g_eb(){this.Hx=new g(-1,0,0);this.Ix=new g(1,1,1);this.Jx=new g(1,1,0);this.Kx=new g(1,0,0);this.Lx=new g(2,2,0);this.Mx=new g(0,0,1);this.Nx=new g(0,-1,0);this.Ox=new g(0,1,0);this.fb=new g(0,0,0);}g.prototype.Px=function (){this.G=Math.xr(this.G);this.t=Math.xr(this.t);this.qn=Math.xr(this.qn);return this;};g.prototype.Md=function (jn){this.G+=jn.G;this.t+=jn.t;this.qn+=jn.qn;return this;};g.prototype.qk=function (G,t,qn){this.G+=G;this.t+=t;this.qn+=qn;return this;};g.prototype.Qx=function (){this.G=Math.ceil(this.G);this.t=Math.ceil(this.t);this.qn=Math.ceil(this.qn);return this;};g.prototype.clear=function (){this.G=0;this.t=0;this.qn=0;return this;};g.prototype.M=function (){this.qn=0;return this;};g.prototype.L=function (){return new g(this.G,this.t,this.qn);};g.prototype.Rx=function (jn){return this.Tf(this.t*jn.qn-this.qn*jn.t,this.qn*jn.G-this.G*jn.qn,this.G*jn.t-this.t*jn.G);};g.prototype.zu=function (Sx,Se){var R;if(Sx==0){if(Se!=null){this.G=Se;}R=this.G;}else if(Sx==1){if(Se!=null){this.t=Se;}R=this.t;}else if(Sx==2){if(Se!=null){this.qn=Se;}R=this.qn;}return R;};g.prototype.Nl=function (){return [this.G,this.t,this.qn];};g.prototype.Tx=function (){if(this.G<0){this.G=-1;}else if(this.G>0){this.G=1;}if(this.t<0){this.t=-1;}else if(this.t>0){this.t=1;}if(this.qn<0){this.qn=-1;}else if(this.qn>0){this.qn=1;}return this;};g.prototype.r=function (jn){this.G/=jn.G;this.t/=jn.t;this.qn/=jn.qn;return this;};g.prototype.gn=function (hn){this.G/=hn;this.t/=hn;this.qn/=hn;return this;};g.prototype.ou=function (jn){return this.G*jn.G+this.t*jn.t+this.qn*jn.qn;};g.prototype.Ux=function (){return this.ab(2);};g.prototype.Vx=function (jn){return (this.G==jn.G&&this.t==jn.t&&this.qn==jn.qn);};g.prototype.floor=function (){this.G=Math.floor(this.G);this.t=Math.floor(this.t);this.qn=Math.floor(this.qn);return this;};g.prototype.Q=function (){return this.gn(2);};g.prototype.Xt=function (){this.G=0 -this.G;this.t=0 -this.t;this.qn=0 -this.qn;return this;};g.prototype.Wx=function (or){return this.je(g.eb().fb,or);};g.prototype.je=function (nr,or){var R=(this.G>=nr.G&&this.G<=or.G&&this.t>=nr.t&&this.t<=or.t&&this.qn>=nr.qn&&this.qn<=or.qn);return R;};g.prototype.lu=function (){return Math.sqrt(this.G*this.G+this.t*this.t+this.qn*this.qn);};g.prototype.w=function (jn){this.G*=jn.G;this.t*=jn.t;this.qn*=jn.qn;return this;};g.prototype.Xx=function (G,t,qn){this.G*=G;this.t*=t;this.qn*=qn;return this;};g.prototype.ab=function (hn){this.G*=hn;this.t*=hn;this.qn*=hn;return this;};g.prototype.cn=function (){var lu=this.lu();if(lu>0){this.gn(lu);}return this;};g.prototype.q=function (jn){this.G=jn.G;this.t=jn.t;this.qn=jn.qn;return this;};g.prototype.Tf=function (G,t,qn){this.G=G;this.t=t;this.qn=qn;return this;};g.prototype.Yx=function (){return this.G*this.t*this.qn;};g.prototype.Zx=function (){this.G=Math.random();this.t=Math.random();this.qn=Math.random();return this;};g.prototype.on=function (){var re=this.t;this.t=this.G;this.G=0 -re;return this;};g.prototype.round=function (){this.G=Math.round(this.G);this.t=Math.round(this.t);this.qn=Math.round(this.qn);return this;};g.prototype.P=function (jn){this.G-=jn.G;this.t-=jn.t;this.qn-=jn.qn;return this;};g.prototype.tr=function (jn,or){this.G=this.G.tr(jn.G,or);this.t=this.t.tr(jn.t,or);this.qn=this.qn.tr(jn.qn,or);return this;};g.prototype.ay=function (){return this.G+this.t+this.qn;};g.prototype.by=function (cy){var lu=this.lu();if(lu>cy){this.gn(lu).ab(cy);}return this;};g.prototype.Qo=function (or){if(this.G<0){this.G=0;}else if(this.G>or.G){this.G=or.G;}if(this.t<0){this.t=0;}else if(this.t>or.t){this.t=or.t;}if(this.qn<0){this.qn=0;}else if(this.qn>or.qn){this.qn=or.qn;}return this;};g.prototype.af=function (nr,or){if(this.G<nr.G){this.G=nr.G;}else if(this.G>=or.G){this.G=or.G;}if(this.t<nr.t){this.t=nr.t;}else if(this.t>=or.t){this.t=or.t;}if(this.qn<nr.qn){this.qn=nr.qn;}else if(this.qn>=or.qn){this.qn=or.qn;}return this;};g.prototype.gq=function (or){while(this.G<0){this.G+=or.G;}while(this.G>=or.G){this.G-=or.G;}while(this.t<0){this.t+=or.t;}while(this.t>=or.t){this.t-=or.t;}if(or.qn>0){while(this.qn<0){this.qn+=or.qn;}while(this.qn>=or.qn){this.qn-=or.qn;}}return this;};g.prototype.toString=function (){return this.G+"x"+this.t+"x"+this.qn;};g.prototype.dy=function (){return this.G+"x"+this.t;};}function yd(qd,Rk,ey){this.qd=qd;if(Rk==null){Rk=fy.eb().gy.L();}this.Rk=Rk;this.ey=ey;this.Wt=new g(0,0,0);this.qu=new g(0,0,0);this.hy=new g(0,0,0);this.iy=new jy(this.Rk.pn,new ky(0));this.ly=0;}{yd.prototype.L=function (){var R=new yd(this.qd.L(),this.Rk.L(),this.ey);R.Wt=this.Wt.L();R.qu=this.qu.L();R.hy=this.hy.L();R.ly=this.ly;return R;};yd.prototype.q=function (jn){this.ey=jn.ey;this.qd.q(jn.qd);this.Rk.q(jn.Rk);this.Wt.q(jn.Wt);this.qu.q(jn.qu);this.hy.q(jn.hy);return this;};yd.prototype.toString=function (){return this.qd.L().round().toString();};}function fy(nn,pn){this.nn=nn.L().cn();this.on=pn.L().Rx(this.nn).cn();this.pn=this.nn.L().Rx(this.on).cn();this.my=[this.nn,this.on,this.pn];this.ny=[this.on,this.pn,this.nn];}{fy.eb=function (){if(fy._eb==null){fy._eb=new fy_eb();}return fy._eb;};function fy_eb(){this.gy=new fy(new g(1,0,0),new g(0,0,1));this.oy=new fy(new g(0,0,1),new g(0,1,0));}fy.prototype.L=function (){return new fy(this.nn.L(),this.pn.L());};fy.prototype.wx=function (Cb){this.nn.q(Cb);return this.py();};fy.prototype.qy=function (nn,pn){this.nn.q(nn);this.pn.q(pn);return this.py();};fy.prototype.py=function (Cb){this.nn.cn();this.on.q(this.pn).Rx(this.nn).cn();this.pn.q(this.nn).Rx(this.on).cn();return this;};fy.prototype.q=function (jn){this.nn.q(jn.nn);this.on.q(jn.on);this.pn.q(jn.pn);return this;};fy.prototype.ry=function (sy){sy.Tf(sy.ou(this.nn),sy.ou(this.on),sy.ou(this.pn));return sy;};fy.prototype.ty=function (sy){var R=new g(0,0,0);var uy=new g();for(var H=0;H<this.my.length;H++){var vy=this.my[H];uy.q(vy).ab(sy.zu(H));R.Md(uy);}return sy.q(R);};fy.prototype.gs=function (sy){sy.Tf(sy.ou(this.on),sy.ou(this.pn),sy.ou(this.nn));return sy;};fy.prototype.fs=function (sy){var R=new g(0,0,0);var uy=new g();for(var H=0;H<this.ny.length;H++){var vy=this.ny[H];uy.q(vy).ab(sy.zu(H));R.Md(uy);}return sy.q(R);};fy.prototype.ip=function (){var R;var nn=this.nn;if(nn.G==0 &&nn.t==0){R=null;}else {R=Math.atan2(nn.t,nn.G)/(Math.PI*2);if(R<0){R+=1;}R=R.Hf(0,1);}return R;};}function Cj(Yp,Gj,wy){this.Yp=Yp;this.Gj=Gj;this.wy=(wy==null?0 :wy);}{Cj.sj=Math.PI*2;Cj.prototype.xy=function (yy){this.Yp+=yy;return this;};Cj.prototype.zy=function (qq){this.Yp=Math.atan2(qq.t,qq.G)/Cj.sj;if(this.Yp<0){this.Yp+=1;}this.Gj=qq.lu();this.wy=Math.asin(qq.qn/this.Gj)/Cj.sj;return this;};Cj.prototype.q=function (jn){this.Yp=jn.Yp;this.Gj=jn.Gj;this.wy=jn.wy;return this;};Cj.prototype.Ay=function (Yp,Gj,wy){this.Yp=Yp;this.Gj=Gj;if(wy!=null){this.wy=wy;}return this;};Cj.prototype.random=function (){this.Yp=Math.random();this.wy=Math.random();return this;};Cj.prototype.Dj=function (sy){var By=this.Yp*Cj.sj;var Cy=this.wy*Cj.sj;var Dy=Math.cos(Cy);sy.Tf(Math.cos(By)*Dy,Math.sin(By)*Dy,Math.sin(Cy)).ab(this.Gj);return sy;};Cj.prototype.Ey=function (){while(this.Yp<0){this.Yp++;}while(this.Yp>=1){this.Yp--;}return this;};}function Fy(Gy,G,t,qn){this.Gy=Gy;this.G=G;this.t=t;this.qn=qn;}{Fy.Hy=function (Iy,Jy){var Ky=Jy*Math.PI;var Ly=Math.sin(Ky);var Gy=Math.cos(Ky);var G=Iy.G*Ly;var t=Iy.t*Ly;var qn=Iy.qn*Ly;var R=new Fy(Gy,G,t,qn).cn();return R;};Fy.prototype.My=function (Ny){var Oy=new Fy(0,Ny.G,Ny.t,Ny.qn);var Py=this.L().w(Oy).w(this.L().Xt());Ny.q(Py);return Ny;};Fy.prototype.L=function (){return new Fy(this.Gy,this.G,this.t,this.qn);};Fy.prototype.r=function (Qy){this.Gy/=Qy;this.G/=Qy;this.t/=Qy;this.qn/=Qy;return this;};Fy.prototype.Xt=function (){var lu=this.lu();this.r(lu*lu);this.G*=-1;this.t*=-1;this.qn*=-1;return this;};Fy.prototype.w=function (jn){return this.Ry(this.Gy*jn.Gy-this.G*jn.G-this.t*jn.t-this.qn*jn.qn,this.Gy*jn.G+this.G*jn.Gy+this.t*jn.qn-this.qn*jn.t,this.Gy*jn.t-this.G*jn.qn+this.t*jn.Gy+this.qn*jn.G,this.Gy*jn.qn+this.G*jn.t-this.t*jn.G+this.qn*jn.Gy);};Fy.prototype.lu=function (){return Math.sqrt(this.Gy*this.Gy+this.G*this.G+this.t*this.t+this.qn*this.qn);};Fy.prototype.cn=function (){return this.r(this.lu());};Fy.prototype.q=function (jn){this.Ry(jn.Gy,jn.G,jn.t,jn.qn);return this;};Fy.prototype.Ry=function (Gy,G,t,qn){this.Gy=Gy;this.G=G;this.t=t;this.qn=qn;return this;};}function ys(nr,or){this.nr=nr;this.or=or;}{ys.prototype.L=function (){return new ys(this.nr,this.or);};ys.prototype.Fu=function (jn){this.nr=(this.nr>=jn.nr?this.nr:jn.nr);this.or=(this.or<=jn.or?this.or:jn.or);return this;};ys.prototype.Gu=function (){return (this.nr+this.or)/2;};ys.prototype.Du=function (jn){var R=((this.nr>jn.nr&&this.nr<jn.or)||(this.or>jn.nr&&this.or<jn.or)||(jn.nr>this.nr&&jn.nr<this.or)||(jn.or>this.nr&&jn.or<this.or));return R;};ys.prototype.q=function (jn){this.nr=nr;this.or=or;return this;};}function jy(vy,Sy){this.vy=vy;this.Sy=Sy;}{jy.prototype.Ty=function (){return this.Sy.Cb;};jy.prototype.Uy=function (Vy){var Xp=new Cj().zy(Vy);Xp.Yp=(Xp.Yp+this.Ty()).Hf(0,1);return Xp.Dj(Vy);};jy.prototype.Wy=function (Rk){Rk.wx(this.Uy(Rk.nn));};}function Xy(So,To){this.So=So;this.To=To;this._Ct=new Hs([this.So,this.To]);}{Xy.prototype.Ct=function (){return this._Ct;};}function vs(vj,k){this.vj=vj;this.k=k;this.zd=this.k.L().Q();this._nr=new g();this._or=new g();}{vs.prototype.Lw=function (jn){return (this.jv(jn.nr())&&this.jv(jn.or()));};vs.prototype.jv=function (Yy){return Yy.je(this.nr(),this.or());};vs.prototype.or=function (){return this._or.q(this.vj).Md(this.zd);};vs.prototype.nr=function (){return this._nr.q(this.vj).P(this.zd);};vs.prototype.Zy=function (Vp){var az=Vp[0];var bz=this._nr.q(az);var cz=this._or.q(az);for(var H=1;H<Vp.length;H++){var dz=Vp[H];if(dz.G<bz.G){bz.G=dz.G;}else if(dz.G>cz.G){cz.G=dz.G;}if(dz.t<bz.t){bz.t=dz.t;}else if(dz.t>cz.t){cz.t=dz.t;}if(dz.qn<bz.qn){bz.qn=dz.qn;}else if(dz.qn>cz.qn){cz.qn=dz.qn;}}this.vj.q(bz).Md(cz).Q();this.k.q(cz).P(bz);this.zd.q(this.k).Q();return this;};vs.prototype.Du=function (jn){var R=false;var ez=[[this.nr().Nl(),this.or().Nl()],[jn.nr().Nl(),jn.or().Nl()]];for(var lr=0;lr<ez.length;lr++){var fz=ez[lr];var gz=ez[1 -lr];var hz=fz[0];var iz=fz[1];var jz=gz[0];var kz=gz[1];var lz=true;for(var xu=0;xu<hz.length;xu++){if(iz[xu]<=jz[xu]||hz[xu]>=kz[xu]){lz=false;break;}}if(lz==true){R=true;break;}}return R;};vs.prototype.mz=function (){this.zd.q(this.k).Q();};vs.prototype.ex=function (nz){return nz.af(this.nr(),this.or());};vs.prototype.toString=function (){return this.nr().toString()+":"+this.or().toString();};}function Ms(vj,Gj,length){this.vj=vj;this.Gj=Gj;this.length=length;this.gv=this.length/2;}function Ws(ek){this.ek=ek;this._de=new g();this._Cn=new g();this._oz=new g();}{Ws.prototype.us=function (){if(this._us==null){this._us=new vs(new g(),new g());}this._us.Zy(this.ek);return this._us;};Ws.prototype.de=function (){return this._de.q(this.Cn()).cn();};Ws.prototype.Cn=function (){return this._Cn.q(this.ek[1]).P(this.ek[0]);};Ws.prototype.length=function (){return this.Cn().lu();};Ws.prototype.oz=function (Cl){return this._oz.q(this.de()).Rx(Cl);};Ws.prototype.toString=function (){return this.ek.toString();};}function Qs(ek){this.ek=ek;}{Qs.prototype.us=function (){if(this._us==null){this._us=new vs(new g(0,0,0),new g(0,0,0));}this._us.Zy(this.ek);return this._us;};Qs.prototype.jv=function (Yy){var R=true;var pz=this.pz();var El=this.Dl.El;for(var qz=0;qz<pz.length;qz++){var Ou=pz[qz];var rz=Ou.oz(El).ou(Yy);var sz=(rz>0);if(sz==false){R=false;break;}}return R;};Qs.prototype.pz=function (){if(this._pz==null){this._pz=[];for(var mv=0;mv<this.ek.length;mv++){var tz=(mv+1).Hf(0,this.ek.length);var fk=this.ek[mv];var uz=this.ek[tz];var Ou=new Ws([fk,uz]);this._pz.push(Ou);}}return this._pz;};Qs.prototype.Dl=function (){if(this._Dl==null){this._Dl=new Or(new g(),0);}this._Dl.as(this.ek[0],this.ek[1],this.ek[2]);return this._Dl;};}function Ss(Dl){this.Dl=Dl;}{Ss.prototype.jv=function (Yy){var vz=Yy.ou(this.Dl.El)-this.Dl.Lu;var R=(vz>0);return R;};}function wz(Fp,Ip,Cp,Jp,xz){this.Fp=Fp;this.Ip=Ip;this.Cp=Cp;this.Jp=Jp;this.xz=xz;this.Zv=this.Fp.L().P(g.eb().Ix);this.k=this.Fp.L().w(this.Ip);this.zd=this.k.L().Q();this.yz=this.Ip.L().Q();this.zz=new g();}{wz.prototype.Az=function (cq,Bz){this.zz.q(cq).r(this.Ip).floor();return this.Jp(this.zz);};wz.prototype.Cz=function (){return this.Fp.G*this.Fp.t;};}function Dz(){}{Dz.prototype.L=function (){return new Dz();};}function Fs(map,bg){this.map=map;this.bg=bg;this.us=new vs(this.bg.qd,this.map.k);}function Gs(vj,Ez,Mn){this.vj=vj;this.Ez=Ez;this.Mn=Mn;}{Gs.Fz=function (vj,k){var us=new vs(vj,k);var R=Gs.lv(us);return R;};Gs.Gz=function (vj){if(vj==null){vj=new g(0,0,0);}var k=new g(2,2,2);var R=Gs.Fz(vj,k);return R;};Gs.lv=function (us){var zd=us.zd;var nr=new g(-zd.G,-zd.t,-zd.qn);var or=new g(zd.G,zd.t,zd.qn);var Ez=[new g(nr.G,nr.t,nr.qn),new g(or.G,nr.t,nr.qn),new g(or.G,or.t,nr.qn),new g(nr.G,or.t,nr.qn),new g(nr.G,nr.t,or.qn),new g(or.G,nr.t,or.qn),new g(or.G,or.t,or.qn),new g(nr.G,or.t,or.qn),];var Mn=[new Gs_Hz([0,1,5,4]),new Gs_Hz([1,2,6,5]),new Gs_Hz([2,3,7,6]),new Gs_Hz([3,0,4,7]),new Gs_Hz([0,3,2,1]),new Gs_Hz([4,5,6,7]),];var R=new Gs(us.vj,Ez,Mn);return R;};Gs.Iz=function (vj,Jz,Kz){var Hl=Jz.ek;var Lz=Hl.length;var Mz=Kz/2;var yv=[];var Mn=[];for(var qn=0;qn<2;qn++){var Nz=new g(0,0,(qn==0 ?-1 :1)).ab(Mz);var Oz=[];for(var mv=0;mv<Lz;mv++){var Ml=yv.length;if(qn==0){var Pz=(Ml+1
).Hf(0,Lz);var Qz=new Gs_Hz([Ml,Pz,Pz+Lz,Ml+Lz]);Mn.push(Qz);Oz.push(Ml);}else {Oz.cr(Ml,0);}var fk=Hl[mv].L().Md(Nz);yv.push(fk);}var Rz=new Gs_Hz(Oz);Mn.push(Rz);}var R=new Gs(vj,yv,Mn);return R;};Gs.prototype.us=function (){if(this._us==null){this._us=new vs(new g(),new g());}this._us.Zy(this.ek());return this._us;};Gs.prototype.pl=function (){var ek=this.ek();if(this._pl==null){this._pl=[];for(var xl=0;xl<this.Mn.length;xl++){var Sz=this.Mn[xl];var yl=Sz.Tz(ek);this._pl.push(yl);}}return this._pl;};Gs.prototype.ek=function (){if(this._ek==null){this._ek=[];for(var mv=0;mv<this.Ez.length;mv++){this._ek.push(new g());}}for(var mv=0;mv<this._ek.length;mv++){var fk=this._ek[mv];var Uz=this.Ez[mv];fk.q(this.vj).Md(Uz);}return this._ek;};Gs.prototype.Pn=function (Qn){for(var mv=0;mv<this.Ez.length;mv++){var Uz=this.Ez[mv];Qn.Uy(Uz);}this.ek();return this;};Gs.prototype.L=function (){return new Gs(this.vj.L(),this.Ez.L(),this.Mn.L());};Gs.prototype.q=function (jn){this.vj.q(jn.vj);this.Ez.q(jn.Ez);this.Mn.q(jn.Mn);};}function Gs_Hz(yo){this.yo=yo;}{Gs_Hz.prototype.Tz=function (yv){var Hl=[];for(var Ll=0;Ll<this.yo.length;Ll++){var Ml=this.yo[Ll];var Vz=yv[Ml];Hl.push(Vz);}var R=new Qs(Hl);return R;};Gs_Hz.prototype.Wz=function (Pp){for(var H=0;H<this.yo.length;H++){var Ml=this.yo[H];Ml+=Pp;this.yo[H]=Ml;}};Gs_Hz.prototype.L=function (){return new Gs_Hz(this.yo.slice());};Gs_Hz.prototype.q=function (jn){this.yo.q(jn.yo);};}function Xz(Vp){this.Vp=Vp;}{Xz.prototype.L=function (){return new Xz(this.Vp.L());};Xz.prototype.q=function (jn){this.Vp.q(jn.Vp);return this;};Xz.prototype.Pn=function (Qn){Sn.Tn(Qn,this.Vp);return this;};}function Yz(){}{Yz.prototype.Zz=function (aA,bA){var cA=aA*2;var dA=1 /cA;var Xp=new Cj(0,1);var ek=[];for(var H=0;H<cA;H++){Xp.Gj=(H%2 ==0 ?1 :bA);var fk=Xp.Dj(new g());ek.push(fk);Xp.Yp+=dA;}var R=new Xz(ek);return R;};}function Or(El,Lu){this.El=El;this.Lu=Lu;this.eA=new g();}{Or.prototype.fA=function (dz){return dz.ou(this.El)-this.Lu;};Or.prototype.Vx=function (jn){return (this.El.Vx(jn.El)&&this.Lu==jn.Lu);};Or.prototype.as=function (az,gA,hA){this.El.q(gA).P(az).Rx(this.eA.q(hA).P(az)).cn();this.Lu=az.ou(this.El);return this;};Or.prototype.Mu=function (dz){return dz.q(this.El).ab(this.Lu);}}function iA(fk,de){this.fk=fk;this.de=de;}function ct(Cw){this.Cw=Cw;}function Hs(xw){this.xw=xw;}function et(xw){this.xw=xw;}function ft(Cw){this.Cw=Cw;}function jA(Zo,wj){this.Zo=Zo;this.wj=wj;this.Yo=new Cs(this.Zo.vj,this.wj);this._Ct=new Hs([this.Zo,new ft(new ct(this.Yo))]);}{jA.prototype.Ct=function (){return this._Ct;};}function Cs(vj,Gj){this.vj=vj;this.Gj=Gj;this._Cn=new g();}{Cs.prototype.Lw=function (jn){var kA=this._Cn.q(jn.vj).P(this.vj);var lA=kA.lu();var R=(lA+jn.Gj<=this.Gj);return R;};Cs.prototype.mA=function (){return new Cj(0,this.Gj).random().Dj(new g()).Md(this.vj);};}function nA(fk,oA,pA){this.fk=fk;this.oA=oA;this.pA=pA;this.qA=new Cj(0,1);}{nA.prototype.Xo=function (){var R=(this.Vo()+this.pA).Hf(0,1
);return R;};nA.prototype.Vo=function (){return this.qA.zy(this.oA).Yp;};nA.prototype.Ct=function (){if(this._Ct==null){this.qA=new Cj(0,1);this.rA=new Cj(0,1);this.sA=new g();this.tA=new g();this.uA=new g();this.vA=new g();this.wA=new g();this.xA=new Or(new g());this.yA=new Or(new g());this.zA=[new Ss(this.xA),new Ss(this.yA)];this.rw=new Hs(this.zA);this.sw=new et(this.zA);}var Vo=this.Vo();var Xo=this.Xo();this.qA.Yp=Vo;this.qA.Dj(this.sA);this.rA.Yp=Xo;this.rA.Dj(this.tA);var pn=g.eb().Mx;this.uA.q(this.fk).Md(pn);this.vA.q(this.fk).Md(this.sA);this.wA.q(this.fk).Md(this.tA);this.xA.as(this.fk,this.vA,this.uA);this.yA.as(this.fk,this.uA,this.wA);if(this.pA<.5){this._Ct=this.rw;}else {this._Ct=this.sw;}return this._Ct;};}function AA(name,length,Rk,zb,BA){this.name=name;this.length=length;this.Rk=Rk;this.zb=zb;this.BA=(BA==null?true:BA);for(var H=0;H<this.zb.length;H++){var Td=this.zb[H];Td.CA=this.name;}}{AA.prototype.qd=function (DA){var R=new g(0,0,0);var EA=DA[this.CA];while(EA!=null){R.Md(EA.Rk.nn.L().ab(EA.length));EA=DA[EA.CA];}return R;};AA.prototype.L=function (){var FA=this.Rk.L();var R=new AA(this.name,this.length,FA,this.zb.L(),this.BA);return R;};AA.prototype.q=function (jn){this.Rk.q(jn.Rk);this.zb.q(jn.zb);};AA.prototype.Pn=function (Qn){var my=this.Rk.my;for(var H=0;H<my.length;H++){var vy=my[H];Qn.Uy(vy);}};}function GA(HA,IA){this.HA=HA;this.IA=IA;}{GA.JA=function (KA,Fn){var LA=[];for(var H=0;H<Fn.length;H++){var MA=Fn[H];var HA=MA.name;var EA=KA[HA];if(EA!=null){var NA=new GA(HA,MA.yo.slice());LA.push(NA);}}return LA;}}function OA(name,PA){this.name=name;this.PA=PA;this.DA=[];this.DA=QA.RA(this.PA,[]);this.DA.d("name");}{OA.prototype.Vx=function (jn){var R=true;for(var H=0;H<this.DA.length;H++){var SA=this.DA[H];var TA=jn.DA[H];if(SA.Rk.Vx(TA.Rk)==false){R=false;break;}}return R;};OA.prototype.L=function (jn){return new OA(this.name,this.PA.L());};OA.prototype.q=function (jn){for(var H=0;H<this.DA.length;H++){this.DA[H].q(jn.DA[H]);}};OA.prototype.Pn=function (Qn){for(var H=0;H<this.DA.length;H++){var EA=this.DA[H];EA.Pn(Qn);}};}function UA(){}{UA.VA=function (WA){var XA=WA/2;var YA=WA/2.4;var ZA=WA/3;var aB=WA/4;var bB=WA/6;var cB=WA/8;var dB=WA/9;var eB=WA/12;var fB=WA/18;var gB=new AA("Hip.R",eB,new fy(new g(-1,0,0),new g(0,0,1)),[new AA("Thigh.R",aB,new fy(new g(0,0,1),new g(-1,0,0)),[new AA("Shin.R",aB,new fy(new g(0,0,1),new g(1,0,0)),[new AA("Foot.R",cB,new fy(new g(0,1,0),new g(1,0,0)),[])]),])]);var hB=new AA("Hip.L",eB,new fy(new g(1,0,0),new g(0,0,1)),[new AA("Thigh.L",aB,new fy(new g(0,0,1),new g(-1,0,0)),[new AA("Shin.L",aB,new fy(new g(0,0,1),new g(1,0,0)),[new AA("Foot.L",cB,new fy(new g(0,1,0),new g(1,0,0)),[])]),])]);var iB=new AA("Spine.1",YA,new fy(new g(0,0,-1),new g(0,-1,0)),[new AA("Neck",eB,new fy(new g(0,0,-1),new g(0,1,0)),[new AA("Head.Back",fB,new fy(new g(0,0,-1),new g(0,1,0)),[new AA("Head.Front",dB,new fy(new g(0,1,0),new g(0,0,1)),[]),])]),new AA("Shoulder.L",bB,new fy(new g(1,0,0),new g(0,0,1)),[new AA("Bicep.L",bB,new fy(new g(0,-.1,1),new g(-1,0,0)),[new AA("Forearm.L",bB,new fy(new g(0,.1,1),new g(-1,0,0)),[])])]),new AA("Shoulder.R",bB,new fy(new g(-1,0,0),new g(0,0,1)),[new AA("Bicep.R",bB,new fy(new g(0,-.1,1),new g(-1,0,0)),[new AA("Forearm.R",bB,new fy(new g(0,.1,1),new g(-1,0,0)),[])])])]);var jB=new OA("Skeleton0",new AA("Root",XA,new fy(new g(0,0,-1),new g(0,1,0)),[gB,hB,iB,],false));/*jB.Pn(new Sn_kB([0,1]));jB.Pn(new Sn_lB(new g(-1,-1,1)));*/jB.Pn(new Sn_mB(new fy(new g(0,1,0),new g(0,0,1))));return jB;};UA.nB=function (){var R=new oB("Biped",[UA.pB(),UA.qB(),UA.rB(),]);return R;};UA.pB=function (){var R=new sB("DoSomething",[new tB(0,[new Sn_uB("Forearm.L",[.25 ]),new Sn_uB("Bicep.L",[.25,0,-.25 ]),new Sn_uB("Forearm.R",[.25 ]),new Sn_uB("Bicep.R",[.25,0,.25 ]),]),new tB(1,[new Sn_uB("Forearm.L",[.25 ]),new Sn_uB("Bicep.L",[.25,0,.25 ]),new Sn_uB("Forearm.R",[.25 ]),new Sn_uB("Bicep.R",[.25,0,-.25 ]),]),]);return R;};UA.qB=function (){var R=new sB("Jump",[new tB(0,[new Sn_uB("Thigh.L",[.25 ]),new Sn_uB("Shin.L",[.25 ]),new Sn_uB("Thigh.R",[.25 ]),new Sn_uB("Shin.R",[.25 ]),]),new tB(1,[new Sn_uB("Thigh.L",[.25 ]),new Sn_uB("Shin.L",[.25 ]),new Sn_uB("Thigh.R",[.25 ]),new Sn_uB("Shin.R",[.25 ]),]),]);return R;};UA.rB=function (){var vB=new sB("Walk",[new tB(0,[new Sn_uB("Bicep.L",[-.1 ]),new Sn_uB("Forearm.L",[0 ]),new Sn_uB("Thigh.L",[.1 ]),new Sn_uB("Shin.L",[0 ]),new Sn_uB("Bicep.R",[.1 ]),new Sn_uB("Forearm.R",[.1 ]),new Sn_uB("Thigh.R",[-.05 ]),new Sn_uB("Shin.R",[0 ]),]),new tB(5,[new Sn_uB("Thigh.L",[.1 ]),new Sn_uB("Shin.L",[.1 ]),new Sn_uB("Thigh.R",[-.1 ]),new Sn_uB("Shin.R",[0 ]),]),new tB(10,[new Sn_uB("Thigh.L",[0 ]),new Sn_uB("Shin.L",[0 ]),new Sn_uB("Thigh.R",[0 ]),new Sn_uB("Shin.R",[.1 ]),]),new tB(15,[new Sn_uB("Bicep.L",[.1 ]),new Sn_uB("Forearm.L",[.1 ]),new Sn_uB("Thigh.L",[-.05 ]),new Sn_uB("Bicep.R",[-.1 ]),new Sn_uB("Forearm.R",[0 ]),new Sn_uB("Thigh.R",[.1 ]),new Sn_uB("Shin.R",[0 ]),]),new tB(20,[new Sn_uB("Thigh.L",[-.1 ]),new Sn_uB("Shin.L",[0 ]),new Sn_uB("Thigh.R",[.1 ]),new Sn_uB("Shin.R",[.1 ]),]),new tB(25,[new Sn_uB("Thigh.L",[0 ]),new Sn_uB("Shin.L",[.1 ]),new Sn_uB("Thigh.R",[0 ]),new Sn_uB("Shin.R",[0 ]),]),new tB(30,[new Sn_uB("Bicep.L",[-.1 ]),new Sn_uB("Forearm.L",[0 ]),new Sn_uB("Thigh.L",[.1 ]),new Sn_uB("Shin.L",[0 ]),new Sn_uB("Bicep.R",[.1 ]),new Sn_uB("Forearm.R",[.1 ]),new Sn_uB("Thigh.R",[-.05 ]),new Sn_uB("Shin.R",[0 ]),]),]);return vB;};UA.wB_xB=function (yB,zB,AB){var ek=yB.ek;var KA=zB.DA;var BB=[];for(var mv=0;mv<ek.length;mv++){var fk=ek[mv];var CB=Number.DB_EB;var FB=null;for(var lr=0;lr<KA.length;lr++){var EA=KA[lr];var Cn=fk.L().P(EA.qd(KA).Md(EA.Rk.nn.L().ab(EA.length)));var ku=Cn.lu();if(ku<CB){CB=ku;FB=lr;}}var GB=KA[FB];var HB=GB.name;var NA=BB[HB];if(NA==null){NA=new GA(HB,[]);BB[HB]=NA;BB.push(NA);}NA.IA.push(mv);}var R=new IB(yB,zB,AB,BB);return R;};}function Sn_uB(HA,JB){this.HA=HA;this.JB=JB;this.ar=this.HA;}{Sn_uB.prototype.L=function (){return new Sn_uB(this.HA,this.JB);};Sn_uB.prototype.KB=function (jn,LB){var MB=[];for(var H=0;H<this.JB.length;H++){var NB=(1 -LB)*this.JB[H]+LB*jn.JB[H];MB[H]=NB;}var R=new Sn_uB(this.HA,MB);return R;};Sn_uB.prototype.Pn=function (OB){var PB=OB;var QB=PB.DA[this.HA];var RB=QB.Rk;var SB=[RB.pn,RB.on,RB.nn,];var TB=[];for(var H=0;H<this.JB.length;H++){var Iy=SB[H];var UB=this.JB[H];if(UB!=0){var VB=Fy.Hy(Iy,UB);TB.push(VB);}}this.Pn_AA(TB,QB)};Sn_uB.prototype.Pn_AA=function (TB,QB){var WB=QB.Rk.my;for(var H=0;H<TB.length;H++){var VB=TB[H];for(var mg=0;mg<WB.length;mg++){var XB=WB[mg];VB.My(XB);}}for(var H=0;H<QB.zb.length;H++){var YB=QB.zb[H];this.Pn_AA(TB,YB);}};}function Sn_ZB(yB,zB,AB,LA){this.yB=yB;this.zB=zB;this.AB=AB;this.LA=LA;this.LA.d("boneName");this._Rk=new fy(new g(),new g());this._fk=new g();}{Sn_ZB.prototype.aC=function (bC){var cC=this.yB.Bl.Ez;var dC=bC.Bl.Ez;var eC=this.zB.DA;var fC=this.AB.DA;for(var H=0;H<this.LA.length;H++){var NA=this.LA[H];var HA=NA.HA;var gC=eC[HA];var hC=fC[HA];var iC=gC.Rk;var IA=NA.IA;for(var Ll=0;Ll<IA.length;Ll++){var Ml=IA[Ll];var jC=cC[Ml];var kC=dC[Ml];var lC=gC.qd(eC);var mC=hC.qd(fC);var nC=this._fk.q(jC).P(lC);nC.Tf(nC.ou(iC.on),nC.ou(iC.pn),nC.ou(iC.nn));kC.q(mC);var oC=this._Rk.q(hC.Rk);kC.Md(oC.on.ab(nC.G)).Md(oC.pn.ab(nC.t)).Md(oC.nn.ab(nC.qn));}}};}function Sn(){}{Sn.pC=function (Qn,qC){if(qC==null){return ;}for(var H=0;H<qC.length;H++){var rC=qC[H];Sn.Tn(Qn,rC);}};Sn.Tn=function (Qn,sC){for(var H=0;H<sC.length;H++){Qn.Uy(sC[H]);}};}function Sn_Kr(Lk){this.Lk=Lk;this.tC=new Sn_uC(this.Lk.bg.qd);this.vC=new Sn_wC(this.Lk.bg.Rk);this.xC=new Sn_yC(this.Lk.Lr);this.zC=new Sn_Up(this.Lk.Mr);}{Sn_Kr.prototype.Uy=function (Vy){this.tC.Uy(Vy);this.vC.Uy(Vy);this.xC.Uy(Vy);this.zC.Uy(Vy);return Vy;};}function Sn_kB(AC){this.AC=AC;}{Sn_kB.prototype.Uy=function (Vy){var BC=this.AC[0];var CC=this.AC[1];var DC=Vy.zu(BC);var EC=Vy.zu(CC);Vy.zu(BC,EC);Vy.zu(CC,DC);return Vy;};}function Sn_FC(bg){this.bg=bg;this.GC=new Sn_mB();this.Tp=new Sn_Up();}{Sn_FC.prototype.Uy=function (Vy){this.GC.Rk=this.bg.Rk;this.GC.Uy(Vy);this.Tp.Cn=this.bg.qd;this.Tp.Uy(Vy);return Vy;};}function Sn_HC(IC){this.IC=IC;}{Sn_HC.prototype.Uy=function (Vy){for(var H=0;H<this.IC.length;H++){var Pn=this.IC[H];Pn.Uy(Vy);}return Vy;};}function Sn_mB(Rk){this.Rk=Rk;}{Sn_mB.prototype.Uy=function (Vy){Vy.Tf(this.Rk.nn.ou(Vy),this.Rk.on.ou(Vy),this.Rk.pn.ou(Vy));return Vy;};}function Sn_wC(Rk){this.Rk=Rk;}{Sn_wC.prototype.Uy=function (Vy){Vy.Tf(this.Rk.on.ou(Vy),this.Rk.pn.ou(Vy),this.Rk.nn.ou(Vy));return Vy;};}function JC(Rk){this.Rk=Rk;}{JC.prototype.Uy=function (Vy){Vy.Tf(Vy.ou(this.Rk.on),Vy.ou(this.Rk.pn),Vy.ou(this.Rk.nn));};}function Sn_yC(Lr){this.Lr=Lr;}{Sn_yC.prototype.Uy=function (Vy){var KC=Vy.qn;Vy.ab(this.Lr);if(KC!=0){Vy.gn(KC);}return Vy;};}function Sn_LC(MC){this.MC=MC;this._Xp=new Cj(0,1);}{Sn_LC.prototype.Uy=function (Vy){this._Xp.zy(Vy).xy(this.MC).Ey().Dj(Vy);return Vy;};}function Sn_NC(OC){this.OC=OC;}{Sn_NC.prototype.Uy=function (Vy){for(var H=0;H<this.OC;H++){var re=Vy.G;Vy.G=0 -Vy.t;Vy.t=re;}return Vy;};}function Sn_lB(PC){this.PC=PC;}{Sn_lB.prototype.Uy=function (Vy){return Vy.w(this.PC);};}function Sn_Up(Cn){this.Cn=Cn;}{Sn_Up.prototype.Uy=function (Vy){return Vy.Md(this.Cn);};}function Sn_uC(Cn){this.Cn=Cn;}{Sn_uC.prototype.Uy=function (Vy){return Vy.P(this.Cn);};}function QC(name){this.name=name;this.Ag=true;this.RC=0;}function SC(){this.Yd=new g();this.Zd=new g(0,0);this.vg=new g(0,0);this.TC=new g(0,0);this.UC=["ArrowLeft","ArrowRight","Tab"];}{SC.prototype.Db=function (j){this.yg=[];this.VC=[];document.body.onkeydown=this.WC.bind(this);document.body.onkeyup=this.XC.bind(this);var Fm=j.xk.Fm;Fm.onmousedown=this.YC.bind(this);Fm.onmouseup=this.ZC.bind(this);this.aD=true;if(this.aD==true){Fm.onmousemove=this.bD.bind(this);}this.cD();};SC.prototype.dD=function (Bg){if(this.yg[Bg]==null){var zg=new QC(Bg);this.yg[Bg]=zg;this.yg.push(zg);}};SC.prototype.Gg=function (eD){if(this.yg[eD]!=null){var fD=this.yg[eD];delete this.yg[eD];this.yg.Lc(fD);}};SC.prototype.gD=function (){for(var H=0;H<this.yg.length;H++){var hD=this.yg[H];this.Gg(hD);}};SC.prototype.iD=function (Cb){if(Cb==null){var zg=this.yg["MouseClick"];return (zg!=null&&zg.Ag==true);}else {if(Cb==true){this.dD("MouseClick");}else {this.Gg("MouseClick");}}};SC.prototype.wg=function (j){this.wg_jD(j);};SC.prototype.wg_jD=function (j){var kD=this.kD();for(var H=0;H<this.VC.length;H++){var lD=this.VC[H];var mD=kD[lD.dr];lD.nD(mD);var tg="Gamepad"+H;var oD=lD.oD;for(var mg=0;mg<oD.length;mg++){var pD=tg+"Move";var qD=oD[mg];if(qD==0){if(mg==0){this.Gg(pD+"Left");this.Gg(pD+"Right");}else {this.Gg(pD+"Up");this.Gg(pD+"Down");}}else {var rD;if(mg==0){rD=(qD<0 ?"Left":"Right");}else {rD=(qD<0 ?"Up":"Down");}this.dD(pD+rD);}}var sD=tg+"Button";var tD=lD.tD;for(var lr=0;lr<tD.length;lr++){var uD=tD[lr];if(uD==true){this.dD(sD+lr);}else {this.Gg(sD+lr);}}}};SC.prototype.WC=function (vD){var zg=vD.key;if(this.UC.lh(zg)==true){vD.preventDefault();}if(zg==" "){zg="_";}else if(zg=="_"){zg="__";}else if(isNaN(zg)==false){zg="_"+zg;}this.dD(zg);};SC.prototype.XC=function (vD){var fD=vD.key;if(fD==" "){fD="_";}else if(fD=="_"){fD="__";}else if(isNaN(fD)==false){fD="_"+fD;}this.Gg(fD);};SC.prototype.YC=function (vD){var zk=vD.target;var wD=zk.getBoundingClientRect();this.Yd.Tf(vD.clientX-wD.left,vD.clientY-wD.top,0
);this.dD("MouseClick");};SC.prototype.bD=function (vD){var zk=vD.target;var wD=zk.getBoundingClientRect();this.TC.Tf(vD.clientX-wD.left,vD.clientY-wD.top,0
);if(this.TC.Vx(this.Zd)==false){this.vg.q(this.Zd);this.Zd.q(this.TC);this.dD("MouseMove");}};SC.prototype.ZC=function (vD){this.Gg("MouseClick");};SC.prototype.cD=function (){var kD=this.kD();for(var H=0;H<kD.length;H++){var mD=kD[H];if(mD!=null){var lD=new xD(H);this.VC.push(lD);}}};SC.prototype.kD=function (){return navigator.getGamepads();};}function rg(inputName,Dg,Eg){this.inputName=inputName;this.Dg=Dg;this.Eg=Eg;}{rg.prototype.yD=function (j){return j.Eb.Uw.zD[this.Dg];};}function AD(name,BD){this.name=name;this.BD=BD;this.CD=false;this.DD();}{AD.prototype.DD=function (){var ED=document.createElement("style");ED.innerHTML="@font-face { "+"font-family: '"+this.name+"';"+"src: url('"+this.BD+"');";+"}";document.head.appendChild(ED);this.CD=true;};}function Fk(name,BD){this.name=name;this.BD=BD;this.CD=false;this.DD();}{Fk.Gk=function (name,Xj){var R=new Fk(name,Xj.src);R.Xj=Xj;R.vb=new g(Xj.width,Xj.height);R.CD=true;return R;};Fk.prototype.DD=function (){if(this.BD!=null){var Vn=this;var FD=document.createElement("img");FD.onload=function (vD){var GD=vD.target;Vn.CD=true;Vn.Xj=GD;Vn.vb=new g(GD.width,GD.height);};FD.src=this.BD;}};}function HD(rp,ID,JD,KD,LD){this.rp=rp.d("name");this.ID=ID.d("name");this.JD=JD.d("name");this.KD=KD.d("name");this.LD=LD.d("name");this.MD=[this.rp,this.ID,this.JD,this.KD,this.LD];this.MD["Images"]=this.rp;this.MD["Sounds"]=this.ID;this.MD["Videos"]=this.JD;this.MD["Fonts"]=this.KD;this.MD["TextStrings"]=this.LD;}{HD.prototype.ND=function (){var OD=true;for(var PD=0;PD<this.MD.length;PD++){var QD=this.MD[PD];for(var H=0;H<QD.length;H++){var pf=QD[H];if(pf.CD==false){OD=false;break;}}if(OD==false){break;}}return OD;};HD.prototype.RD=function (SD,TD,Wc){var UD=this.VD[SD][TD];this.WD=setInterval(this.RD_XD.bind(this,UD,Wc),100 );};HD.prototype.RD_XD=function (UD,Wc){if(UD.CD==true){clearInterval(this.WD);Wc.call();}};HD.prototype.YD=function (Wc){this.WD=setInterval(this.YD_XD.bind(this,Wc),100 );};HD.prototype.YD_XD=function (Wc){if(this.ND()==true){clearInterval(this.WD);Wc.call();}};HD.prototype.ZD=function (rp){for(var H=0;H<rp.length;H++){var Vn=rp[H];if(this.rp[Vn.name]==null){this.rp.push(Vn);this.rp[Vn.name]=Vn;}}};HD.prototype.aE=function (name){return this.KD[name];};HD.prototype.tp=function (name){return this.rp[name];};HD.prototype.bE=function (name){return this.ID[name];};HD.prototype.Fc=function (name){return this.LD[name];};HD.prototype.cE=function (name){return this.JD[name];};}function dE(name,BD,Ho){this.name=name;this.BD=BD;this.Ho=Ho;this.eE=0;this.fE=false;}{dE.prototype.gE=function (j,hE){this.dd=document.createElement("audio");this.dd.iE=this;this.dd.jE=true;this.dd.kE=this.lE.bind(this,j);this.dd.mE=this.Ho;this.dd.hE=hE;var nE=document.createElement("source");nE.src=this.BD;this.dd.appendChild(nE);return this.dd;};dE.prototype.oE=function (j){var eE=this.dd.pE;this.Mj(j);this.eE=eE;};dE.prototype.qE=function (j,hE){if(this.fE==false){this.fE=true;this.gE(j,hE);this.dd.pE=this.eE;j.xk.Bk(this.dd);}};dE.prototype.Ib=function (){this.eE=0;};dE.prototype.Mj=function (j,vD){if(this.fE==true){this.fE=false;var dd=(vD==null?this.dd:vD.rE);j.xk.yk(dd);this.eE=0;}};dE.prototype.lE=function (j,vD){if(this.Ho==false){this.Mj(j,vD);}};}function tb(ID){this.ID=ID;this.ID.d("name");this.sE=1;this.tE=1;this.uE=null;}{tb.ub=function (){var R=[new Gf(1,"100%"),new Gf(0,"0%"),new Gf(.1,"10%"),new Gf(.2,"20%"),new Gf(.3,"30%"),new Gf(.4,"40%"),new Gf(.5,"50%"),new Gf(.6,"60%"),new Gf(.7,"70%"),new Gf(.8,"80%"),new Gf(.9,"90%"),];return R;};tb.prototype.Ib=function (){for(var H=0;H<this.ID.length;H++){var iE=this.ID[H];iE.eE=0;}};tb.prototype.vE=function (j,wE){this.ID[wE].qE(j,this.tE);};tb.prototype.xE=function (j,yE){var zE=this.ID[yE];var AE=this.uE;if(AE!=null){if(AE.name!=yE){AE.Mj(j);}}zE.qE(j,this.sE);this.uE=zE;};}function BE(name,BD){this.name=name;this.BD=BD;this.DD();}{BE.CE=function (name,Cb){var R=new (name,null);R.Cb=Cb;return R;};BE.prototype.DD=function (){var text=this;var DE=new XMLHttpRequest();DE.open("GET",this.BD);DE.onreadystatechange=function (){text.Cb=DE.responseText;text.CD=true;};DE.send();};}function Kc(EE,jb){this.EE=EE;this.jb=jb;this.FE=false;this.qg=[new rg("Escape","VideoSkip",true),new rg("Gamepad0Button0","VideoSkip",true),].d("inputName");}{Kc.prototype.Kd=function (){};Kc.prototype.wg=function (j){if(this.GE==null){j.o.wk(j);this.GE=j.HE.JD[this.EE];this.GE.qE(j);}if(this.GE.IE==false){var JE=false;var xg=j.xg;if(xg.iD()==true){xg.iD(false);JE=true;}else {var yg=xg.yg;for(var H=0;H<yg.length;H++){var zg=yg[H];if(zg.Ag==true){var KE=this.qg[zg.name];if(KE!=null){zg.Ag=false;var Dg=KE.Dg;if(Dg=="VideoSkip"){JE=true;}}}}}if(JE==true){this.GE.Mj(j);}}if(this.GE.IE==true){var o=j.o;o.Ej("Black","Black");o.Ck(j);j.jb=new nb(this.jb,this);}};}function LE(name,BD){this.name=name;this.BD=BD;}{LE.prototype.gE=function (j){this.dd=document.createElement("video");this.dd.src=this.BD;this.dd.GE=this;this.dd.jE=true;this.dd.kE=this.Mj.bind(this,j);var N=j.o.vb;this.dd.width=N.G;this.dd.height=N.t;return this.dd;};LE.prototype.qE=function (j){this.IE=false;j.xk.Bk(this.gE(j));};LE.prototype.Mj=function (j,vD){var dd=(vD==null?this.dd:vD.rE);j.xk.yk(dd);this.IE=true;};}function ME(JD){this.JD=JD;this.JD.d("name");}function NE(OE){this.OE=OE;}{NE.prototype.Kd=function (j,Eb,o,Zf,Co){j.sb.vE(j,this.OE);};}function PE(name,QE){this.name=name;this.QE=QE;}{PE.eb=function (){if(PE._eb==null){PE._eb=new PE_eb();}return PE._eb;};function PE_eb(){this.RE=new PE("DoNothing",function (SE){})}}function TE(UE,target){this.UE=UE;this.target=target;}{TE.prototype.wg=function (j,Eb,Sw,Co){this.UE(j,Eb,Sw,Co,this.target);}}function Bt(Ct,VE,WE){this.Ct=Ct;this.VE=VE;this.WE=WE;if(this.VE==null){this.VE=[];}this.XE=0;this.YE=null;}{Bt.prototype.wg=function (j,Eb,Sw,Co){if(this.XE>0){this.XE--;}else {for(var ZE=0;ZE<this.VE.length;ZE++){var aF=this.VE[ZE];var bF=Sw.cF(aF);if(bF!=null){for(var qz=0;qz<bF.length;qz++){var dF=bF[qz];if(dF!=Co){var eF=dF.Bt;var fF=(eF.XE==0);if(fF){var gF=Co.Bt.Ct;var hF=eF.Ct;var iF=j.iF;var jF=iF.St(gF,hF);if(dF==this.YE){if(jF){jF=false;}else {this.YE=null;}}if(jF){this.WE(j,Eb,Sw,Co,dF);}}}}}}}};}function kF(lF){this.lF=lF;}{kF.Rw=function (j,Eb,Sw,Co){var mF=Co.kF;var lF=mF.lF;for(var H=0;H<lF.length;H++){var Yw=lF[H];Yw.Rw(j,Eb,Sw,Co);}};kF.prototype.wg=function (j,Eb,Sw,Co){kF.Rw(j,Eb,Sw,Co);};}function nF(oF){this.oF=oF;}function pF(Vw){this.Vw=Vw.d("name");}function qF(name,rF,sF){this.name=name;this.rF=rF;this.sF=sF;this.tF=0;}{qF.uF=function (){var R=new qF("Gun",10,function sF(j,Eb,Sw,SE,vF){if(vF.wF(Eb)<vF.rF){return ;}vF.xF(Eb);var yF=SE.ag.bg;var zF=yF.qd;var AF=yF.Wt;var BF=AF.lu();if(BF==0){return ;}var CF="Cyan";var DF=3;var EF=new op([new cp(DF,CF),new Op(new nq("Projectile",CF),new g(0,DF))]);EF=new ap(EF,Sw.Lk);var FF=AF.L().cn();var GF=SE.Bt.Ct.Gj;var HF=zF.L().Md(FF.L().ab(GF).Ux().Ux());var IF=new yd(HF);IF.Wt.q(AF).Ux();var JF=new Cs(HF,DF);var KF=function (j,Eb,Sw,LF,dF){if(dF.MF!=null){Sw.NF.push(dF);}};var OF=new PF("Projectile",[new nF(1),new QF(32),new ag(IF),new Bt(JF,[MF.name],KF),new RF(EF)]);Sw.SF.push(OF);});return R;};qF.prototype.xF=function (Eb){this.tF=Eb.TF;};qF.prototype.wF=function (Eb){return Eb.TF-this.tF;};qF.prototype.L=function (){return new qF(this.name,this.rF,this.UF,this.sF);};}function RF(Yf){this.Yf=Yf;}{RF.prototype.wg=function (j,Eb,Sw,Co){this.bg=Co.ag.bg;this.Yf.Kd(j,Eb,j.o,this,Co);};}function PF(name,VF){this.name=name;this.VF=VF;for(var H=0;H<this.VF.length;H++){var WF=this.VF[H];var ar=WF.constructor.name;this[ar]=WF;}}function QF(XF,YF){this.XF=XF;this.YF=YF;}{QF.prototype.wg=function (j,Eb,Sw,ZF){this.XF--;if(this.XF<=0){Sw.NF.push(ZF);if(this.YF!=null){this.YF(j,Eb,Sw,ZF);}}};}function aG(bG){this.bG=bG;}function cG(){}{cG.prototype.wg=function (j,Eb,Sw,dG){var eG=dG.ag.bg;eG.Rk.wx(g.eb().fb);};}function fG(jh,gG){this.jh=jh;this.gG=gG;}{fG.prototype.yh=function (Eb){return Eb.Uw.hG[this.jh];};fG.prototype.toString=function (){return this.jh+" ("+this.gG+")";};}function iG(name){this.name=name;}function jG(kG){this.kG=kG||[];for(var H=0;H<this.kG.length;H++){var lG=this.kG[H];this.mG(lG);}}{jG.prototype.nG=function (oG){var pG=this.kG[oG.jh];var qG=(pG==null?0 :pG.fG.gG);var R=(qG>=oG.gG);return R;};jG.prototype.mG=function (rG){var sG=rG.fG;var tG=sG.jh;var pG=this.kG[tG];if(pG==null){this.kG.push(rG);this.kG[tG]=rG;}else {pG.fG.gG+=sG.gG;}};jG.prototype.uG=function (vG){var tG=vG.jh;var pG=this.kG[tG];if(pG!=null){this.kG.Lc(pG);delete this.kG[tG];}};jG.prototype.wG=function (xG){var tG=xG.jh;var pG=this.kG[tG];if(pG!=null){var yG=pG.fG;yG.gG-=xG.gG;if(yG.gG<=0){this.kG.Lc(pG);delete this.kG[tG];}}};jG.prototype.zG=function (jn){for(var H=0;H<this.kG.length;H++){var lG=this.kG[H];jn.mG(lG);this.uG(lG.fG);}};}function MF(AG,BG){this.AG=AG;this.BG=BG;}{MF.prototype.wg=function (j,Eb,Sw,CG){if(this.AG<=0){Sw.NF.push(CG);if(this.BG!=null){this.BG(j,Eb,Sw,CG);}}};}function ag(bg){this.bg=bg;}{ag.prototype.wg=function (j,Eb,Sw,Co){var bg=this.bg;bg.Wt.Md(bg.qu);bg.qu.clear();bg.qd.Md(bg.Wt);var iy=bg.iy;if(iy.Ty()!=0){bg.iy.Wy(bg.Rk);}};}function DG(EG){this.EG=EG;}{DG.prototype.wg=function (j,Eb,Sw,Co){};}function FG(GG){this.GG=[];this._cF={};this.SF=GG.slice();this.NF=[];this.HG=[ag.name,kF.name,Bt.name,cG.name,TE.name,IG.name,QF.name,MF.name,];}{FG.prototype.Kd=function (j,Eb){var JG=this.cF(RF.name);for(var H=0;H<JG.length;H++){var Co=JG[H];var Zf=Co.RF;Zf.wg(j,Eb,this,Co);}};FG.prototype.cF=function (ar){var gi=this._cF[ar];if(gi==null){gi=[];this._cF[ar]=gi;}return gi;};FG.prototype.KG=function (){for(var H=0;H<this.NF.length;H++){var Co=this.NF[H];this.LG(Co);}this.NF.clear();};FG.prototype.MG=function (j,Eb){for(var H=0;H<this.SF.length;H++){var Co=this.SF[H];this.NG(j,Eb,Co);}this.SF.clear();};FG.prototype.LG=function (Co){var OG=Co.VF;for(var ZE=0;ZE<OG.length;ZE++){var WF=OG[ZE];var ar=WF.constructor.name;var bF=this.cF(ar);bF.Lc(Co);}this.GG.Lc(Co);delete this.GG[Co.name];};FG.prototype.NG=function (j,Eb,Co){this.GG.push(Co);this.GG[Co.name]=Co;var OG=Co.VF;for(var ZE=0;ZE<OG.length;ZE++){var WF=OG[ZE];var ar=WF.constructor.name;var bF=this.cF(ar);bF.push(Co);if(WF.Db!=null){WF.Db(j,Eb,this,Co);}}};FG.prototype.PG=function (j,Eb){j.xg.gD();};FG.prototype.Db=function (j,Eb){};FG.prototype.wg=function (j,Eb){this.KG();this.MG(j,Eb);for(var ZE=0;ZE<this.HG.length;ZE++){var ar=this.HG[ZE];var bF=this.cF(ar);if(bF!=null){for(var H=0;H<bF.length;H++){var Co=bF[H];var QG=Co[ar];QG.wg(j,Eb,this,Co);}}}};}function RG(k,SG){this.k=k;var TG=this.k.L().Q();var UG=TG.G;this.Lk=new Kr(TG,UG,new yd(new g(0,0,-UG),fy.eb().oy.L()));var VG=g.eb();this.zD=[PE.eb().RE,new PE("ShowMenu",function QE(j,Eb,Sw,SE){var jb=new kb(j.lb.ib(j));jb=new nb(jb,j.ob);j.jb=jb;}),new PE("MoveDown",function QE(j,Eb,Sw,SE){Sw.WG(Eb,SE,VG.Ox);}),new PE("MoveLeft",function QE(j,Eb,Sw,SE){Sw.WG(Eb,SE,VG.Hx);}),new PE("MoveRight",function QE(j,Eb,Sw,SE){Sw.WG(Eb,SE,VG.Kx);}),new PE("MoveUp",function QE(j,Eb,Sw,SE){Sw.WG(Eb,SE,VG.Nx);}),new PE("Fire",function QE(j,Eb,Sw,SE){var XG=new fG("Weapon",1);var YG=SE.jG;var ZG=YG.nG(XG);if(ZG){var aH=YG.kG["Weapon"];var bH=aH.qF;bH.sF(j,Eb,Sw,SE,bH);}}),].d("name");this.qg=[new rg("Escape","ShowMenu"),new rg("ArrowDown","MoveDown"),new rg("ArrowLeft","MoveLeft"),new rg("ArrowRight","MoveRight"),new rg("ArrowUp","MoveUp"),new rg("Enter","Fire"),new rg("Gamepad0Down","MoveDown"),new rg("Gamepad0Left","MoveLeft"),new rg("Gamepad0Right","MoveRight"),new rg("Gamepad0Up","MoveUp"),new rg("Gamepad0Button0","Fire"),].d("inputName");var cH=10;var dH=cH/2;var eH=new g(1,1,1).ab(cH);var GG=[];var fH=100;var gH=new g(.5,.5,.01).ab(fH);var hH=new aq(gH,this.Lk.rn.L(),new Zp(gH,null,"rgba(255, 255, 255, 0.02)"));var iH=new PF("BackgroundBottom",[new ag(new yd(new g(0,0,UG))),new RF(hH)]);GG.push(iH);gH=new g(1,1,.01).ab(fH);var jH=new aq(gH,this.Lk.rn.L(),new Zp(gH,null,"rgba(255, 255, 255, 0.06)"));var kH=new PF("BackgroundTop",[new ag(new yd(new g(0,0,0))),new RF(jH)]);GG.push(kH);var lH=new g(30,30);var eG=new yd(lH);var mH=new Cs(eG.qd,dH);var nH="Gray";var oH=new cp(dH,nH);var pH=new ep(new Np(),[new Wp(cH*1.25,nH)]);var qH=new Zp(eH.L().gn(4),nH);var rH=new ep(new Np(),[new Eo("MoveRight",5,[new Op(qH,new g(1,0).ab(cH)),new Op(qH,new g(1.5,0).ab(cH)),new Op(qH,new g(2,0).ab(cH)),]),new Eo("MoveDown",5,[new Op(qH,new g(0,1).ab(cH)),new Op(qH,new g(0,1.5).ab(cH)),new Op(qH,new g(0,2).ab(cH)),]),new Eo("MoveLeft",5,[new Op(qH,new g(-1,0).ab(cH)),new Op(qH,new g(-1.5,0).ab(cH)),new Op(qH,new g(-2,0).ab(cH)),]),new Eo("MoveUp",5,[new Op(qH,new g(0,-1).ab(cH)),new Op(qH,new g(0,-1.5).ab(cH)),new Op(qH,new g(0,-2).ab(cH)),]),]);var sH=new Op(new nq("Player",nH),new g(0,cH));var tH=new op([pH,oH,sH,rH,]);var uH=function (j,Eb,Sw,LF,dF){var vH=null;if(dF.nF!=null){j.iF.xt(LF,dF);var wH=LF.MF;wH.AG-=dF.nF.oF;}else if(dF.aG!=null){var xH=new fG("Key",dF.aG.bG);if(LF.jG.nG(xH)){var yH=new Hg("You win!",new kb(j.lb.Jb(j)),j.ob,j.o.p.L().Q());j.jb=yH;}}else if(dF.fG!=null){LF.jG.mG(dF);Sw.NF.push(dF);}else if(dF.zH!=null){dF.Bt.XE=100;dF.RF.Jo["Friendly"].Mo=0;var sh=j.Ec.Fc("Conversation").Cb;var th=Mg.bd(sh);var Ph=j.ob;var AH=new xh(th,function zh(Oh){j.jb=Ph;});var BH=j.o.p.L();var CH=AH.Nh(BH,j);var jb=new kb(CH);j.jb=jb;}};var DH=new Qw("SpeedMax",5);var EH=new Qw("Friction",.03);var FH=new PF("Player",[new ag(eG),new kF([EH,DH]),new Bt(mH,[Bt.name],uH),new RF(tH),new jG(),new IG(),new cG(),new MF(5,function BG(j,Eb,Sw,CG){var yH=new Hg("You lose!",new kb(j.lb.Jb(j)),j.ob,j.o.p.L().Q());j.jb=yH;})]);GG.push(FH);var GH="Green";var HH=new g().Zx().w(this.k);var IH=new yd(HH);var JH=new Cs(IH.qd,dH);var KH=new mp(dH,dH*.8,.125,GH,null);var LH=new op([new Eo("Friendly",100,[new Eo("Blinking",3,[new Np(),KH]),KH],false),new Op(new nq("Talker",GH),new g(0,cH))]);var MH=new Qw("SpeedMax",1);var NH=new PF("Friendly",[new ag(IH),new kF([MH]),new Bt(JH),new RF(LH),new zH("AnEveningWithProfessorSurly"),new TE(function UE(j,Eb,Sw,OH,target){var SE=OH.TE;var vx=SE.target;if(vx==null){vx=new g().Zx().w(Sw.k);SE.target=vx;}var yF=OH.ag.bg;var zF=yF.qd;var PH=vx.L().P(zF).lu();if(PH>=2){yF.Wt.q(vx).P(zF).cn();}else {zF.q(vx);SE.target=null;}}),]);GG.push(NH);var QH="Red";var RH=QH;var SH=this.k.L().P(eG.qd);var TH=new yd(SH);var UH=new Qs([new g(0,-cH).Q(),new g(cH,cH).Q(),new g(-cH,cH).Q(),]);var VH=Gs.Iz(SH,UH,1 );var WH=new op([new Qp(new Xz(UH.ek),RH,null),new Op(new nq("Chaser",RH),new g(0,cH))]);var XH=new PF("Enemy",[new ag(TH),new kF([MH]),new Bt(VH),new nF(1),new MF(1),new RF(WH),new TE(function UE(j,Eb,Sw,SE,YH){var target=Sw.GG[YH];var yF=SE.ag.bg;yF.qu.q(target.ag.bg.qd).P(yF.qd).cn().ab(.1);},"Player"),]);GG.push(XH);var ZH=QH;var aI=4;var bI=5;for(var H=0;H<aI;H++){var cI;if(H%2 ==0){cI=new g(k.G,bI,1);}else {cI=new g(bI,k.t,1);}var dI=cI.L().Q().M();if(H>=2){dI.Xt().Md(k);}var eI=new yd(dI);var fI=new vs(dI,cI);var gI=new Zp(cI,ZH);var hI=new PF("ObstacleWall"+H,[new ag(eI),new Bt(fI),new nF(1),new RF(gI)]);GG.push(hI);}var iI=["....xxxx....",".....xx.....",".....xx....","....xxxx....","x..xx..xx..x","xxxx.xx.xxxx","xxxx.xx.xxxx","x..xx..xx..x","....xxxx....",".....xx.....",".....xx.....","....xxxx....",];var jI=new g(iI[0].length,iI.length,1
);var kI=new g(2,2,1);var lI=new wz(jI,kI,new Dz(),function Jp(map,Dp,Bz){var mI=map.xz[Dp.t][Dp.G];var Kp=(mI=="x"?"Blocking":"Open");var nI=(mI=="x");Bz.Lp=Kp;Bz.gw=nI;return Bz;},iI);var oI={"Blocking":new Zp(kI,ZH),"Open":new Np()};var pI=new op([new zp(lI,oI),new Op(new nq("Mine",ZH),new g(0,cH))]);var qI=bI*4;var Z=new g(1,1,0).ab(qI);var rI=this.k.L().P(Z).P(Z);var sI=48;var tI=[];for(var H=0;H<sI;H++){var uI=new g().Zx().w(rI).Md(Z);var vI=new yd(uI);var wI=new PF("ObstacleMapped",[new ag(vI),new Bt(new Fs(lI,vI)),new nF(1),new RF(pI)]);tI.push(wI);GG.push(wI);}var xI=new g(6,2).ab(cH);var yI=lH.L().Md(xI).Md(xI);var zI=new yd(yI);var fI=new vs(yI,xI);var AI=new PF("ObstacleBar",[new ag(zI),new Bt(fI),new nF(1),new RF(new op([new Zp(fI.k,ZH,ZH),new Op(new nq("Bar",ZH),new g(0,fI.k.t))]))]);GG.push(AI);var BI="Yellow";var CI=new op([new cp(dH,BI),new Op(new nq("Key",BI),new g(0,cH))]);var DI=32;var Cn=new g();for(var H=0;H<SG;H++){var EI=new g().Zx().w(rI).Md(Z);for(var oh=0;oh<tI.length;oh++){var yI=tI[oh].ag.bg.qd;var FI=Cn.q(yI).lu();if(FI<DI){Cn.cn().ab(DI);yI.Md(Cn);}}var GI=new Cs(EI,dH);var HI=new PF("Key"+H,[new fG("Key",1),new ag(new yd(EI)),new Bt(GI),new RF(CI)]);GG.push(HI);}var II="Cyan";var JI=new op([new cp(dH,II),new Op(new nq("Weapon",II),new g(0,cH))]);var KI=lH.L().Ux();var LI=new Cs(KI,dH);var MI=qF.uF();var NI=new PF("Weapon",[new fG("Weapon",1),new ag(new yd(KI)),new Bt(LI),new RF(JI),MI]);GG.push(NI);var OI=new g().Zx().ab(.5
).qk(.25,.25,0
).w(this.k);var QI=new yd(OI);var RI="Green";var SI=new PF("Goal",[new ag(QI),new Bt(new vs(OI,eH)),new RF(new op([new Zp(eH,RI),new nq(""+SG,BI),new Op(new nq("Exit",RI),new g(0,cH))])),new aG(SG),]);GG.push(SI);var yI=SI.ag.bg.qd;var zI=new yd(yI);zI.iy.Sy.Cb=0.002;var fI=new Xy(new jA(new Cs(yI,cH*3),cH*2 ),new nA(yI,zI.Rk.nn,.85 ));var TI=new PF("ObstacleRing",[new ag(zI),new Bt(fI),new nF(1),new RF(new Ro(fI,ZH,ZH))]);GG.push(TI);for(var H=0;H<GG.length;H++){var Co=GG[H];var UI=Co.RF;if(UI!=null){var VI=UI.Yf;UI.Yf=new ap(VI,this.Lk);}}var WI=new z("labelHealth",new g(8,5),new g(100,0),false,new rb(FH.MF,"integrity"),10,);this.XI=new kb(WI);FG.call(this,GG);this.Ld=new g();this.xd=new yd(this.Ld);}{RG.prototype=Object.create(FG.prototype);RG.prototype.constructor=RG;RG.prototype.Kd_YI=FG.prototype.Kd;RG.prototype.Kd=function (j,Eb){var o=j.o;o.Ej("Gray","Black");var xd=this.xd;var Ld=xd.qd;var dG=this.GG["Player"];var eG=dG.ag.bg;var Lk=this.Lk;Lk.bg.qd.q(eG.qd).af(Lk.Mr,this.k.L().P(Lk.Mr)).P(new g(0,0,Lk.Lr));this.Kd_YI(j,Eb);this.XI.Kd(j);};RG.prototype.WG=function (Eb,Co,ZI){var hx=Co.ag.bg;hx.Rk.wx(ZI);var Wt=hx.Wt;if(Wt.Vx(ZI)==false){hx.ly=Eb.TF;}hx.qu.q(ZI).ab(.5 );};}function IG(dG){this.dG=dG;}{IG.prototype.wg=function (j,Eb,Sw,LF){var k=Sw.k;var qg=Sw.qg;var zD=Sw.zD;var Lk=Sw.Lk;var eG=LF.ag.bg;var xg=j.xg;if(xg.iD()==true){xg.iD(false);eG.qd.q(xg.Yd).r(j.o.Fg).Md(Lk.bg.qd).P(Lk.Mr).Qo(k);j.sb.vE(j,"Sound");}var yg=xg.yg;for(var H=0;H<yg.length;H++){var zg=yg[H];if(zg.Ag==true){var Cg=qg[zg.name];if(Cg!=null){var Dg=Cg.Dg;var yD=zD[Dg];yD.QE(j,Eb,Sw,LF);if(Cg.Eg==true){zg.Ag=false;}}}}};}function zH(aJ){this.aJ=aJ;}function bJ(name,cJ,o,Ec,Eb){this.name=name;this.cJ=cJ;this.o=o;this.Ec=Ec;this.Eb=Eb;this.jb=null;}{bJ.new =function (name,cJ,o,Ec,Eb){var R=new bJ(name,cJ,o,Ec,Eb,[]);var dJ=eJ.fJ().gJ["debug"];R.dJ=dJ;return R;};bJ.prototype.Db=function (){this.iF=new ms();this.xk=new hJ();this.xk.Db(this);this.ad=new iJ();this.jJ=new kJ(this.name+"_",this.ad);this.Qb=new lJ(this.jJ);this.o.Db(this);this.sb=new tb(this.Ec.ID);this.HE=new ME(this.Ec.JD);this.lb=new b([If.eb().Jf]);var mJ=new kb(this.lb.Jb(this,this.o.vb));mJ=new nb(mJ,mJ);this.jb=mJ;this.xg=new SC();this.xg.Db(this);this.cJ.Db(this.wg.bind(this));};bJ.prototype.Ib=function (){this.sb.Ib();};bJ.prototype.wg=function (){this.xg.wg(this);if(this.jb!=null){if(this.ob!=null&&this.ob.PG!=null){this.ob.PG(this);}this.ob=this.jb;this.jb=null;if(this.ob.Db!=null){this.ob.Db(this);}}this.ob.wg(this);};}function Fb(Eb){this.name="World";this.Eb=Eb;}{Fb.prototype.Kd=function (j){this.Eb.Kd(j);};Fb.prototype.PG=function (j){j.sb.uE.oE(j);};Fb.prototype.Db=function (j){j.Eb=this.Eb;this.Eb.Db(j);var sb=j.sb;sb.xE(j,"Music");};Fb.prototype.wg=function (j){this.Eb.wg(j);this.Kd(j);};}function Pb(name,zc,Uw,Sw){this.name=name;this.zc=zc;this.TF=0;this.Uw=Uw;this.Sw=Sw;}{Pb.new =function (j){var hc=ic.hc();var jc=hc.kc_lc_mc();var Sw=new RG(j.o.vb.L().Ux(),5 );Sw.MG(j,null);var Vw=[Ww.eb().fx,Ww.eb().xx,];var Uw=new pF(Vw);var R=new Pb("World-"+jc,hc,Uw,Sw);return R;};Pb.prototype.Kd=function (j){this.Sw.Kd(j,this);};Pb.prototype.Db=function (j){this.Sw.Db(j,this);};Pb.prototype.wg=function (j){this.Sw.wg(j,this);this.TF++;};}function cc(name,Ob){this.name=name;this.Ob=Ob;}function lJ(jJ){this.jJ=jJ;this.ar="Profiles";}{lJ.prototype.dc=function (Nb){var ec=this.ec();ec.push(Nb);this.jJ.save(this.ar,ec);};lJ.prototype.Xb=function (nJ){var ec=this.ec();var oJ=this.pJ(ec,nJ.name);ec.jr(oJ);this.jJ.save(this.ar,ec);};lJ.prototype.pJ=function (ec,qJ){var R=null;for(var H=0;H<ec.length;H++){var Nb=ec[H];if(Nb.name==qJ){R=H;break;}}return R;};lJ.prototype.Rb=function (rJ){var ec=this.ec();var oJ=this.pJ(ec,rJ.name);if(oJ==null){ec.push(rJ);}else {ec.jr(oJ).cr(rJ,oJ);}try{this.jJ.save(this.ar,ec);}catch (sJ){var tJ="Error attempting to save: "+sJ;alert(tJ);}};lJ.prototype.ec=function (){var ec=this.jJ.DD(this.ar);if(ec==null){ec=[];this.jJ.save(this.ar,ec);}return ec;};lJ.prototype.nc=function (nJ){this.jJ.save(this.ar,"");};}function hd(){}{hd.prototype.uJ=function (vJ,Wc,wJ){var xJ=new yJ();xJ.zJ=vJ;xJ.Wc=Wc;xJ.wJ=wJ;xJ.onload=this.AJ_BJ.bind(this);xJ.CJ(vJ);};hd.prototype.jd=function (vJ,Wc,wJ){var xJ=new yJ();xJ.zJ=vJ;xJ.Wc=Wc;xJ.wJ=wJ;xJ.onload=this.AJ_BJ.bind(this);xJ.DJ(vJ);};hd.prototype.AJ_BJ=function (EJ){var xJ=EJ.target;var FJ=xJ.Py;var GJ=xJ.zJ.name;var Wc=xJ.Wc;var wJ=xJ.wJ;Wc.call(wJ,FJ);};hd.prototype.HJ=function (IJ,GJ){var JJ=new KJ(IJ.length);var LJ=new MJ(JJ);for(var H=0;H<IJ.length;H++){LJ[H]=IJ.charCodeAt(H);}var NJ=new OJ([JJ],{type:'PJ/PJ'});var QJ=document.createElement("a");QJ.RJ=window.SJ.TJ(NJ);QJ.UJ=GJ;QJ.gb();};hd.prototype.pd=function (VJ,WJ){var XJ=new OJ([VJ],{type:"text/plain"});var QJ=document.createElement("a");QJ.RJ=window.SJ.TJ(XJ);QJ.UJ=WJ;QJ.gb();};}function iJ(){}{iJ.prototype.bd=function (YJ){var ZJ=JSON.parse(YJ);ZJ.__proto__=aK.prototype;ZJ.bK();var R=ZJ.cK([]);return R;};iJ.prototype.od=function (dK,eK){var ZJ=new aK(dK);ZJ.Ey([],[]);var fK=JSON.stringify(ZJ,null,(eK==true?4 :null));return fK;};}function aK(gK){this.Jl=null;this.id=null;this.hK=null;this.iK=gK;}{aK.prototype.Ey=function (jK,kK){var gK=this.iK;if(gK!=null){var lK=gK.constructor.name;var mK=jK.indexOf (gK);if(mK>=0){var nK=kK[mK];this.id=nK.id;this.hK=true;this.iK=null;}else {this.hK=false;var oK=jK.length;this.id=oK;jK.push(gK);kK[oK]=this;this.Jl=lK;if(lK=="Function"){this.iK=gK.toString();}else {var zb={};this.PD=zb;for(var ar in gK){if(gK.__proto__[ar]==null){var pK=gK[ar];if(pK==null){Td=null;}else {var qK=pK.constructor.name;if(qK=="Boolean"||qK=="Number"||qK=="String"){Td=pK;}else {Td=new aK(pK);}}zb[ar]=Td;}}delete this.iK;for(var jq in zb){var Td=zb[jq];if(Td!=null){var rK=Td.constructor.name;if(rK=="SerializerNode"){Td.Ey(jK,kK);}}}}}}return this;};aK.prototype.bK=function (){var zb=this.PD;if(zb!=null){for(var jq in zb){var Td=zb[jq];if(Td!=null){var rK=Td.constructor.name;if(rK=="Object"){Td.__proto__=aK.prototype;Td.bK();}}}}};aK.prototype.cK=function (sK){var tK=this.hK;if(tK==true){var uK=sK[this.id];this.iK=uK.iK;}else {sK[this.id]=this;var lK=this.Jl;if(lK==null){}else if(lK=="Array"){this.iK=[];}else if(lK=="Function"){this.iK=Ji("("+this.iK+")");}else if(lK=="Boolean"||lK=="Number"||lK=="String"){}else {this.iK={};var vK=Ji("("+lK+")");this.iK.__proto__=vK.prototype;}var zb=this.PD;if(zb!=null){for(var jq in zb){var Td=zb[jq];if(Td!=null){if(Td.constructor.name=="SerializerNode"){Td=Td.cK(sK);}}this.iK[jq]=Td;}}}return this.iK;};}function kJ(wK,ad){this.wK=wK;if(this.wK==null){this.wK="";}this.ad=ad;}{kJ.prototype.DD=function (ar){var R;var xK=this.wK+ar;var yK=localStorage.getItem(xK);if(yK==null){R=null;}else {R=this.ad.bd(yK);}return R;};kJ.prototype.save=function (ar,zK){var AK=this.ad.od(zK);var xK=this.wK+ar;localStorage.setItem(xK,AK);};}function Uc(ld,md){this.ld=ld;this.md=md;this.qg=[new rg("Escape","ControlCancel",true),new rg("Gamepad0Button0","ControlCancel",true),].d("inputName");}{Uc.prototype.PG=function (j){j.xk.yk(this.dd);var o=j.o;o.Ej("Black","Black");o.Ck(j);};Uc.prototype.Db=function (j){var o=j.o;o.wk(j);var BK=document.createElement("div");BK.style="border:1px solid;width:"+o.vb.G+";height:"+o.vb.t;var CK=document.createElement("label");CK.innerHTML="Choose a file and click Load."+"  Due to web browser security features,"+" a mouse or keyboard will likely be necessary.";BK.appendChild(CK);var DK=document.createElement("input");DK.type="file";var EK=document.createElement("div");EK.appendChild(DK);BK.appendChild(EK);var FK=document.createElement("button");FK.innerHTML="Load";FK.GK=this.FK_HK.bind(this,j);var IK=document.createElement("button");IK.innerHTML="Cancel";IK.GK=this.IK_HK.bind(this,j);var JK=document.createElement("div");JK.appendChild(FK);JK.appendChild(IK);BK.appendChild(JK);j.xk.Bk(BK);DK.KK();this.dd=BK;};Uc.prototype.wg=function (j){var xg=j.xg;var yg=xg.yg;for(var H=0;H<yg.length;H++){var zg=yg[H];if(zg.Ag==true){var KE=this.qg[zg.name];if(KE!=null){zg.Ag=false;var Dg=KE.Dg;if(Dg=="ControlCancel"){j.jb=this.md;}}}}};Uc.prototype.IK_HK=function (j,vD){j.jb=this.md;};Uc.prototype.FK_HK=function (j,vD){var DK=this.dd.ed("input")[0];var fd=DK.gd[0];if(fd!=null){j.jb=this.ld;}};}function LK(){}{LK.prototype.MK=function (){var Lk=new Kr(new g(100,100,1),100,new yd(new g(0,0,-100),new fy(new g(0,0,1),new g(0,1,0))));var NK=[new g(0,0,0),new g(1,0,0),new g(0,1,0),new g(0,0,1),new g(-1,0,0),new g(0,-1,0),new g(0,0,-1),new g(1,2,3),];for(var H=0;H<NK.length;H++){var OK=NK[H];var cs=Lk.bp(OK.L());var PK=Lk.bs(cs);PK.round();var QK=PK.Vx(OK);var RK="Before:"+OK.toString()+", After:"+PK.toString();SK.TK(true,QK,RK);}};}function UK(){this.iF=new ms();}{UK.prototype.VK=function (){var iF=this.iF;var WK=Gs.Gz();var XK=Gs.Gz().Pn(new Sn_Up(new g(1,1,1)));var YK=Gs.Gz().Pn(new Sn_Up(new g(-1,-1,-1)));var ZK=Gs.Gz().Pn(new Sn_mB(new fy(new g(1,1,1).cn(),new g(0,0,1))));var aL=new Cs(new g(0,0,0),1);var bL=new Cs(new g(1,1,1),1);var At=WK;var Dt=aL;var cL=iF.St(At,Dt);SK.TK(true,cL);var At=XK;var Dt=aL;var cL=iF.St(At,Dt);SK.TK(true,cL);var At=YK;var Dt=bL;var cL=iF.St(At,Dt);SK.TK(false,cL);};UK.prototype.dL=function (){var iF=this.iF;var eL=new Ws([new g(0,0,-1),new g(0,0,1)]);var fL=new Ws([new g(0,0,1),new g(0,0,-1)]);var gL=new Ws([new g(0,0,0),new g(0,0,1)]);var hL=new Ws([new g(0,0,0),new g(0,0,2)]);var iL=new Ws([new g(0,0,1),new g(0,0,2)]);var jL=new Ws([new g(2,0,-1),new g(2,0,1)]);var kL=new Qs([new g(-1,-1,0),new g(1,-1,0),new g(1,1,0),new g(-1,1,0)]);var lL=new Qs([new g(-1,-1,1),new g(1,-1,1),new g(1,1,1),new g(-1,1,1)]);var cL=iF.Rs(eL,kL);SK.TK(true,cL);var cL=iF.Rs(fL,kL);SK.TK(true,cL);var cL=iF.Rs(gL,kL);SK.TK(true,cL);var cL=iF.Rs(hL,kL);SK.TK(true,cL);var cL=iF.Rs(hL,lL);SK.TK(true,cL);var cL=iF.Rs(iL,kL);SK.TK(false,cL);var cL=iF.Rs(jL,kL);SK.TK(false,cL);var mL=new Ws([new g(17,164,-1),new g(18,169,-1),]);var nL=new Qs([new g(10,165,-10),new g(70,165,-10),new g(70,165,0),new g(10,165,0),]);var cL=iF.Rs(mL,nL);SK.TK(true,cL);var mL=new Ws([new g(0,231,-1),new g(0,225.6,-1),]);var nL=new Qs([new g(10,230,-10),new g(-10,230,-10),new g(-10,230,0),new g(10,230,0),]);var cL=iF.Rs(mL,nL);SK.TK(true,cL);};UK.prototype.oL=function (){var iF=this.iF;var aL=new Cs(new g(0,0,0),1,);var pL=new Cs(new g(2,0,0),1,);var qL=new jA(new Cs(new g(0,0,0),3 ),2 );var cL=iF.St(aL,qL);SK.TK(false,cL);cL=iF.St(pL,qL);SK.TK(true,cL);var rL=new nA(qL.Zo.vj,new g(1,0,0),.5);cL=iF.St(aL,rL);SK.TK(true,cL);cL=iF.St(pL,rL);SK.TK(true,cL);var sL=new Xy(qL,rL);cL=iF.St(aL,sL);SK.TK(false,cL);cL=iF.St(pL,sL);SK.TK(true,cL);var tL=new nA(qL.Zo.vj,new g(0,1,0),.5);cL=iF.St(aL,tL);SK.TK(true,cL);cL=iF.St(pL,tL);SK.TK(false,cL);var uL=new Xy(qL,tL);cL=iF.St(aL,uL);SK.TK(false,cL);cL=iF.St(pL,uL);SK.TK(false,cL);};}function SK(){}{SK.TK=function (vL,wL,l){if(vL!=wL){if(l==null){l="Expected: '"+vL+"', Actual: '"+wL+"'.";}xL.yL("Error running test: "+l);xL.zL();throw l;}};SK.AL=function (BL){var CL=BL.constructor.name;for(var DL in BL){var EL=BL[DL];if(EL.constructor.name=="Function"){try{EL.call(BL);}catch (Yj){xL.yL("Test failed: "+CL+"."+DL+".");throw Yj;}}}xL.yL("All tests in test fixture "+CL+" passed.");};SK.FL=function (GL){for(var H=0;H<GL.length;H++){var BL=GL[H];SK.AL(BL);}};}function ic(year,month,day,hours,minutes,seconds){this.year=year;this.month=month;this.day=day;this.hours=hours;this.minutes=minutes;this.seconds=seconds;}{ic.HL=function (IL){var R=new ic(IL.getFullYear(),IL.getMonth()+1,IL.getDate(),IL.getHours(),IL.getMinutes(),IL.getSeconds());return R;};ic.hc=function (){return ic.HL(new Date());};ic.prototype.Vx=function (jn){var R=(this.year==jn.year&&this.month==jn.month&&this.day==jn.day&&this.hours==jn.hours&&this.minutes==jn.minutes&&this.seconds==jn.seconds);return R;};ic.prototype.kc_lc_mc=function (){var R=""+(""+this.month).Cr(2,"0")+(""+this.day).Cr(2,"0")+"-"+(""+this.hours).Cr(2,"0")+(""+this.minutes).Cr(2,"0")+"-"+(""+this.seconds).Cr(2,"0");return R;};ic.prototype.Bc=function (){var R=""+this.year+"/"+(""+this.month).Cr(2,"0")+"/"+(""+this.day).Cr(2,"0")+"-"+(""+this.hours).Cr(2,"0")+":"+(""+this.minutes).Cr(2,"0")+":"+(""+this.seconds).Cr(2,"0");return R;};}function hJ(){}{hJ.prototype.Bk=function (dd){this.Fm.appendChild(dd);};hJ.prototype.yk=function (dd){this.Fm.removeChild(dd);};hJ.prototype.Db=function (j){var Fm=this.Fm;if(Fm==null){var Fm=document.createElement("div");Fm.id="divMain";Fm.style.position="absolute";Fm.style.left="50%";Fm.style.top="50%";document.body.appendChild(Fm);this.Fm=Fm;}var o=j.o;Fm.style.marginLeft=0 -o.vb.G/2;Fm.style.marginTop=0 -o.vb.t/2;};}function ky(Cb){this.Cb=Cb;}{ky.prototype.Cd=function (){return this.Cb;};ky.prototype.Ye=function (Se){this.Cb=Se;return this.Cb;};}function JL(KL){this.KL=KL;var LL=1000;this.ML=Math.floor(LL/this.KL);}{JL.prototype.Db=function (NL){this.WD=setInterval(NL,this.ML);};}function eJ(OL){this.OL=OL;this.gJ=[];var PL=this.OL.search.substring(1);var QL=PL.split("&");for(var H=0;H<QL.length;H++){var RL=QL[H];var SL=RL.split("=");var TL=SL[0];var UL=SL[1];this.gJ.push(SL);this.gJ[TL]=UL;}}{eJ.fJ=function (){return new eJ(window.location);}}function VL(){var WL="Products/Demo/Content/";var XL=WL+"Images/";var YL=WL+"Audio/";var ZL=YL+"Effects/";var aM=YL+"Music/";var bM=WL+"Video/";var cM=WL+"Fonts/";var dM=WL+"Text/";var Ec=new HD([new Fk("Title",XL+"Title.png"),],[new dE("Sound",ZL+"Sound.wav",false),new dE("Music",aM+"Music.mp3",true),],[new LE("Movie",bM+"Movie.webm"),],[new AD("Font",cM+"Font.ttf"),],[new BE("Conversation",dM+"Conversation.json"),new BE("Instructions",dM+"Instructions.txt"),]);var eM=new g(400,300,1);var o=new qi([eM,eM.L().Q(),eM.L().ab(2),],"Font",10,"Gray","White");var cJ=new JL(20);var j=bJ.new ("Cursor_Quest",cJ,o,Ec,null);j.Db();}VL();
